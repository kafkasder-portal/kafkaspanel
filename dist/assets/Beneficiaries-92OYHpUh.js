import{v as ke,r as m,Z as y,aw as r,j as e,F as Ne,n as Se,g as Ce,ax as we,d as Ae}from"./index-JhQGfP3r.js";import{D as Te}from"./DataTable-ZpmiLouZ.js";import{e as De}from"./exportToCsv-CTUkvpR5.js";import{b as Be,c as Ke}from"./pdfExport-BxB3yxD7.js";import{M as X}from"./Modal-Ul9aPZYl.js";import{L as Ee}from"./LazyQRScannerModal-HOIvdZDO.js";import{A as Fe,c as ze,a as Oe}from"./AdvancedSearchModal-Co-kOI4b.js";import{F as Ie}from"./jspdf.plugin.autotable-Cb0Hj5Ka.js";import{Q as $e}from"./qr-code-B30iB-_1.js";import"./sanitization-BJYGODn_.js";import"./purify.es-CQJ0hv7W.js";const Ge=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function Le(){return{storageKey:"beneficiaries_saved_filters",filters:[{id:"status",label:"Durum",value:"",type:"select",options:[{label:"Aktif",value:"active"},{label:"Pasif",value:"inactive"},{label:"Beklemede",value:"pending"}]},{id:"city",label:"Şehir",value:"",type:"select",options:[{label:"İstanbul",value:"istanbul"},{label:"Ankara",value:"ankara"},{label:"İzmir",value:"izmir"}]},{id:"age",label:"Yaş",value:"",type:"number"},{id:"name",label:"Ad Soyad",value:"",type:"text"}],quickFilters:[{id:"active",label:"Aktif Yararlanıcılar",value:"active",type:"select"},{id:"pending",label:"Bekleyen Başvurular",value:"pending",type:"select"}]}}function Ye(){return[{id:"all",name:"Tümü",filters:{},pageType:"beneficiaries",isQuickFilter:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageCount:0,lastUsed:new Date().toISOString()},{id:"active",name:"Aktif",filters:{status:"active"},pageType:"beneficiaries",isQuickFilter:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageCount:0,lastUsed:new Date().toISOString()},{id:"inactive",name:"Pasif",filters:{status:"inactive"},pageType:"beneficiaries",isQuickFilter:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageCount:0,lastUsed:new Date().toISOString()},{id:"pending",name:"Beklemede",filters:{status:"pending"},pageType:"beneficiaries",isQuickFilter:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageCount:0,lastUsed:new Date().toISOString()}]}const ee=async()=>{const{data:p,error:C}=await y.from("beneficiaries").select("id").order("id",{ascending:!1}).limit(1);return C?(console.error("Error getting next ID:",C),1):p&&p.length>0?p[0].id+1:1};function Xe(){const[p,C]=m.useState(""),[ae,D]=m.useState(!1),[ne,F]=m.useState(!1),[te,V]=m.useState(!0),[b,w]=m.useState(!1),[B,z]=m.useState([]),[le,G]=m.useState(!1),[O,L]=m.useState(null),[ie,Y]=m.useState(!1),[v,R]=m.useState({}),[se,re]=m.useState([]),[_,oe]=m.useState({personal:!0,contact:!1,financial:!1,health:!1,housing:!1,additional:!1,system:!1}),I=Oe(),de=ze(),ce=Le(),ue=Ye(),[n,$]=m.useState({name:"",surname:"",category:"Yetim Ailesi",nationality:"TC",birth_date:"",birth_place:"",identity_no:"",gender:"",marital_status:"",education_level:"",mother_name:"",father_name:"",phone:"",alternative_phone:"",email:"",address:"",city:"",district:"",neighborhood:"",postal_code:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relation:"",monthly_income:"",household_size:"",dependent_count:"",employment_status:"",occupation:"",social_security_no:"",bank_account_no:"",bank_name:"",has_disability:!1,disability_type:"",disability_percentage:"",chronic_illness:"",medication_needs:"",health_insurance:!1,health_insurance_type:"",housing_type:"",monthly_rent:"",room_count:"",has_electricity:!0,has_water:!0,has_gas:!1,has_internet:!1,housing_condition:"",special_needs:"",previous_aid_received:!1,previous_aid_details:"",verification_status:"pending",notes:"",fund_region:"Genel",file_connection:"Doğrudan Başvuru",file_number:"",status:"active",mernis_check:!1}),[x,q]=m.useState({name:"",surname:"",identity_no:""}),K=m.useCallback(async()=>{V(!0);let a=y.from("beneficiaries").select("*").order("created_at",{ascending:!1});const l=p.trim();l&&(a=a.or(`name.ilike.%${l}%,surname.ilike.%${l}%,identity_no.ilike.%${l}%,phone.ilike.%${l}%,email.ilike.%${l}%,city.ilike.%${l}%,district.ilike.%${l}%`)),Object.entries(v).forEach(([h,o])=>{o!=null&&o!==""&&(Array.isArray(o)&&o.length>0?a=a.in(h,o):typeof o=="object"&&o.min!==void 0&&o.max!==void 0?(o.min!==null&&(a=a.gte(h,o.min)),o.max!==null&&(a=a.lte(h,o.max))):typeof o=="object"&&o.start&&o.end?a=a.gte(h,o.start).lte(h,o.end):typeof o=="string"&&(h==="name"||h==="surname"||h==="city"||h==="district")?a=a.ilike(h,`%${o}%`):a=a.eq(h,o))});const{data:c,error:d}=await a;d?(console.warn("Beneficiaries fetch error:",d),r.error("Veriler yüklenirken hata oluştu"),z([])):z(c||[]),V(!1)},[p,v]);m.useEffect(()=>{K()},[K]);const M=()=>{$({name:"",surname:"",category:"Yetim Ailesi",nationality:"TC",birth_date:"",birth_place:"",identity_no:"",gender:"",marital_status:"",education_level:"",mother_name:"",father_name:"",phone:"",alternative_phone:"",email:"",address:"",city:"",district:"",neighborhood:"",postal_code:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relation:"",monthly_income:"",household_size:"",dependent_count:"",employment_status:"",occupation:"",social_security_no:"",bank_account_no:"",bank_name:"",has_disability:!1,disability_type:"",disability_percentage:"",chronic_illness:"",medication_needs:"",health_insurance:!1,health_insurance_type:"",housing_type:"",monthly_rent:"",room_count:"",has_electricity:!0,has_water:!0,has_gas:!1,has_internet:!1,housing_condition:"",special_needs:"",previous_aid_received:!1,previous_aid_details:"",verification_status:"pending",notes:"",fund_region:"Genel",file_connection:"Doğrudan Başvuru",file_number:"",status:"active",mernis_check:!1}),L(null)},P=()=>{q({name:"",surname:"",identity_no:""})},he=async()=>{if(!n.name.trim()||!n.surname.trim()||!n.identity_no.trim()){r.error("Ad, Soyad ve Kimlik No alanları zorunludur");return}w(!0);try{const a={name:n.name.trim(),surname:n.surname.trim(),category:n.category,nationality:n.nationality.trim(),birth_date:n.birth_date||null,identity_no:n.identity_no.trim(),phone:n.phone.trim()||null,email:n.email.trim()||null,address:n.address.trim()||null,city:n.city.trim()||null,district:n.district.trim()||null,status:n.status,fund_region:n.fund_region};let l;if(O)l=await y.from("beneficiaries").update(a).eq("id",O).select();else{const d=await ee(),h={...a,id:d};l=await y.from("beneficiaries").insert([h]).select()}const{error:c}=l;c?(console.error("Save error:",c),r.error("Kayıt sırasında hata oluştu: "+c.message)):(r.success(O?"İhtiyaç sahibi başarıyla güncellendi":"İhtiyaç sahibi başarıyla kaydedildi"),D(!1),M(),L(null),K())}catch(a){console.error("Save error:",a),r.error("Kayıt sırasında beklenmeyen hata oluştu")}finally{w(!1)}},me=a=>{a.identity_no&&($(l=>({...l,identity_no:a.identity_no||"",name:a.name||l.name,surname:a.surname||l.surname,birth_date:a.birth_date||l.birth_date})),r.success("Kimlik bilgileri QR koddan okundu")),G(!1)},t=(a,l)=>{$(c=>({...c,[a]:l}))},f=a=>{oe(l=>({...l,[a]:!l[a]}))},j=({title:a,isExpanded:l,onToggle:c,children:d})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg mb-4",children:[e.jsxs("button",{type:"button",onClick:c,className:"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 flex items-center justify-between text-left font-medium text-gray-900 rounded-t-lg",children:[e.jsx("span",{children:a}),l?e.jsx(Ge,{className:"h-5 w-5"}):e.jsx(we,{className:"h-5 w-5"})]}),l&&e.jsx("div",{className:"p-4 space-y-4",children:d})]}),U=(a,l)=>{q(c=>({...c,[a]:l}))},pe=async()=>{if(!x.name.trim()||!x.surname.trim()||!x.identity_no.trim()){r.error("Ad, Soyad ve Kimlik No alanları zorunludur");return}w(!0);try{const a=await ee(),{error:l}=await y.from("beneficiaries").insert([{id:a,name:x.name.trim(),surname:x.surname.trim(),identity_no:x.identity_no.trim(),category:"Yetim Ailesi",status:"geçici",fund_region:"Genel",file_connection:"Doğrudan Başvuru"}]).select();l?(console.error("Temp save error:",l),r.error("Geçici kayıt sırasında hata oluştu: "+l.message)):(r.success("Geçici kayıt başarıyla oluşturuldu"),F(!1),P(),K())}catch(a){console.error("Temp save error:",a),r.error("Geçici kayıt sırasında beklenmeyen hata oluştu")}finally{w(!1)}},ge=a=>{$({name:a.name||"",surname:a.surname||"",category:a.category||"Yetim Ailesi",nationality:a.nationality||"TC",birth_date:a.birth_date||"",birth_place:"",identity_no:a.identity_no||"",gender:"",marital_status:"",education_level:"",mother_name:"",father_name:"",phone:a.phone||"",alternative_phone:"",email:a.email||"",address:a.address||"",city:a.city||"",district:a.district||"",neighborhood:"",postal_code:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relation:"",monthly_income:"",household_size:"",dependent_count:"",employment_status:"",occupation:"",social_security_no:"",bank_account_no:"",bank_name:"",has_disability:!1,disability_type:"",disability_percentage:"",chronic_illness:"",medication_needs:"",health_insurance:!1,health_insurance_type:"",housing_type:"",monthly_rent:"",room_count:"",has_electricity:!0,has_water:!0,has_gas:!1,has_internet:!1,housing_condition:"",special_needs:"",previous_aid_received:!1,previous_aid_details:"",verification_status:"pending",notes:"",fund_region:a.fund_region||"Genel",file_connection:a.file_connection||"Doğrudan Başvuru",file_number:a.file_number||"",status:a.status||"active",mernis_check:!1}),L(Number(a.id)),D(!0)},xe=a=>{R(a),Y(!1)},ye=()=>{R({})},be=a=>{const l={...a,id:Date.now().toString(),createdAt:new Date().toISOString()};re(c=>[...c,l]),r.success("Filtre kaydedildi")},ve=a=>{R(a.filters),r.success("Filtre yüklendi")},H=()=>{const a=Date.now();return{normal:[{name:"Ahmet",surname:"Yılmaz",category:"Yetim Ailesi",nationality:"T.C.",birth_date:"1985-03-15",identity_no:`${a}001`,phone:"0532 123 45 67",family_size:4,status:"active"},{name:"Fatma",surname:"Demir",category:"Yaşlı",nationality:"T.C.",birth_date:"1950-08-22",identity_no:`${a}002`,phone:"0533 234 56 78",family_size:2,status:"active"},{name:"Mehmet",surname:"Kaya",category:"Engelli",nationality:"T.C.",birth_date:"1978-12-10",identity_no:`${a}003`,phone:"0534 345 67 89",family_size:3,status:"active"}],temporary:[{name:"Ali",surname:"Özkan",identity_no:`${a}004`,category:"Muhtaç Aile",family_size:5,status:"inactive"},{name:"Ayşe",surname:"Çelik",identity_no:`${a}005`,category:"Hasta",family_size:1,status:"inactive"}]}},_e=async()=>{try{const a="your_supabase_url_here",l="your_supabase_anon_key_here";if(console.log("Environment Variables:"),console.log("VITE_SUPABASE_URL:",a),console.log("VITE_SUPABASE_ANON_KEY:",l?"Set (hidden)":"Missing"),a.includes("your-project")){r.error("Supabase URL is still a placeholder - need real project URL");return}const{data:c,error:d}=await y.from("beneficiaries").select("count").limit(1);d?(console.error("Connection test error:",{message:(d==null?void 0:d.message)||"No message",code:(d==null?void 0:d.code)||"No code",details:(d==null?void 0:d.details)||"No details"}),r.error(`Connection failed: ${(d==null?void 0:d.message)||"Unknown error"}`)):(console.log("Connection successful:",c),r.success("Supabase connection successful!"))}catch(a){console.error("Test error:",a),r.error("Connection test failed")}},fe=async()=>{var a,l,c,d,h,o,J;w(!0);try{const u="your_supabase_url_here",k="your_supabase_anon_key_here";if(console.log("Supabase Config:",{url:u?"Set":"Missing",key:k?"Set":"Missing",urlValue:u!=null&&u.includes("supabase.co")?"Valid":"Placeholder"}),!u||!k||u.includes("your-project")){console.warn("Supabase not properly configured, using mock data");const s=H(),N=[...s.normal,...s.temporary].map((S,Q)=>({...S,id:`mock-${Date.now()}-${Q}`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));z(S=>[...S,...N]),r.success(`${N.length} demo kayıt mock data olarak eklendi (Supabase yapılandırması eksik)`);return}console.log("Testing Supabase connection...");const{error:g}=await y.from("beneficiaries").select("count").limit(1);if(g){console.error("Supabase connection test failed:",{message:g.message||"No message",details:g.details||"No details",hint:g.hint||"No hint",code:g.code||"No code"}),g.code==="PGRST116"||(a=g.message)!=null&&a.includes('relation "beneficiaries" does not exist')?r.error("Beneficiaries tablosu bulunamadı. Lütfen veritabanı migrasyonlarını çalıştırın."):(l=g.message)!=null&&l.includes("Invalid API key")||(c=g.message)!=null&&c.includes("JWT")?r.error("Geçersiz API key. Lütfen Supabase ayarlarını kontrol edin."):(d=g.message)!=null&&d.includes("permission denied")?r.error("Yetki hatası. Lütfen RLS politikalarını kontrol edin."):r.error(`Veritabanı bağlantısı hatası: ${g.message||"Bilinmeyen hata"}`);return}console.log("Supabase connection successful, creating demo data...");const E=H();console.log("Demo data to insert:",E);const{data:A,error:Z}=await y.from("beneficiaries").insert(E.normal).select(),{data:T,error:W}=await y.from("beneficiaries").insert(E.temporary).select();if(Z||W){const s=Z||W;if(console.error("Demo records error - FULL ERROR OBJECT:",s),console.error("Demo records error - STRUCTURED:",{message:(s==null?void 0:s.message)||"No message",details:(s==null?void 0:s.details)||"No details",hint:(s==null?void 0:s.hint)||"No hint",code:(s==null?void 0:s.code)||"No code",errorType:typeof s}),(s==null?void 0:s.code)==="PGRST116"||(h=s==null?void 0:s.message)!=null&&h.includes('relation "beneficiaries" does not exist')){r.error("Beneficiaries tablosu bulunamadı. Veritabanında tablolar oluşturulmamış."),console.warn("Beneficiaries table does not exist. Database migrations need to be run.");return}if((o=s==null?void 0:s.message)!=null&&o.includes("Invalid API key")||(J=s==null?void 0:s.message)!=null&&J.includes("not found")||(s==null?void 0:s.code)==="PGRST202"){r.error("Veritabanı yapılandırması eksik. Lütfen Supabase ayarlarını kontrol edin."),console.warn("Supabase appears to be misconfigured. Using mock data instead.");const N=[...E.normal,...E.temporary].map((S,Q)=>({...S,id:`mock-${Date.now()}-${Q}`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));z(S=>[...S,...N]),r.success(`${N.length} demo kayıt mock data olarak eklendi`)}else{const N=(s==null?void 0:s.message)||(s==null?void 0:s.details)||JSON.stringify(s,null,2)||"Bilinmeyen hata";r.error(`Demo kayıtlar oluşturulurken hata oluştu: ${N}`)}}else{const s=((A==null?void 0:A.length)||0)+((T==null?void 0:T.length)||0);r.success(`${s} demo kayıt başarıyla oluşturuldu (${(A==null?void 0:A.length)||0} normal, ${(T==null?void 0:T.length)||0} geçici)`),K()}}catch(u){console.error("Demo records error:",{message:u instanceof Error?u.message:String(u),stack:u instanceof Error?u.stack:void 0,type:typeof u});let k="Bilinmeyen hata";u instanceof Error?k=u.message:typeof u=="string"?k=u:u&&typeof u=="object"&&(k=JSON.stringify(u,null,2)),r.error(`Demo kayıtlar oluşturulurken beklenmeyen hata oluştu: ${k}`)}finally{w(!1)}},je=[{key:"id",header:"ID",render:(a,l,c)=>e.jsx(Ae,{className:"text-blue-600 underline",to:`/aid/beneficiaries/${l.id}`,children:(c||0)+1})},{key:"name",header:"Ad Soyad",render:(a,l)=>e.jsxs("span",{children:[l.name," ",l.surname]})},{key:"category",header:"Kategori"},{key:"nationality",header:"Uyruk"},{key:"identity_no",header:"Kimlik No"},{key:"phone",header:"Cep Telefonu"},{key:"city",header:"Şehir"},{key:"district",header:"İlçe"},{key:"status",header:"Durum",render:(a,l)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${l.status==="suspended"?"bg-orange-100 text-orange-800 border border-orange-200":l.status==="active"?"bg-green-100 text-green-800":l.status==="inactive"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:l.status==="suspended"?"🔄 Geçici":l.status==="active"?"Aktif":l.status==="inactive"?"Pasif":l.status})},{key:"actions",header:"İşlemler",render:(a,l)=>l.status==="suspended"?e.jsx("button",{onClick:()=>ge(l),className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",children:"Tamamla"}):null}];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-2",children:[e.jsx("input",{value:p,onChange:a=>C(a.target.value),className:"min-w-64 flex-1 rounded border px-2 py-1 text-sm",placeholder:"Ad, Soyad, Kimlik No, Telefon, Şehir, İlçe..."}),e.jsx("button",{className:"rounded bg-green-600 px-3 py-1 text-sm text-white",children:"Ara"}),e.jsxs("button",{onClick:()=>Y(!0),className:`rounded border px-3 py-1 text-sm flex items-center gap-1 ${Object.keys(v).length>0?"bg-blue-50 border-blue-300 text-blue-700":"hover:bg-gray-50"}`,children:[e.jsx(Ne,{className:"w-3 h-3"}),"Gelişmiş Filtre",Object.keys(v).length>0&&e.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full px-1.5 py-0.5 ml-1",children:Object.keys(v).length})]}),Object.keys(v).length>0&&e.jsx("button",{onClick:ye,className:"rounded bg-red-100 border border-red-300 text-red-700 px-3 py-1 text-sm hover:bg-red-200",children:"Filtreleri Temizle"}),e.jsx("button",{onClick:()=>D(!0),className:"rounded border px-3 py-1 text-sm",children:"Ekle"}),e.jsx("button",{onClick:()=>F(!0),className:"rounded bg-orange-600 px-3 py-1 text-sm text-white",children:"Geçici Kayıt"}),e.jsx("button",{onClick:_e,className:"rounded bg-gray-600 px-3 py-1 text-sm text-white hover:bg-gray-700",children:"Test DB"}),e.jsx("button",{onClick:fe,disabled:b,className:"rounded bg-purple-600 px-3 py-1 text-sm text-white hover:bg-purple-700 disabled:opacity-50",children:b?"Oluşturuluyor...":"Demo Kayıt"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("button",{onClick:()=>De("ihtiyac-sahipleri.csv",B),className:"rounded bg-blue-600 px-3 py-1 text-sm text-white hover:bg-blue-700 flex items-center gap-1",title:"CSV olarak indir",children:[e.jsx(Se,{className:"w-3 h-3"}),"CSV"]}),e.jsxs("button",{onClick:()=>Be(B,p.trim()?{search:p.trim()}:void 0),className:"rounded bg-green-600 px-3 py-1 text-sm text-white hover:bg-green-700 flex items-center gap-1",title:"Excel olarak indir",children:[e.jsx(Ie,{className:"w-3 h-3"}),"Excel"]}),e.jsxs("button",{onClick:()=>Ke(B,p.trim()?{search:p.trim()}:void 0),className:"rounded bg-red-600 px-3 py-1 text-sm text-white hover:bg-red-700 flex items-center gap-1",title:"PDF olarak indir",children:[e.jsx(Ce,{className:"w-3 h-3"}),"PDF"]})]}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[B.length," Kayıt"]})]}),te?e.jsx("div",{className:"p-6 text-sm text-muted-foreground",children:"Yükleniyor..."}):e.jsx(Te,{columns:je,data:B}),e.jsx(X,{isOpen:ae,onClose:()=>{D(!1),M()},title:O?"İhtiyaç Sahibi Bilgilerini Tamamla":"Yeni İhtiyaç Sahibi",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>G(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 flex items-center gap-2 shadow-md transition-all duration-200 hover:shadow-lg",children:[e.jsx($e,{className:"w-5 h-5"}),"Tarama"]})}),e.jsx(j,{title:"Temel Bilgiler",isExpanded:_.personal,onToggle:()=>f("personal"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(i,{label:"Kategori *",children:e.jsxs("select",{value:n.category,onChange:a=>t("category",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"Yetim Ailesi",children:"Yetim Ailesi"}),e.jsx("option",{value:"Muhtaç Aile",children:"Muhtaç Aile"}),e.jsx("option",{value:"Yaşlı",children:"Yaşlı"}),e.jsx("option",{value:"Engelli",children:"Engelli"}),e.jsx("option",{value:"Hasta",children:"Hasta"})]})}),e.jsx(i,{label:"Ad *",children:e.jsx("input",{value:n.name,onChange:a=>t("name",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Ad"})}),e.jsx(i,{label:"Soyad *",children:e.jsx("input",{value:n.surname,onChange:a=>t("surname",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Soyad"})}),e.jsx(i,{label:"Uyruk",children:e.jsxs("select",{value:n.nationality,onChange:a=>t("nationality",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"TC",children:"T.C."}),e.jsx("option",{value:"Suriye",children:"Suriye"}),e.jsx("option",{value:"Irak",children:"Irak"}),e.jsx("option",{value:"Afganistan",children:"Afganistan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})}),e.jsx(i,{label:"Doğum Tarihi",children:e.jsx("input",{type:"date",value:n.birth_date,onChange:a=>t("birth_date",a.target.value),className:"w-full rounded border px-2 py-1"})}),e.jsx(i,{label:"Doğum Yeri",children:e.jsx("input",{value:n.birth_place,onChange:a=>t("birth_place",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Doğum yeri"})}),e.jsx(i,{label:"Cinsiyet",children:e.jsxs("select",{value:n.gender,onChange:a=>t("gender",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Erkek",children:"Erkek"}),e.jsx("option",{value:"Kadın",children:"Kadın"})]})}),e.jsx(i,{label:"Medeni Durum",children:e.jsxs("select",{value:n.marital_status,onChange:a=>t("marital_status",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Bekar",children:"Bekar"}),e.jsx("option",{value:"Evli",children:"Evli"}),e.jsx("option",{value:"Dul",children:"Dul"}),e.jsx("option",{value:"Boşanmış",children:"Boşanmış"})]})}),e.jsx(i,{label:"Eğitim Seviyesi",children:e.jsxs("select",{value:n.education_level,onChange:a=>t("education_level",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Okur-yazar değil",children:"Okur-yazar değil"}),e.jsx("option",{value:"İlkokul",children:"İlkokul"}),e.jsx("option",{value:"Ortaokul",children:"Ortaokul"}),e.jsx("option",{value:"Lise",children:"Lise"}),e.jsx("option",{value:"Üniversite",children:"Üniversite"}),e.jsx("option",{value:"Lisansüstü",children:"Lisansüstü"})]})}),e.jsx(i,{label:"Anne Adı",children:e.jsx("input",{value:n.mother_name,onChange:a=>t("mother_name",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Anne adı"})}),e.jsx(i,{label:"Baba Adı",children:e.jsx("input",{value:n.father_name,onChange:a=>t("father_name",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Baba adı"})}),e.jsxs("div",{className:"sm:col-span-2 grid grid-cols-[1fr_auto] items-center gap-2",children:[e.jsx(i,{label:"Kimlik No *",children:e.jsx("input",{value:n.identity_no,onChange:a=>t("identity_no",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"11 haneli kimlik numarası"})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm mt-5",children:[e.jsx("input",{type:"checkbox",checked:n.mernis_check,onChange:a=>t("mernis_check",a.target.checked)}),"Mernis Kontrolü Yap"]})]})]})}),e.jsx(j,{title:"İletişim Bilgileri",isExpanded:_.contact,onToggle:()=>f("contact"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(i,{label:"Telefon",children:e.jsx("input",{value:n.phone,onChange:a=>t("phone",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0555 123 45 67"})}),e.jsx(i,{label:"Alternatif Telefon",children:e.jsx("input",{value:n.alternative_phone,onChange:a=>t("alternative_phone",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0555 123 45 67"})}),e.jsx(i,{label:"E-posta",children:e.jsx("input",{type:"email",value:n.email,onChange:a=>t("email",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"ornek@email.com"})}),e.jsx(i,{label:"Şehir",children:e.jsx("input",{value:n.city,onChange:a=>t("city",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Şehir"})}),e.jsx(i,{label:"İlçe",children:e.jsx("input",{value:n.district,onChange:a=>t("district",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"İlçe"})}),e.jsx(i,{label:"Mahalle",children:e.jsx("input",{value:n.neighborhood,onChange:a=>t("neighborhood",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Mahalle"})}),e.jsx(i,{label:"Posta Kodu",children:e.jsx("input",{value:n.postal_code,onChange:a=>t("postal_code",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"34000"})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Adres",children:e.jsx("textarea",{value:n.address,onChange:a=>t("address",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Tam adres",rows:2})})}),e.jsx(i,{label:"Acil Durum İletişim Adı",children:e.jsx("input",{value:n.emergency_contact_name,onChange:a=>t("emergency_contact_name",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Acil durum kişisi"})}),e.jsx(i,{label:"Acil Durum Telefon",children:e.jsx("input",{value:n.emergency_contact_phone,onChange:a=>t("emergency_contact_phone",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0555 123 45 67"})}),e.jsx(i,{label:"Acil Durum Yakınlık",children:e.jsxs("select",{value:n.emergency_contact_relation,onChange:a=>t("emergency_contact_relation",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Eş",children:"Eş"}),e.jsx("option",{value:"Anne",children:"Anne"}),e.jsx("option",{value:"Baba",children:"Baba"}),e.jsx("option",{value:"Kardeş",children:"Kardeş"}),e.jsx("option",{value:"Çocuk",children:"Çocuk"}),e.jsx("option",{value:"Akraba",children:"Akraba"}),e.jsx("option",{value:"Arkadaş",children:"Arkadaş"}),e.jsx("option",{value:"Komşu",children:"Komşu"})]})})]})}),e.jsx(j,{title:"Finansal Bilgiler",isExpanded:_.financial,onToggle:()=>f("financial"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(i,{label:"Aylık Gelir (TL)",children:e.jsx("input",{type:"number",value:n.monthly_income,onChange:a=>t("monthly_income",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0"})}),e.jsx(i,{label:"Hane Büyüklüğü",children:e.jsx("input",{type:"number",value:n.household_size,onChange:a=>t("household_size",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"1"})}),e.jsx(i,{label:"Bağımlı Kişi Sayısı",children:e.jsx("input",{type:"number",value:n.dependent_count,onChange:a=>t("dependent_count",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0"})}),e.jsx(i,{label:"İstihdam Durumu",children:e.jsxs("select",{value:n.employment_status,onChange:a=>t("employment_status",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Çalışıyor",children:"Çalışıyor"}),e.jsx("option",{value:"İşsiz",children:"İşsiz"}),e.jsx("option",{value:"Emekli",children:"Emekli"}),e.jsx("option",{value:"Öğrenci",children:"Öğrenci"}),e.jsx("option",{value:"Ev hanımı",children:"Ev hanımı"}),e.jsx("option",{value:"Çalışamaz durumda",children:"Çalışamaz durumda"})]})}),e.jsx(i,{label:"Meslek",children:e.jsx("input",{value:n.occupation,onChange:a=>t("occupation",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Meslek"})}),e.jsx(i,{label:"SGK No",children:e.jsx("input",{value:n.social_security_no,onChange:a=>t("social_security_no",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"SGK numarası"})}),e.jsx(i,{label:"Banka Hesap No",children:e.jsx("input",{value:n.bank_account_no,onChange:a=>t("bank_account_no",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"IBAN"})}),e.jsx(i,{label:"Banka Adı",children:e.jsx("input",{value:n.bank_name,onChange:a=>t("bank_name",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Banka adı"})})]})}),e.jsx(j,{title:"Sağlık Bilgileri",isExpanded:_.health,onToggle:()=>f("health"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:n.has_disability,onChange:a=>t("has_disability",a.target.checked)}),"Engel durumu var"]})}),n.has_disability&&e.jsxs(e.Fragment,{children:[e.jsx(i,{label:"Engel Türü",children:e.jsxs("select",{value:n.disability_type,onChange:a=>t("disability_type",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Fiziksel",children:"Fiziksel"}),e.jsx("option",{value:"Zihinsel",children:"Zihinsel"}),e.jsx("option",{value:"Görme",children:"Görme"}),e.jsx("option",{value:"İşitme",children:"İşitme"}),e.jsx("option",{value:"Konuşma",children:"Konuşma"}),e.jsx("option",{value:"Çoklu",children:"Çoklu"})]})}),e.jsx(i,{label:"Engel Oranı (%)",children:e.jsx("input",{type:"number",value:n.disability_percentage,onChange:a=>t("disability_percentage",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0-100",min:"0",max:"100"})})]}),e.jsx(i,{label:"Kronik Hastalık",children:e.jsx("input",{value:n.chronic_illness,onChange:a=>t("chronic_illness",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Kronik hastalık varsa belirtiniz"})}),e.jsx(i,{label:"İlaç İhtiyacı",children:e.jsx("input",{value:n.medication_needs,onChange:a=>t("medication_needs",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Düzenli kullanılan ilaçlar"})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:n.health_insurance,onChange:a=>t("health_insurance",a.target.checked)}),"Sağlık sigortası var"]})}),n.health_insurance&&e.jsx(i,{label:"Sigorta Türü",children:e.jsxs("select",{value:n.health_insurance_type,onChange:a=>t("health_insurance_type",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"SGK",children:"SGK"}),e.jsx("option",{value:"Yeşil Kart",children:"Yeşil Kart"}),e.jsx("option",{value:"Özel Sigorta",children:"Özel Sigorta"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})})]})}),e.jsx(j,{title:"Konut Bilgileri",isExpanded:_.housing,onToggle:()=>f("housing"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(i,{label:"Konut Türü",children:e.jsxs("select",{value:n.housing_type,onChange:a=>t("housing_type",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Mülk",children:"Mülk"}),e.jsx("option",{value:"Kiralık",children:"Kiralık"}),e.jsx("option",{value:"Lojman",children:"Lojman"}),e.jsx("option",{value:"Akraba yanında",children:"Akraba yanında"}),e.jsx("option",{value:"Barınak",children:"Barınak"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})}),e.jsx(i,{label:"Aylık Kira (TL)",children:e.jsx("input",{type:"number",value:n.monthly_rent,onChange:a=>t("monthly_rent",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"0"})}),e.jsx(i,{label:"Oda Sayısı",children:e.jsxs("select",{value:n.room_count,onChange:a=>t("room_count",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5+",children:"5+"})]})}),e.jsx(i,{label:"Konut Durumu",children:e.jsxs("select",{value:n.housing_condition,onChange:a=>t("housing_condition",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"İyi",children:"İyi"}),e.jsx("option",{value:"Orta",children:"Orta"}),e.jsx("option",{value:"Kötü",children:"Kötü"}),e.jsx("option",{value:"Çok kötü",children:"Çok kötü"})]})}),e.jsxs("div",{className:"sm:col-span-2 grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:n.has_electricity,onChange:a=>t("has_electricity",a.target.checked)}),"Elektrik"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:n.has_water,onChange:a=>t("has_water",a.target.checked)}),"Su"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:n.has_gas,onChange:a=>t("has_gas",a.target.checked)}),"Doğalgaz"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:n.has_internet,onChange:a=>t("has_internet",a.target.checked)}),"İnternet"]})]})]})}),e.jsx(j,{title:"Ek Bilgiler",isExpanded:_.additional,onToggle:()=>f("additional"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Özel İhtiyaçlar",children:e.jsx("textarea",{value:n.special_needs,onChange:a=>t("special_needs",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Özel ihtiyaçlar, dikkat edilmesi gereken durumlar",rows:2})})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:n.previous_aid_received,onChange:a=>t("previous_aid_received",a.target.checked)}),"Daha önce yardım alındı"]})}),n.previous_aid_received&&e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Önceki Yardım Detayları",children:e.jsx("textarea",{value:n.previous_aid_details,onChange:a=>t("previous_aid_details",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Hangi kuruluştan, ne tür yardım alındı",rows:2})})}),e.jsx(i,{label:"Doğrulama Durumu",children:e.jsxs("select",{value:n.verification_status,onChange:a=>t("verification_status",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"verified",children:"Doğrulandı"}),e.jsx("option",{value:"rejected",children:"Reddedildi"}),e.jsx("option",{value:"needs_review",children:"İnceleme Gerekli"})]})}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(i,{label:"Notlar",children:e.jsx("textarea",{value:n.notes,onChange:a=>t("notes",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Ek notlar, açıklamalar",rows:3})})})]})}),e.jsx(j,{title:"Sistem Alanları",isExpanded:_.system,onToggle:()=>f("system"),children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(i,{label:"Fon Bölgesi",children:e.jsxs("select",{value:n.fund_region,onChange:a=>t("fund_region",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"Genel",children:"Genel"}),e.jsx("option",{value:"Özel",children:"Özel"}),e.jsx("option",{value:"Acil",children:"Acil"})]})}),e.jsx(i,{label:"Dosya Bağlantısı",children:e.jsxs("select",{value:n.file_connection,onChange:a=>t("file_connection",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"Partner Kurum",children:"Partner Kurum"}),e.jsx("option",{value:"Doğrudan Başvuru",children:"Doğrudan Başvuru"}),e.jsx("option",{value:"Sevk",children:"Sevk"})]})}),e.jsx(i,{label:"Dosya Numarası",children:e.jsx("input",{value:n.file_number,onChange:a=>t("file_number",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Dosya numarası"})}),e.jsx(i,{label:"Durum",children:e.jsxs("select",{value:n.status,onChange:a=>t("status",a.target.value),className:"w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Pasif"}),e.jsx("option",{value:"suspended",children:"Geçici"})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{onClick:()=>{D(!1),M()},className:"px-4 py-2 border rounded hover:bg-gray-50",disabled:b,children:"İptal"}),e.jsx("button",{onClick:he,disabled:b,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50",children:b?"Kaydediliyor...":"Kaydet"})]})]})}),e.jsx(X,{isOpen:ne,onClose:()=>{F(!1),P()},title:"Geçici Kayıt",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Geçici Kayıt:"})," Sadece temel bilgiler alınır. Detaylar daha sonra tamamlanabilir."]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(i,{label:"Ad *",children:e.jsx("input",{value:x.name,onChange:a=>U("name",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Ad"})}),e.jsx(i,{label:"Soyad *",children:e.jsx("input",{value:x.surname,onChange:a=>U("surname",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Soyad"})}),e.jsx(i,{label:"Kimlik No *",children:e.jsx("input",{value:x.identity_no,onChange:a=>U("identity_no",a.target.value),className:"w-full rounded border px-2 py-1",placeholder:"11 haneli kimlik numarası"})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{onClick:()=>{F(!1),P()},className:"px-4 py-2 border rounded hover:bg-gray-50",disabled:b,children:"İptal"}),e.jsx("button",{onClick:pe,disabled:b,className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 disabled:opacity-50",children:b?"Kaydediliyor...":"Geçici Kaydet"})]})]})}),e.jsx(Ee,{isOpen:le,onClose:()=>G(!1),onScanSuccess:me}),e.jsx(Fe,{isOpen:ie,onClose:()=>Y(!1),onApplyFilters:xe,onSaveFilter:be,onLoadFilter:ve,pageType:"beneficiaries",fields:I.fields,dependencies:I.dependencies,groups:I.groups,validationRules:I.validationRules,urlConfig:de,savedFiltersConfig:ce,quickFilters:ue,savedFilters:se,initialFilters:v})]})}function i({label:p,children:C}){return e.jsxs("label",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:p}),C]})}export{Xe as default};
