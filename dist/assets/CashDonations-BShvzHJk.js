import{r as o,j as e,e as C,S as B,F as z,g as h}from"./index-JhQGfP3r.js";import{D as P}from"./DataTable-ZpmiLouZ.js";import{M as Y}from"./Modal-Ul9aPZYl.js";import{e as $}from"./exportToCsv-CTUkvpR5.js";import{L as R}from"./LazyCameraScanner-DfxkbHju.js";import{e as A,a as E}from"./pdfExport-BxB3yxD7.js";import{T as F,M as K,D as M}from"./DonationCard-DdmWy8II.js";import{F as O}from"./jspdf.plugin.autotable-Cb0Hj5Ka.js";import{C as G}from"./camera-Bv77Xj_6.js";import"./useSwipeGestures-Tf7Alyqm.js";import"./trending-down-mje6Xvoe.js";const U=[{id:"1",date:"2024-01-15",donorName:"Ahmet Yılmaz",donorPhone:"0532 123 4567",amount:1e3,currency:"TRY",purpose:"Genel Bağış",receiptNo:"NAK-2024-001",receivedBy:"Fatma Demir",notes:"Nakit olarak teslim alındı",status:"onaylandı"},{id:"2",date:"2024-01-14",donorName:"Zeynep Kaya",donorPhone:"0543 987 6543",amount:500,currency:"TRY",purpose:"Eğitim Yardımı",receiptNo:"NAK-2024-002",receivedBy:"Mehmet Özkan",status:"onaylandı"}];function ee(){const[l,c]=o.useState(U),[u,b]=o.useState(""),[g,i]=o.useState(!1),[d,m]=o.useState(null),[a,s]=o.useState({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),[x,p]=o.useState(!1),t=o.useMemo(()=>l.filter(r=>JSON.stringify(r).toLowerCase().includes(u.toLowerCase())),[l,u]),f=t.reduce((r,n)=>r+n.amount,0),y=t.filter(r=>{const n=new Date(r.date),T=new Date;return n.toDateString()===T.toDateString()}).reduce((r,n)=>r+n.amount,0),N=[{key:"date",header:"Tarih"},{key:"receiptNo",header:"Fiş No"},{key:"donorName",header:"Bağışçı Adı"},{key:"donorPhone",header:"Telefon"},{key:"amount",header:"Tutar",render:(r,n)=>`${n.amount.toLocaleString("tr-TR")} ${n.currency}`},{key:"purpose",header:"Amaç"},{key:"receivedBy",header:"Teslim Alan"},{key:"status",header:"Durum",render:(r,n)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs ${n.status==="onaylandı"?"bg-green-100 text-green-800":n.status==="beklemede"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.status})},{key:"id",header:"İşlemler",render:(r,n)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(n),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),e.jsx("button",{onClick:()=>k(n),className:"text-green-600 hover:text-green-800 text-sm",children:"Yazdır"}),e.jsx("button",{onClick:()=>v(n.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],j=r=>{m(r),s({donorName:r.donorName,donorPhone:r.donorPhone,amount:r.amount.toString(),currency:r.currency,purpose:r.purpose,notes:r.notes||""}),i(!0)},v=r=>{confirm("Bu nakit bağışı silmek istediğinizden emin misiniz?")&&c(l.filter(n=>n.id!==r))},k=r=>{alert(`${r.receiptNo} numaralı makbuz yazdırılıyor...`)},D=r=>{if(r.preventDefault(),d)c(l.map(n=>n.id===d.id?{...n,...a,amount:parseFloat(a.amount)}:n));else{const n={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],...a,amount:parseFloat(a.amount),receiptNo:`NAK-${new Date().getFullYear()}-${String(l.length+1).padStart(3,"0")}`,receivedBy:"Sistem Kullanıcısı",status:"onaylandı"};c([...l,n])}i(!1),m(null),s({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""})},w=r=>{r&&(r.donorName!=null&&s(n=>({...n,donorName:r.donorName??n.donorName})),r.donorPhone!=null&&s(n=>({...n,donorPhone:r.donorPhone??n.donorPhone})),r.amount!=null&&s(n=>({...n,amount:(r.amount??Number(n.amount||0)).toString()})),r.currency!=null&&s(n=>({...n,currency:["TRY","USD","EUR"].includes(r.currency)?r.currency:n.currency})),r.purpose!=null&&s(n=>({...n,purpose:r.purpose??n.purpose})),r.notes!=null&&s(n=>({...n,notes:r.notes??n.notes})),r.firstName&&r.lastName&&s(n=>({...n,donorName:`${r.firstName} ${r.lastName}`})),r.phone&&s(n=>({...n,donorPhone:r.phone||""})),r.idNumber&&s(n=>({...n,notes:n.notes?`${n.notes} | TC: ${r.idNumber}`:`TC: ${r.idNumber}`})),r.passportNumber&&s(n=>({...n,notes:n.notes?`${n.notes} | Pasaport: ${r.passportNumber}`:`Pasaport: ${r.passportNumber}`})),r.address&&s(n=>({...n,notes:n.notes?`${n.notes} | Adres: ${r.address}`:`Adres: ${r.address}`})),r.birthDate&&s(n=>({...n,notes:n.notes?`${n.notes} | Doğum: ${r.birthDate}`:`Doğum: ${r.birthDate}`})),p(!1))},S=()=>{m(null),s({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),i(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nakit Bağışlar"}),e.jsx("p",{className:"text-gray-600",children:"Nakit bağış işlemlerini yönetin ve takip edin"})]}),e.jsxs("button",{onClick:S,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(C,{className:"w-5 h-5"}),"Yeni Nakit Bağış"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(F,{title:"Toplam Bağış",value:f,change:12,changeType:"increase",period:"Bu Ay",trend:[45,52,48,61,55,67,73]}),e.jsx(K,{title:"Bugünkü Bağışlar",value:y,change:8,changeType:"increase",period:"Bugün",trend:[32,38,35,42,39,45,48]}),e.jsx(M,{title:"Benzersiz Bağışçı",value:new Set(t.map(r=>r.donorName)).size,change:15,changeType:"increase",period:"Benzersiz Bağışçı",trend:[12,15,13,18,16,21,24]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{value:u,onChange:r=>b(r.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Bağışçı adı, telefon, fiş no ile ara..."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsxs("select",{className:"pl-10 pr-8 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white min-w-[140px]",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"onaylandı",children:"Onaylandı"}),e.jsx("option",{value:"beklemede",children:"Beklemede"}),e.jsx("option",{value:"iptal",children:"İptal"})]})]}),e.jsx("input",{type:"date",className:"px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Başlangıç Tarihi"}),e.jsx("input",{type:"date",className:"px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Bitiş Tarihi"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>$("cash-donations.csv",t),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 flex items-center gap-2 transition-colors duration-200",children:[e.jsx(h,{size:16}),"CSV İndir"]}),e.jsxs("button",{onClick:()=>A(t,{}),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors duration-200",children:[e.jsx(O,{size:16}),"Excel İndir"]}),e.jsxs("button",{onClick:()=>E(t,{}),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2 transition-colors duration-200",children:[e.jsx(h,{size:16}),"PDF İndir"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx(P,{columns:N,data:t})})]}),e.jsx(Y,{isOpen:g,onClose:()=>i(!1),title:d?"Nakit Bağış Düzenle":"Yeni Nakit Bağış",children:e.jsxs("div",{className:"p-4",children:[!x&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>p(!0),className:"flex items-center gap-2 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[e.jsx(G,{size:16}),"Kamera Tara"]})}),x&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded mb-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Kamera Tarama Aktif"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex items-center gap-2 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Kapat"})]}),e.jsx(R,{onScanResult:w,onError:r=>console.error("Tarama hatası:",r)})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),e.jsx("input",{type:"text",value:a.donorName,onChange:r=>s({...a,donorName:r.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:a.donorPhone,onChange:r=>s({...a,donorPhone:r.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),e.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:r=>s({...a,amount:r.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),e.jsxs("select",{value:a.currency,onChange:r=>s({...a,currency:r.target.value}),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),e.jsxs("select",{value:a.purpose,onChange:r=>s({...a,purpose:r.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),e.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),e.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),e.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),e.jsx("option",{value:"Kurban",children:"Kurban"}),e.jsx("option",{value:"Ramazan",children:"Ramazan"}),e.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),e.jsx("textarea",{value:a.notes,onChange:r=>s({...a,notes:r.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Ek bilgiler..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"Güncelle":"Kaydet"})]})]})]})})]})}export{ee as default};
