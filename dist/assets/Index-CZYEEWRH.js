import{r as d,j as e,U as ee,X as Q,S as ne,ak as me,aw as N,b as le,C as b,c,k as H,q as R,$ as B,i as q,a4 as W,t as ue,g as xe,I as te,s as se,b6 as I,b7 as Y,p as ae,w as he,e as V,F as pe}from"./index-JhQGfP3r.js";import{u as ge,t as je,o as fe,a as ye,s as F,e as Ne,l as be}from"./types-DpNt5E6n.js";import{u as we}from"./useUserManagement-DYDp8Nlo.js";import{V as $}from"./video-BO520JC0.js";import{V as M}from"./index-BJu9RWF7.js";import{P as ve}from"./pen-square-BZRlDdvk.js";import{X as _e}from"./x-circle-DAY1fQC3.js";import{E as ke}from"./eye-Bcuk08KK.js";function Se({selectedUserIds:s,onSelectionChange:a,placeholder:n="Kullanıcı ara...",excludeUserIds:o=[],maxSelections:u,className:i=""}){const[p,S]=d.useState(""),[E,m]=d.useState(!1),{users:j,isLoading:w,search:z}=we();d.useEffect(()=>{p.trim()&&z.setSearchQuery(p)},[p,z]);const x=j.filter(r=>{var g,k;return p.trim()?!o.includes(r.id)&&(((g=r.full_name)==null?void 0:g.toLowerCase().includes(p.toLowerCase()))||((k=r.email)==null?void 0:k.toLowerCase().includes(p.toLowerCase()))):!1}),f=j.filter(r=>s.includes(r.id)),A=r=>{s.includes(r)?a(s.filter(g=>g!==r)):(!u||s.length<u)&&a([...s,r])},D=r=>{a(s.filter(g=>g!==r))};return e.jsxs("div",{className:`relative ${i}`,children:[f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:f.map(r=>e.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:r.full_name||r.email}),e.jsx("button",{type:"button",onClick:()=>D(r.id),className:"hover:bg-blue-200 rounded p-0.5",children:e.jsx(Q,{className:"h-3 w-3"})})]},r.id))}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:r=>S(r.target.value),onFocus:()=>m(!0),onBlur:()=>setTimeout(()=>m(!1),200),placeholder:n,className:"w-full pl-10 pr-4 py-2 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"})]}),E&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[w&&e.jsxs("div",{className:"p-3 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mx-auto"}),e.jsx("span",{className:"ml-2",children:"Aranıyor..."})]}),!w&&x.length===0&&p&&e.jsx("div",{className:"p-3 text-center text-gray-500",children:"Kullanıcı bulunamadı"}),!w&&x.length===0&&!p&&e.jsx("div",{className:"p-3 text-center text-gray-500",children:"Aramaya başlamak için yazın"}),!w&&x.map(r=>{const g=s.includes(r.id),k=!!(u&&!g&&s.length>=u);return e.jsxs("button",{type:"button",onClick:()=>!k&&A(r.id),disabled:k,className:`w-full flex items-center gap-3 p-3 text-left hover:bg-gray-50 transition-colors ${g?"bg-blue-50 text-blue-700":""} ${k?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:r.avatar_url?e.jsx("img",{src:r.avatar_url,alt:r.full_name||r.email,className:"h-8 w-8 rounded-full object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(ee,{className:"h-4 w-4 text-gray-500"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:r.full_name||"İsimsiz Kullanıcı"}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:r.email})]}),g&&e.jsx(me,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]},r.id)})]})]}),u&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.length," / ",u," kullanıcı seçildi"]})]})}const y=(s,a)=>{console.error(`${a}:`,s);const n=(s==null?void 0:s.message)||`Error in ${a}`;throw N.error(n),new Error(n)},_={async getMeetings(){try{return[{id:"1",title:"Aylık Genel Kurul Toplantısı",description:"Dernek faaliyetlerinin değerlendirildiği aylık toplantı",start_date:new Date(Date.now()+1728e5).toISOString(),end_date:new Date(Date.now()+1728e5+72e5).toISOString(),location:"Dernek Merkezi - Konferans Salonu",meeting_type:"physical",status:"scheduled",created_by:"user1",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",title:"Bütçe Planlama Toplantısı",description:"2024 yılı bütçe planlama ve değerlendirme toplantısı",start_date:new Date(Date.now()+432e6).toISOString(),end_date:new Date(Date.now()+432e6+108e5).toISOString(),meeting_type:"online",meeting_url:"https://meet.google.com/abc-def-ghi",status:"scheduled",created_by:"user2",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",title:"Proje Koordinasyon Toplantısı",description:"Devam eden projelerin koordinasyonu",start_date:new Date(Date.now()-864e5).toISOString(),end_date:new Date(Date.now()-864e5+54e5).toISOString(),location:"Zoom Toplantısı",meeting_type:"hybrid",meeting_url:"https://zoom.us/j/123456789",status:"completed",created_by:"user3",created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:new Date().toISOString()}]}catch(s){return y(s,"getMeetings"),[]}},async getMeeting(s){try{return(await this.getMeetings()).find(n=>n.id===s)||null}catch(a){return y(a,"getMeeting"),null}},async createMeeting(s){try{const a={id:`meeting_${Date.now()}`,title:s.title,description:s.description,start_date:s.start_date,end_date:s.end_date,location:s.location,meeting_type:s.meeting_type,meeting_url:s.meeting_url,status:"scheduled",created_by:"current_user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return N.success("Toplantı başarıyla oluşturuldu"),a}catch(a){throw y(a,"createMeeting"),a}},async updateMeeting(s,a){try{const o=(await this.getMeetings()).find(i=>i.id===s);if(!o)throw new Error("Toplantı bulunamadı");const u={...o,...a,updated_at:new Date().toISOString()};return N.success("Toplantı başarıyla güncellendi"),u}catch(n){throw y(n,"updateMeeting"),n}},async deleteMeeting(s){try{N.success("Toplantı başarıyla silindi")}catch(a){throw y(a,"deleteMeeting"),a}},async getAttendees(s){try{return[{id:"1",meeting_id:s,user_id:"user1",status:"accepted",response_date:new Date().toISOString(),notes:"Katılacağım"},{id:"2",meeting_id:s,user_id:"user2",status:"invited",notes:""},{id:"3",meeting_id:s,user_id:"user3",status:"declined",response_date:new Date(Date.now()-864e5).toISOString(),notes:"Başka bir toplantım var"}]}catch(a){return y(a,"getAttendees"),[]}},async addAttendee(s,a){try{const n={id:`attendee_${Date.now()}`,meeting_id:s,user_id:a,status:"invited"};return N.success("Katılımcı eklendi"),n}catch(n){throw y(n,"addAttendee"),n}},async updateAttendeeStatus(s,a,n){try{N.success("Katılım durumu güncellendi")}catch(o){throw y(o,"updateAttendeeStatus"),o}},async getAgenda(s){try{return[{id:"1",meeting_id:s,title:"Açılış ve Katılımcı Tanıtımı",description:"Toplantının açılışı ve katılımcıların tanıtımı",duration_minutes:15,order_index:1,presenter_id:"user1"},{id:"2",meeting_id:s,title:"Geçen Ay Faaliyetlerinin Değerlendirilmesi",description:"Önceki dönem faaliyetlerinin detaylı incelenmesi",duration_minutes:30,order_index:2,presenter_id:"user2"},{id:"3",meeting_id:s,title:"Yeni Projeler ve Öneri Sunumları",description:"Gelecek dönem için planlanan projeler",duration_minutes:45,order_index:3,presenter_id:"user3"}].sort((n,o)=>n.order_index-o.order_index)}catch(a){return y(a,"getAgenda"),[]}},async addAgendaItem(s){try{const a={id:`agenda_${Date.now()}`,...s};return N.success("Gündem maddesi eklendi"),a}catch(a){throw y(a,"addAgendaItem"),a}},async updateAgendaItem(s,a){try{N.success("Gündem maddesi güncellendi")}catch(n){throw y(n,"updateAgendaItem"),n}},async deleteAgendaItem(s){try{N.success("Gündem maddesi silindi")}catch(a){throw y(a,"deleteAgendaItem"),a}},async getMinutes(s){try{return[{id:"1",meeting_id:s,content:"Toplantı saat 14:00'da başladı. Tüm katılımcılar mevcut.",created_by:"user1",created_at:new Date().toISOString()}]}catch(a){return y(a,"getMinutes"),[]}},async addMinutes(s,a){try{const n={id:`minutes_${Date.now()}`,meeting_id:s,content:a,created_by:"current_user",created_at:new Date().toISOString()};return N.success("Tutanak eklendi"),n}catch(n){throw y(n,"addMinutes"),n}},async getActionItems(s){try{return[{id:"1",meeting_id:s,title:"Bütçe raporu hazırlama",description:"Bir sonraki toplantı için detaylı bütçe raporu hazırlanacak",assigned_to:"user2",due_date:new Date(Date.now()+6048e5).toISOString(),status:"pending",created_at:new Date().toISOString()},{id:"2",meeting_id:s,title:"Proje önerilerini gözden geçirme",description:"Sunulan proje önerilerinin teknik değerlendirmesi",assigned_to:"user3",due_date:new Date(Date.now()+2592e5).toISOString(),status:"in_progress",created_at:new Date().toISOString()}]}catch(a){return y(a,"getActionItems"),[]}},async addActionItem(s){try{const a={id:`action_${Date.now()}`,...s,created_at:new Date().toISOString()};return N.success("Eylem maddesi eklendi"),a}catch(a){throw y(a,"addActionItem"),a}},async updateActionItemStatus(s,a){try{N.success("Eylem durumu güncellendi")}catch(n){throw y(n,"updateActionItemStatus"),n}}},Te=fe({title:F().min(1,"Toplantı başlığı zorunludur"),description:F().optional(),start_date:F().min(1,"Başlangıç tarihi zorunludur"),end_date:F().min(1,"Bitiş tarihi zorunludur"),location:F().optional(),meeting_type:Ne(["physical","online","hybrid"]),meeting_url:F().url("Geçerli bir URL giriniz").optional().or(be("")),attendees:ye(F()).optional()}).refine(s=>{const a=new Date(s.start_date);return new Date(s.end_date)>a},{message:"Bitiş tarihi başlangıç tarihinden sonra olmalıdır",path:["end_date"]});function Me({onSuccess:s,onCancel:a,initialData:n,isEditMode:o=!1,meetingId:u}){const[i,p]=d.useState(!1),[S,E]=d.useState((n==null?void 0:n.attendee_ids)||[]),{user:m}=le(),{register:j,handleSubmit:w,watch:z,formState:{errors:x}}=ge({resolver:je(Te),defaultValues:{title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",start_date:n!=null&&n.start_date?new Date(n.start_date).toISOString().slice(0,16):"",end_date:n!=null&&n.end_date?new Date(n.end_date).toISOString().slice(0,16):"",location:(n==null?void 0:n.location)||"",meeting_type:(n==null?void 0:n.meeting_type)||"physical",meeting_url:(n==null?void 0:n.meeting_url)||"",attendees:S}}),f=z("meeting_type"),A=async r=>{p(!0);try{const g={title:r.title,description:r.description,start_date:new Date(r.start_date).toISOString(),end_date:new Date(r.end_date).toISOString(),location:r.location,meeting_type:r.meeting_type,meeting_url:r.meeting_url,status:"scheduled",created_by:(m==null?void 0:m.id)||"",attendee_ids:S};o&&u?(await _.updateMeeting(u,g),N.success("Toplantı güncellendi")):(await _.createMeeting(g),N.success("Toplantı oluşturuldu")),s==null||s()}catch(g){console.error("Meeting operation failed:",g),N.error(o?"Toplantı güncellenirken hata oluştu":"Toplantı oluşturulurken hata oluştu")}finally{p(!1)}},D=r=>{E(r)};return e.jsxs(b,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:o?"Toplantı Düzenle":"Yeni Toplantı Oluştur"}),a&&e.jsx(c,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:w(A),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Toplantı Başlığı *"}),e.jsx("input",{...j("title"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı başlığını giriniz"}),x.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Açıklama"}),e.jsx("textarea",{...j("description"),rows:3,className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı açıklamasını giriniz"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium mb-2",children:[e.jsx(H,{className:"h-4 w-4 inline mr-2"}),"Başlangıç Tarihi *"]}),e.jsx("input",{...j("start_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),x.start_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.start_date.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium mb-2",children:[e.jsx(R,{className:"h-4 w-4 inline mr-2"}),"Bitiş Tarihi *"]}),e.jsx("input",{...j("end_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),x.end_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.end_date.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meeting_type",className:"block text-sm font-medium mb-2",children:"Toplantı Türü *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...j("meeting_type"),type:"radio",value:"physical",className:"mr-2"}),e.jsx(B,{className:"h-4 w-4 mr-2 text-green-500"}),e.jsx("span",{children:"Fiziksel"})]}),e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...j("meeting_type"),type:"radio",value:"online",className:"mr-2"}),e.jsx($,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{children:"Online"})]}),e.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[e.jsx("input",{...j("meeting_type"),type:"radio",value:"hybrid",className:"mr-2"}),e.jsx(B,{className:"h-4 w-4 mr-1 text-green-500"}),e.jsx($,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{children:"Hibrit"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-2",children:f==="online"?"Toplantı Linki":"Konum"}),f==="online"?e.jsx("input",{...j("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"https://zoom.us/j/123456789"}):e.jsx("input",{...j("location"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı konumunu giriniz"}),f==="hybrid"&&e.jsx("div",{className:"mt-2",children:e.jsx("input",{...j("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Online katılım linki (opsiyonel)"})}),x.meeting_url&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.meeting_url.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.jsx(q,{className:"h-4 w-4 inline mr-2"}),"Katılımcılar"]}),e.jsx(Se,{selectedUserIds:S,onSelectionChange:D,placeholder:"Katılımcı ara ve seç...",excludeUserIds:m!=null&&m.id?[m.id]:[]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[a&&e.jsx(c,{type:"button",variant:"outline",onClick:a,children:"İptal"}),e.jsxs(c,{type:"submit",disabled:i,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),i?"Kaydediliyor...":o?"Güncelle":"Oluştur"]})]})]})]})}function Ae({meetingId:s,isOpen:a,onClose:n,onEdit:o,onDelete:u}){const[i,p]=d.useState(null),[S,E]=d.useState([]),[m,j]=d.useState([]),[w,z]=d.useState([]),[x,f]=d.useState([]),[A,D]=d.useState(!1),[r,g]=d.useState("details"),[k,P]=d.useState(""),[L,O]=d.useState(!1),[l,v]=d.useState({title:"",description:"",assigned_to:"",due_date:""}),[T,C]=d.useState(!1),{user:U}=le(),re=!0;d.useEffect(()=>{a&&s&&Z()},[a,s]);const Z=async()=>{D(!0);try{const[t,h,K,G,oe]=await Promise.all([_.getMeeting(s),_.getAttendees(s),_.getAgenda(s),_.getMinutes(s),_.getActionItems(s)]);p(t),E(h),j(K),z(G),f(oe)}catch(t){console.error("Failed to fetch meeting details:",t),M.error("Toplantı bilgileri yüklenirken hata oluştu")}finally{D(!1)}},X=async t=>{if(!(!i||!U))try{await _.updateAttendeeStatus("temp_id",t),M.success("Katılım durumunuz güncellendi"),Z()}catch(h){console.error("Failed to update attendance:",h),M.error("Katılım durumu güncellenirken hata oluştu")}},ie=async()=>{if(i&&window.confirm("Bu toplantıyı silmek istediğinizden emin misiniz?"))try{await _.deleteMeeting(s),M.success("Toplantı silindi"),u==null||u(s),n()}catch(t){console.error("Failed to delete meeting:",t),M.error("Toplantı silinirken hata oluştu")}},de=async()=>{if(k.trim())try{const t=await _.addMinutes(s,k);z(h=>[...h,t]),P(""),O(!1),M.success("Tutanak eklendi")}catch(t){console.error("Failed to add minutes:",t),M.error("Tutanak eklenirken hata oluştu")}},ce=async()=>{if(!(!l.title.trim()||!l.assigned_to))try{const t={meeting_id:s,title:l.title,description:l.description||void 0,assigned_to:l.assigned_to,due_date:l.due_date||void 0,status:"pending"},h=await _.addActionItem(t);f(K=>[...K,h]),v({title:"",description:"",assigned_to:"",due_date:""}),C(!1),M.success("Eylem maddesi eklendi")}catch(t){console.error("Failed to add action item:",t),M.error("Eylem maddesi eklenirken hata oluştu")}},J=async(t,h)=>{try{await _.updateActionItemStatus(t,h),f(K=>K.map(G=>G.id===t?{...G,status:h}:G))}catch(K){console.error("Failed to update action status:",K),M.error("Eylem durumu güncellenirken hata oluştu")}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Toplantı Detayları"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i&&re&&e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>o==null?void 0:o(i),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),e.jsxs(c,{size:"sm",variant:"outline",onClick:ie,className:"text-red-600 hover:text-red-700",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Sil"]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(Q,{className:"h-4 w-4"})})]})]}),A?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Yükleniyor..."})]}):i?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:[{id:"details",label:"Detaylar",icon:xe},{id:"attendees",label:"Katılımcılar",icon:q,count:S.length},{id:"agenda",label:"Gündem",icon:H,count:m.length},{id:"minutes",label:"Tutanak",icon:te,count:w.length},{id:"actions",label:"Eylemler",icon:se,count:x.length}].map(t=>e.jsxs("button",{onClick:()=>g(t.id),className:`flex items-center px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${r===t.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[e.jsx(t.icon,{className:"h-4 w-4 mr-2"}),t.label,t.count!==void 0&&e.jsx("span",{className:"ml-2 bg-muted text-muted-foreground text-xs px-2 py-1 rounded-full",children:t.count})]},t.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[r==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:i.title}),i.description&&e.jsx("p",{className:"text-muted-foreground mb-4",children:i.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:I(new Date(i.start_date),"dd MMMM yyyy",{locale:Y})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[I(new Date(i.start_date),"HH:mm")," - ",I(new Date(i.end_date),"HH:mm")]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i.meeting_type==="online"?e.jsx($,{className:"h-4 w-4 text-blue-500"}):i.meeting_type==="hybrid"?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 text-green-500"}),e.jsx($,{className:"h-4 w-4 text-blue-500"})]}):e.jsx(B,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"capitalize",children:i.meeting_type==="physical"?"Fiziksel":i.meeting_type==="online"?"Online":"Hibrit"})]}),i.location&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:i.location})]})]}),i.meeting_url&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:i.meeting_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 underline",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Toplantıya Katıl"]})}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i.status==="scheduled"?"bg-blue-100 text-blue-800":i.status==="ongoing"?"bg-green-100 text-green-800":i.status==="completed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:i.status==="scheduled"?"Planlandı":i.status==="ongoing"?"Devam Ediyor":i.status==="completed"?"Tamamlandı":"İptal Edildi"})})]}),i.status==="scheduled"&&e.jsxs(b,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Katılım Durumunuz"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>X("accepted"),className:"text-green-600 hover:text-green-700",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Katılacağım"]}),e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>X("declined"),className:"text-red-600 hover:text-red-700",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Katılamayacağım"]}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>X("maybe"),children:"Belki"})]})]})]}),r==="attendees"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Katılımcılar (",S.length,")"]}),e.jsxs(c,{size:"sm",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Katılımcı Ekle"]})]}),e.jsx("div",{className:"grid gap-3",children:S.map(t=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"U"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Kullanıcı ",t.user_id]}),t.notes&&e.jsx("div",{className:"text-sm text-muted-foreground",children:t.notes}),t.response_date&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Yanıt: ",I(new Date(t.response_date),"dd MMM HH:mm",{locale:Y})]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.status==="accepted"?"bg-green-100 text-green-800":t.status==="declined"?"bg-red-100 text-red-800":t.status==="maybe"?"bg-yellow-100 text-yellow-800":t.status==="attended"?"bg-blue-100 text-blue-800":(t.status==="absent","bg-gray-100 text-gray-800")}`,children:t.status==="accepted"?"Kabul Etti":t.status==="declined"?"Reddetti":t.status==="maybe"?"Belki":t.status==="attended"?"Katıldı":t.status==="absent"?"Katılmadı":"Davet Edildi"})]})},t.id))})]}),r==="agenda"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Gündem (",m.length," madde)"]}),e.jsxs(c,{size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Gündem Ekle"]})]}),m.length>0?e.jsx("div",{className:"space-y-3",children:m.map((t,h)=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium",children:h+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-lg",children:t.title}),t.description&&e.jsx("p",{className:"text-muted-foreground mt-2",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[t.duration_minutes&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),t.duration_minutes," dakika"]}),t.presenter_id&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Sunan: Kullanıcı ",t.presenter_id]})]})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(H,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz gündem maddesi eklenmemiş"})]})]}),r==="minutes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Toplantı Tutanağı"}),!L&&e.jsxs(c,{size:"sm",onClick:()=>O(!0),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Tutanak Ekle"]})]}),L&&e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:k,onChange:t=>P(t.target.value),placeholder:"Tutanak metni...",className:"w-full h-32 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(c,{size:"sm",onClick:de,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{O(!1),P("")},children:"İptal"})]})]})}),w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(t=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:I(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:Y})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Yazan: Kullanıcı ",t.created_by]})]}),e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:t.content})]})},t.id))}):!L&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(te,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz tutanak eklenmemiş"})]})]}),r==="actions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Eylem Maddeleri"}),!T&&e.jsxs(c,{size:"sm",onClick:()=>C(!0),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Eylem Ekle"]})]}),T&&e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:l.title,onChange:t=>v(h=>({...h,title:t.target.value})),placeholder:"Eylem başlığı...",className:"w-full p-3 border rounded-md"}),e.jsx("textarea",{value:l.description,onChange:t=>v(h=>({...h,description:t.target.value})),placeholder:"Açıklama...",className:"w-full h-20 p-3 border rounded-md resize-none"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:l.assigned_to,onChange:t=>v(h=>({...h,assigned_to:t.target.value})),placeholder:"Atanan kişi ID...",className:"p-3 border rounded-md"}),e.jsx("input",{type:"date",value:l.due_date,onChange:t=>v(h=>({...h,due_date:t.target.value})),className:"p-3 border rounded-md"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(c,{size:"sm",onClick:ce,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{C(!1),v({title:"",description:"",assigned_to:"",due_date:""})},children:"İptal"})]})]})}),x.length>0?e.jsx("div",{className:"space-y-3",children:x.map(t=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="in_progress"?"bg-blue-100 text-blue-800":t.status==="cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:t.status==="completed"?"Tamamlandı":t.status==="in_progress"?"Devam Ediyor":t.status==="cancelled"?"İptal Edildi":"Bekliyor"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Atanan: Kullanıcı ",t.assigned_to]}),t.due_date&&e.jsxs("span",{children:["Son Tarih: ",I(new Date(t.due_date),"dd MMM yyyy",{locale:Y})]})]}),t.status!=="completed"&&e.jsxs("div",{className:"flex space-x-1",children:[t.status==="pending"&&e.jsx(c,{size:"sm",variant:"outline",onClick:()=>J(t.id,"in_progress"),children:"Başlat"}),e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>J(t.id,"completed"),className:"text-green-600 hover:text-green-700",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"Tamamla"]})]})]})]})},t.id))}):!T&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(se,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz eylem maddesi eklenmemiş"})]})]})]})]}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Toplantı bulunamadı"})]})}):null}function He(){const[s,a]=d.useState([]),[n,o]=d.useState(!0),[u,i]=d.useState(""),[p,S]=d.useState("all"),[E,m]=d.useState(!1),[j,w]=d.useState(null),[z,x]=d.useState(!1),[f,A]=d.useState(null);d.useEffect(()=>{D()},[]);const D=async()=>{o(!0);try{const l=await _.getMeetings();a(l)}catch(l){console.error("Failed to fetch meetings:",l),M.error("Toplantılar yüklenirken hata oluştu")}finally{o(!1)}},r=()=>{m(!1),A(null),D()},g=l=>{A(l),m(!0),x(!1)},k=l=>{a(v=>v.filter(T=>T.id!==l))},P=l=>{w(l),x(!0)},L=s.filter(l=>{var C;const v=l.title.toLowerCase().includes(u.toLowerCase())||((C=l.description)==null?void 0:C.toLowerCase().includes(u.toLowerCase())),T=p==="all"||l.status===p;return v&&T}),O={total:s.length,thisWeek:s.filter(l=>{const v=new Date(l.start_date),T=new Date,C=new Date(T.setDate(T.getDate()-T.getDay())),U=new Date(C.getTime()+7*24*60*60*1e3);return v>=C&&v<U}).length,ongoing:s.filter(l=>l.status==="ongoing").length,completed:s.filter(l=>l.status==="completed").length};return E?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(c,{variant:"outline",onClick:()=>{m(!1),A(null)},children:"← Geri"}),e.jsx("h1",{className:"text-3xl font-bold",children:f?"Toplantı Düzenle":"Yeni Toplantı"})]}),e.jsx(Me,{onSuccess:r,onCancel:()=>{m(!1),A(null)},initialData:f||void 0,isEditMode:!!f,meetingId:f==null?void 0:f.id})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Toplantılar"}),e.jsx("p",{className:"text-muted-foreground",children:"Toplantı planlama ve yönetimi"})]}),e.jsxs(c,{onClick:()=>m(!0),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Yeni Toplantı"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Toplantı"}),e.jsx("p",{className:"text-2xl font-bold",children:O.total})]}),e.jsx(H,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bu Hafta"}),e.jsx("p",{className:"text-2xl font-bold",children:O.thisWeek})]}),e.jsx(R,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Devam Eden"}),e.jsx("p",{className:"text-2xl font-bold",children:O.ongoing})]}),e.jsx(q,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tamamlanan"}),e.jsx("p",{className:"text-2xl font-bold",children:O.completed})]}),e.jsx(H,{className:"h-8 w-8 text-purple-500"})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Toplantı ara...",value:u,onChange:l=>i(l.target.value),className:"w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:p,onChange:l=>S(l.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"Tüm Durumlar"}),e.jsx("option",{value:"scheduled",children:"Planlandı"}),e.jsx("option",{value:"ongoing",children:"Devam Ediyor"}),e.jsx("option",{value:"completed",children:"Tamamlandı"}),e.jsx("option",{value:"cancelled",children:"İptal Edildi"})]}),e.jsxs(c,{variant:"outline",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Filtreler"]})]})]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Toplantılar yükleniyor..."})]}):e.jsx(b,{className:"overflow-hidden",children:L.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Toplantı"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Tarih & Saat"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Tür & Konum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Durum"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"İşlemler"})]})}),e.jsx("tbody",{children:L.map(l=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.title}),l.description&&e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:l.description})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:I(new Date(l.start_date),"dd MMM yyyy",{locale:Y})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[I(new Date(l.start_date),"HH:mm")," - ",I(new Date(l.end_date),"HH:mm")]})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[l.meeting_type==="online"?e.jsx($,{className:"h-4 w-4 text-blue-500"}):l.meeting_type==="hybrid"?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 text-green-500"}),e.jsx($,{className:"h-4 w-4 text-blue-500"})]}):e.jsx(B,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"capitalize",children:l.meeting_type==="physical"?"Fiziksel":l.meeting_type==="online"?"Online":"Hibrit"}),l.location&&e.jsx("div",{className:"text-sm text-muted-foreground",children:l.location})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="scheduled"?"bg-blue-100 text-blue-800":l.status==="ongoing"?"bg-green-100 text-green-800":l.status==="completed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:l.status==="scheduled"?"Planlandı":l.status==="ongoing"?"Devam Ediyor":l.status==="completed"?"Tamamlandı":"İptal Edildi"})}),e.jsx("td",{className:"p-4",children:e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>P(l),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Detaylar"]})})]},l.id))})]})}):e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:u||p!=="all"?"Arama kriterlerine uygun toplantı bulunamadı":"Henüz toplantı oluşturulmamış"})}),j&&e.jsx(Ae,{meetingId:j.id,isOpen:z,onClose:()=>{x(!1),w(null)},onEdit:g,onDelete:k})]})}export{He as default};
