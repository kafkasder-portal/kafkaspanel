import{r as e,j as r,e as a,S as s,F as n,g as t}from"../assets/index-dW79Uy5k.js";import{D as o}from"./DataTable-Co2fK-v0.js";import{M as l}from"./Modal-BBek2lFh.js";import{e as d}from"./exportToCsv-DLkyd1nM.js";import{L as i}from"./LazyCameraScanner-CZrOjs6-.js";import{e as u,a as c}from"./pdfExport-COs4Ncag.js";import{T as m,M as p,D as x}from"./DonationCard-CmSNBWs-.js";import{F as h}from"./jspdf.plugin.autotable-DPZz52D5.js";import{C as b}from"./camera-Bs1pK9BJ.js";import"./useSwipeGestures--esx3DQ6.js";import"./trending-down-BgaEdcG2.js";const g=[{id:"1",date:"2024-01-15",donorName:"Ahmet Yılmaz",donorPhone:"0532 123 4567",amount:1e3,currency:"TRY",purpose:"Genel Bağış",receiptNo:"NAK-2024-001",receivedBy:"Fatma Demir",notes:"Nakit olarak teslim alındı",status:"onaylandı"},{id:"2",date:"2024-01-14",donorName:"Zeynep Kaya",donorPhone:"0543 987 6543",amount:500,currency:"TRY",purpose:"Eğitim Yardımı",receiptNo:"NAK-2024-002",receivedBy:"Mehmet Özkan",status:"onaylandı"}];function j(){const[j,y]=e.useState(g),[N,f]=e.useState(""),[v,k]=e.useState(!1),[w,S]=e.useState(null),[T,B]=e.useState({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),[D,C]=e.useState(!1),z=e.useMemo(()=>j.filter(e=>JSON.stringify(e).toLowerCase().includes(N.toLowerCase())),[j,N]),Y=z.reduce((e,r)=>e+r.amount,0),P=z.filter(e=>{const r=new Date(e.date),a=new Date;return r.toDateString()===a.toDateString()}).reduce((e,r)=>e+r.amount,0),$=[{key:"date",header:"Tarih"},{key:"receiptNo",header:"Fiş No"},{key:"donorName",header:"Bağışçı Adı"},{key:"donorPhone",header:"Telefon"},{key:"amount",header:"Tutar",render:(e,r)=>`${r.amount.toLocaleString("tr-TR")} ${r.currency}`},{key:"purpose",header:"Amaç"},{key:"receivedBy",header:"Teslim Alan"},{key:"status",header:"Durum",render:(e,a)=>r.jsx("span",{className:"px-2 py-1 rounded text-xs "+("onaylandı"===a.status?"bg-green-100 text-green-800":"beklemede"===a.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:a.status})},{key:"id",header:"İşlemler",render:(e,a)=>r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>R(a),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),r.jsx("button",{onClick:()=>K(a),className:"text-green-600 hover:text-green-800 text-sm",children:"Yazdır"}),r.jsx("button",{onClick:()=>A(a.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],R=e=>{S(e),B({donorName:e.donorName,donorPhone:e.donorPhone,amount:e.amount.toString(),currency:e.currency,purpose:e.purpose,notes:e.notes||""}),k(!0)},A=e=>{confirm("Bu nakit bağışı silmek istediğinizden emin misiniz?")&&y(j.filter(r=>r.id!==e))},K=e=>{alert(`${e.receiptNo} numaralı makbuz yazdırılıyor...`)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-gray-100",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nakit Bağışlar"}),r.jsx("p",{className:"text-gray-600",children:"Nakit bağış işlemlerini yönetin ve takip edin"})]}),r.jsxs("button",{onClick:()=>{S(null),B({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""}),k(!0)},className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[r.jsx(a,{className:"w-5 h-5"}),"Yeni Nakit Bağış"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx(m,{title:"Toplam Bağış",value:Y,change:12,changeType:"increase",period:"Bu Ay",trend:[45,52,48,61,55,67,73]}),r.jsx(p,{title:"Bugünkü Bağışlar",value:P,change:8,changeType:"increase",period:"Bugün",trend:[32,38,35,42,39,45,48]}),r.jsx(x,{title:"Benzersiz Bağışçı",value:new Set(z.map(e=>e.donorName)).size,change:15,changeType:"increase",period:"Benzersiz Bağışçı",trend:[12,15,13,18,16,21,24]})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl mb-8",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{value:N,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Bağışçı adı, telefon, fiş no ile ara..."})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsxs("select",{className:"pl-10 pr-8 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white min-w-[140px]",children:[r.jsx("option",{value:"",children:"Tüm Durumlar"}),r.jsx("option",{value:"onaylandı",children:"Onaylandı"}),r.jsx("option",{value:"beklemede",children:"Beklemede"}),r.jsx("option",{value:"iptal",children:"İptal"})]})]}),r.jsx("input",{type:"date",className:"px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Başlangıç Tarihi"}),r.jsx("input",{type:"date",className:"px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Bitiş Tarihi"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 pt-4 border-t border-gray-200",children:[r.jsxs("button",{onClick:()=>d("cash-donations.csv",z),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 flex items-center gap-2 transition-colors duration-200",children:[r.jsx(t,{size:16}),"CSV İndir"]}),r.jsxs("button",{onClick:()=>u(z,{}),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors duration-200",children:[r.jsx(h,{size:16}),"Excel İndir"]}),r.jsxs("button",{onClick:()=>c(z,{}),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2 transition-colors duration-200",children:[r.jsx(t,{size:16}),"PDF İndir"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsx(o,{columns:$,data:z})})]}),r.jsx(l,{isOpen:v,onClose:()=>k(!1),title:w?"Nakit Bağış Düzenle":"Yeni Nakit Bağış",children:r.jsxs("div",{className:"p-4",children:[!D&&r.jsx("div",{className:"mb-4 flex justify-end",children:r.jsxs("button",{type:"button",onClick:()=>C(!0),className:"flex items-center gap-2 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[r.jsx(b,{size:16}),"Kamera Tara"]})}),D&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded mb-3",children:[r.jsx("span",{className:"text-sm font-medium",children:"Kamera Tarama Aktif"}),r.jsx("button",{type:"button",onClick:()=>C(!1),className:"flex items-center gap-2 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Kapat"})]}),r.jsx(i,{onScanResult:e=>{e&&(null!=e.donorName&&B(r=>({...r,donorName:e.donorName??r.donorName})),null!=e.donorPhone&&B(r=>({...r,donorPhone:e.donorPhone??r.donorPhone})),null!=e.amount&&B(r=>({...r,amount:(e.amount??Number(r.amount||0)).toString()})),null!=e.currency&&B(r=>({...r,currency:["TRY","USD","EUR"].includes(e.currency)?e.currency:r.currency})),null!=e.purpose&&B(r=>({...r,purpose:e.purpose??r.purpose})),null!=e.notes&&B(r=>({...r,notes:e.notes??r.notes})),e.firstName&&e.lastName&&B(r=>({...r,donorName:`${e.firstName} ${e.lastName}`})),e.phone&&B(r=>({...r,donorPhone:e.phone||""})),e.idNumber&&B(r=>({...r,notes:r.notes?`${r.notes} | TC: ${e.idNumber}`:`TC: ${e.idNumber}`})),e.passportNumber&&B(r=>({...r,notes:r.notes?`${r.notes} | Pasaport: ${e.passportNumber}`:`Pasaport: ${e.passportNumber}`})),e.address&&B(r=>({...r,notes:r.notes?`${r.notes} | Adres: ${e.address}`:`Adres: ${e.address}`})),e.birthDate&&B(r=>({...r,notes:r.notes?`${r.notes} | Doğum: ${e.birthDate}`:`Doğum: ${e.birthDate}`})),C(!1))},onError:e=>{}})]}),r.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),w)y(j.map(e=>e.id===w.id?{...e,...T,amount:parseFloat(T.amount)}:e));else{const e={id:Date.now().toString(),date:(new Date).toISOString().split("T")[0],...T,amount:parseFloat(T.amount),receiptNo:`NAK-${(new Date).getFullYear()}-${String(j.length+1).padStart(3,"0")}`,receivedBy:"Sistem Kullanıcısı",status:"onaylandı"};y([...j,e])}k(!1),S(null),B({donorName:"",donorPhone:"",amount:"",currency:"TRY",purpose:"",notes:""})},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),r.jsx("input",{type:"text",value:T.donorName,onChange:e=>B({...T,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),r.jsx("input",{type:"tel",value:T.donorPhone,onChange:e=>B({...T,donorPhone:e.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),r.jsx("input",{type:"number",step:"0.01",value:T.amount,onChange:e=>B({...T,amount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),r.jsxs("select",{value:T.currency,onChange:e=>B({...T,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[r.jsx("option",{value:"TRY",children:"TRY"}),r.jsx("option",{value:"USD",children:"USD"}),r.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),r.jsxs("select",{value:T.purpose,onChange:e=>B({...T,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[r.jsx("option",{value:"",children:"Seçiniz"}),r.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),r.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),r.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),r.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),r.jsx("option",{value:"Kurban",children:"Kurban"}),r.jsx("option",{value:"Ramazan",children:"Ramazan"}),r.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),r.jsx("textarea",{value:T.notes,onChange:e=>B({...T,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Ek bilgiler..."})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:w?"Güncelle":"Kaydet"})]})]})]})})]})}export{j as default};
