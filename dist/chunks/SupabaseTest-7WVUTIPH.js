import{r as e,j as s,V as a}from"../assets/index-C7XW2vnU.js";const t=()=>{const[t,r]=e.useState([]),[c,i]=e.useState(!1),l=e=>{r(s=>[...s,e])};return s.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Supabase Bağlantı Testi"}),s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsx("button",{onClick:async()=>{i(!0),r([]);try{const{data:e,error:s}=await a.from("beneficiaries").select("count").limit(1);l(s?{success:!1,error:s,message:"Beneficiaries tablosuna erişim başarısız"}:{success:!0,data:e,message:"Beneficiaries tablosuna başarıyla bağlandı"})}catch(e){l({success:!1,error:e,message:"Beklenmeyen hata oluştu"})}try{{const{data:{user:e},error:s}=await a.auth.getUser();l(s?{success:!1,error:s,message:"Auth durumu kontrol edilemedi"}:{success:!0,data:e,message:e?`Kullanıcı giriş yapmış: ${e.email}`:"Kullanıcı giriş yapmamış"})}}catch(e){l({success:!1,error:e,message:"Auth kontrolünde hata"})}try{{const e=a.channel("test-channel");e.subscribe(e=>{l({success:"SUBSCRIBED"===e,data:{status:e},message:`Realtime durumu: ${e}`})}),setTimeout(()=>{a.removeChannel(e)},3e3)}}catch(e){l({success:!1,error:e,message:"Realtime bağlantısında hata"})}i(!1)},disabled:c,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:c?"Test Ediliyor...":"Genel Test"}),s.jsx("button",{onClick:async()=>{i(!0);try{const{data:e,error:s}=await a.from("beneficiaries").select("id, name, surname, status, created_at").limit(5);l(s?{success:!1,error:s,message:"Beneficiaries tablosu bulunamadı veya erişim hatası"}:{success:!0,data:e,message:`Beneficiaries tablosundan ${(null==e?void 0:e.length)||0} kayıt getirildi`})}catch(e){l({success:!1,error:e,message:"Beneficiaries tablosu testinde beklenmeyen hata"})}i(!1)},disabled:c,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:"Beneficiaries Tablosu Test"}),s.jsx("button",{onClick:()=>{r([])},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Temizle"})]}),s.jsx("div",{className:"space-y-4",children:t.map((e,a)=>s.jsxs("div",{className:"p-4 rounded-lg border "+(e.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-lg "+(e.success?"text-green-600":"text-red-600"),children:e.success?"✅":"❌"}),s.jsx("span",{className:"font-medium",children:e.message})]}),e.data&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Veri:"}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(e.data,null,2)})]}),e.error&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Hata:"}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(e.error,null,2)})]})]},a))}),0===t.length&&s.jsx("div",{className:"text-center text-gray-500 py-8",children:"Test sonuçları burada görünecek"})]})})};export{t as default};
