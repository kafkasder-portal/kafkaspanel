import{r as e,j as s,y as t,n as a,S as l,F as r,z as i,p as n,k as d,m as c,q as x,o as m}from"../assets/index-C7XW2vnU.js";import{D as o}from"./DataTable-BR_3tqT5.js";import{M as h}from"./Modal-QxY_FyG0.js";import{X as g}from"./x-circle-DtoeMl2Z.js";import{A as p}from"./alert-circle-W3dFygZp.js";import{E as u}from"./eye-Bpapn1fj.js";function j(){const[j,v]=e.useState(""),[N,b]=e.useState("all"),[y,f]=e.useState("all"),[k,w]=e.useState("all"),[S,M]=e.useState(null),[A,D]=e.useState(!1),[C,z]=e.useState(!1),[T]=e.useState([{id:"SMS001",recipient:"Ahmet Yılmaz",phone:"+90 532 123 4567",content:"Merhaba Ahmet, randevunuz yarın saat 14:00'da. Lütfen zamanında gelin.",status:"delivered",sentAt:"2024-01-15 10:30:00",deliveredAt:"2024-01-15 10:30:15",cost:.05,messageLength:65,parts:1,provider:"Turkcell",campaignId:"CAMP001",campaignName:"Randevu Hatırlatma"},{id:"SMS002",recipient:"Fatma Demir",phone:"+90 533 987 6543",content:"Sayın Fatma, ödemenizin son tarihi yaklaşıyor. Lütfen en kısa sürede ödeme yapın.",status:"sent",sentAt:"2024-01-15 11:15:00",cost:.05,messageLength:78,parts:1,provider:"Vodafone",campaignId:"CAMP002",campaignName:"Ödeme Hatırlatma"},{id:"SMS003",recipient:"Mehmet Kaya",phone:"+90 534 555 1234",content:"Acil: Sistem bakımı nedeniyle hizmetlerimiz geçici olarak durdurulmuştur. Detaylar için web sitemizi ziyaret edin.",status:"failed",sentAt:"2024-01-15 12:00:00",failureReason:"Geçersiz numara",cost:0,messageLength:115,parts:1,provider:"Turk Telekom",campaignId:"CAMP003",campaignName:"Acil Bilgilendirme"},{id:"SMS004",recipient:"Ayşe Özkan",phone:"+90 535 777 8888",content:"Hoş geldiniz! Üyeliğiniz başarıyla oluşturuldu. Kullanıcı adınız: ayse.ozkan, şifrenizi e-posta adresinize gönderdik.",status:"delivered",sentAt:"2024-01-15 13:45:00",deliveredAt:"2024-01-15 13:45:08",cost:.08,messageLength:125,parts:2,provider:"Turkcell",campaignId:"CAMP004",campaignName:"Hoş Geldin Mesajı"},{id:"SMS005",recipient:"Ali Veli",phone:"+90 536 999 0000",content:"Promosyon: %50 indirim fırsatı! Bugün sınırlı süre için tüm ürünlerde geçerli. Kod: INDIRIM50",status:"pending",sentAt:"2024-01-15 14:20:00",cost:.05,messageLength:95,parts:1,provider:"Vodafone",campaignId:"CAMP005",campaignName:"Promosyon Kampanyası"}]),B=["Turkcell","Vodafone","Turk Telekom"],L=e.useMemo(()=>T.filter(e=>{const s=e.recipient.toLowerCase().includes(j.toLowerCase())||e.phone.includes(j)||e.content.toLowerCase().includes(j.toLowerCase())||e.id.toLowerCase().includes(j.toLowerCase()),t="all"===N||e.status===N,a="all"===y||e.provider===y;let l=!0;if("all"!==k){const s=new Date,t=new Date(e.sentAt);switch(k){case"today":l=t.toDateString()===s.toDateString();break;case"yesterday":{const e=new Date(s);e.setDate(e.getDate()-1),l=t.toDateString()===e.toDateString();break}case"week":{const e=new Date(s);e.setDate(e.getDate()-7),l=t>=e;break}case"month":{const e=new Date(s);e.setMonth(e.getMonth()-1),l=t>=e;break}}}return s&&t&&a&&l}),[j,N,y,k,T]),F=e=>{switch(e){case"sent":return s.jsx(m,{className:"h-4 w-4 text-blue-500"});case"delivered":return s.jsx(n,{className:"h-4 w-4 text-green-500"});case"failed":return s.jsx(g,{className:"h-4 w-4 text-red-500"});case"pending":return s.jsx(x,{className:"h-4 w-4 text-yellow-500"});default:return s.jsx(p,{className:"h-4 w-4 text-gray-500"})}},G=e=>s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"}[e]}`,children:{sent:"Gönderildi",delivered:"Teslim Edildi",failed:"Başarısız",pending:"Beklemede"}[e]}),I=(()=>{const e=T.length,s=T.filter(e=>"delivered"===e.status).length;return{total:e,delivered:s,failed:T.filter(e=>"failed"===e.status).length,pending:T.filter(e=>"pending"===e.status).length,totalCost:T.reduce((e,s)=>e+s.cost,0),deliveryRate:e>0?(s/e*100).toFixed(1):"0"}})(),O=[{key:"id",header:"SMS ID",render:(e,t)=>s.jsx("span",{className:"font-mono text-sm text-gray-600",children:t.id})},{key:"recipient",header:"Alıcı",render:(e,t)=>s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:t.recipient}),s.jsx("div",{className:"text-xs text-gray-500",children:t.phone})]})},{key:"content",header:"İçerik",render:(e,t)=>s.jsxs("div",{className:"max-w-xs",children:[s.jsx("p",{className:"text-sm truncate",title:t.content,children:t.content}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.messageLength," karakter, ",t.parts," parça"]})]})},{key:"status",header:"Durum",render:(e,t)=>s.jsxs("div",{className:"flex items-center gap-2",children:[F(t.status),G(t.status)]})},{key:"provider",header:"Operatör",render:(e,t)=>s.jsx("span",{className:"text-sm",children:t.provider})},{key:"sentAt",header:"Gönderim Zamanı",render:(e,t)=>s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:t.sentAt.split(" ")[0]}),s.jsx("div",{className:"text-gray-500",children:t.sentAt.split(" ")[1]})]})},{key:"cost",header:"Maliyet",render:(e,t)=>s.jsxs("span",{className:"font-medium text-sm",children:["₺",t.cost.toFixed(2)]})},{key:"actions",header:"İşlemler",render:(e,t)=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>(e=>{M(e),D(!0)})(t),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Detayları Görüntüle",children:s.jsx(u,{className:"h-4 w-4"})}),"failed"===t.status&&s.jsx("button",{className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Tekrar Gönder",children:s.jsx(c,{className:"h-4 w-4"})})]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SMS Gönderimleri"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"SMS gönderim geçmişini ve durumlarını takip edin"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(t,{className:"h-4 w-4"}),"İstatistikler"]}),s.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(a,{className:"h-4 w-4"}),"Rapor Al"]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l,{className:"h-4 w-4 text-gray-400"}),s.jsx("input",{value:j,onChange:e=>v(e.target.value),className:"flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"SMS ID, alıcı, telefon veya içerik ara..."})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtreler:"})]}),s.jsxs("select",{value:N,onChange:e=>b(e.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Tüm Durumlar"}),s.jsx("option",{value:"delivered",children:"Teslim Edildi"}),s.jsx("option",{value:"sent",children:"Gönderildi"}),s.jsx("option",{value:"pending",children:"Beklemede"}),s.jsx("option",{value:"failed",children:"Başarısız"})]}),s.jsxs("select",{value:y,onChange:e=>f(e.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Tüm Operatörler"}),B.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:k,onChange:e=>w(e.target.value),className:"border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Tüm Tarihler"}),s.jsx("option",{value:"today",children:"Bugün"}),s.jsx("option",{value:"yesterday",children:"Dün"}),s.jsx("option",{value:"week",children:"Son 7 Gün"}),s.jsx("option",{value:"month",children:"Son 30 Gün"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg border",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Toplam SMS"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.total})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg border",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Teslim Edildi"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.delivered})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg border",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Başarısız"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.failed})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg border",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(t,{className:"h-5 w-5 text-purple-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Başarı Oranı"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["%",I.deliveryRate]})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg border",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{className:"h-5 w-5 text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Maliyet"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₺",I.totalCost.toFixed(2)]})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg border",children:s.jsx(o,{columns:O,data:L})}),s.jsx(h,{isOpen:A,onClose:()=>D(!1),title:"SMS Detayları",children:S&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMS ID"}),s.jsx("p",{className:"text-sm text-gray-900 font-mono",children:S.id})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),s.jsxs("div",{className:"flex items-center gap-2",children:[F(S.status),G(S.status)]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alıcı"}),s.jsx("p",{className:"text-sm text-gray-900",children:S.recipient})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),s.jsx("p",{className:"text-sm text-gray-900",children:S.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operatör"}),s.jsx("p",{className:"text-sm text-gray-900",children:S.provider})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maliyet"}),s.jsxs("p",{className:"text-sm text-gray-900",children:["₺",S.cost.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gönderim Zamanı"}),s.jsx("p",{className:"text-sm text-gray-900",children:S.sentAt})]}),S.deliveredAt&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teslim Zamanı"}),s.jsx("p",{className:"text-sm text-gray-900",children:S.deliveredAt})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesaj Uzunluğu"}),s.jsxs("p",{className:"text-sm text-gray-900",children:[S.messageLength," karakter (",S.parts," parça)"]})]}),S.campaignName&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kampanya"}),s.jsx("p",{className:"text-sm text-gray-900",children:S.campaignName})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mesaj İçeriği"}),s.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:s.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:S.content})})]}),S.failureReason&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hata Nedeni"}),s.jsx("div",{className:"bg-red-50 p-3 rounded border border-red-200",children:s.jsx("p",{className:"text-sm text-red-800",children:S.failureReason})})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:["failed"===S.status&&s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(c,{className:"h-4 w-4"}),"Tekrar Gönder"]}),s.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Kapat"})]})]})}),s.jsx(h,{isOpen:C,onClose:()=>z(!1),title:"SMS İstatistikleri",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Genel İstatistikler"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:I.total}),s.jsx("div",{className:"text-sm text-blue-800",children:"Toplam SMS"})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:I.delivered}),s.jsx("div",{className:"text-sm text-green-800",children:"Başarılı"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:I.failed}),s.jsx("div",{className:"text-sm text-red-800",children:"Başarısız"})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["%",I.deliveryRate]}),s.jsx("div",{className:"text-sm text-purple-800",children:"Başarı Oranı"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Operatör Bazında Dağılım"}),s.jsx("div",{className:"space-y-3",children:B.map(e=>{const t=T.filter(s=>s.provider===e),a=t.filter(e=>"delivered"===e.status).length,l=t.length>0?(a/t.length*100).toFixed(1):"0";return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e}),s.jsxs("div",{className:"text-sm text-gray-600",children:[t.length," SMS"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium",children:["%",l]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]})]},e)})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Maliyet Analizi"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",I.totalCost.toFixed(2)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Maliyet"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",(I.totalCost/Math.max(I.total,1)).toFixed(3)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"SMS Başına Ortalama"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₺",(I.totalCost/Math.max(I.delivered,1)).toFixed(3)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı SMS Başına"})]})]})})]})]})})]})}export{j as default};
