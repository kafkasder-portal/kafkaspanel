import{r as e,V as i,j as s,d as a,i as r,q as d,p as n,D as t,ao as l,g as m,T as c,k as o}from"../assets/index-CzvAnh9f.js";import{S as u}from"./StatCard-3Oaqvq3F.js";import{A as x}from"./alert-circle-D6Smf8fy.js";function N(){const[N,h]=e.useState({totalBeneficiaries:0,pendingApplications:0,monthlyAidAmount:0,completedAids:0,urgentApplications:0,activeAidRecords:0}),[b,v]=e.useState([]),[p,g]=e.useState(!0);e.useEffect(()=>{f()},[]);const f=async()=>{try{const{count:e,error:s}=await i.from("beneficiaries").select("*",{count:"exact",head:!0}).eq("status","active"),{count:a,error:r}=await i.from("applications").select("*",{count:"exact",head:!0}).eq("status","pending"),{count:d,error:n}=await i.from("applications").select("*",{count:"exact",head:!0}).eq("priority","urgent").eq("status","pending"),t=(new Date).toISOString().slice(0,7),{count:l,error:m}=await i.from("aid_records").select("*",{count:"exact",head:!0}).eq("status","completed").gte("created_at",`${t}-01`),{data:c,error:o}=await i.from("aid_records").select("amount").eq("status","completed").gte("created_at",`${t}-01`),u=(null==c?void 0:c.reduce((e,i)=>{const s=i.amount||0;return e+(isNaN(s)?0:s)},0))||0,{count:x,error:N}=await i.from("aid_records").select("*",{count:"exact",head:!0}).in("status",["approved","distributed"]),{data:b,error:p}=await i.from("applications").select("\n          *,\n          beneficiaries (name, surname)\n        ").order("created_at",{ascending:!1}).limit(5);h({totalBeneficiaries:e||0,pendingApplications:a||0,monthlyAidAmount:u,completedAids:l||0,urgentApplications:d||0,activeAidRecords:x||0}),v(b||[])}catch(e){h({totalBeneficiaries:0,pendingApplications:0,monthlyAidAmount:0,completedAids:0,urgentApplications:0,activeAidRecords:0}),v([])}finally{g(!1)}},j=e=>isNaN(e)||null==e?"₺0,00":new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),D=e=>{const i={pending:{label:"Bekliyor",class:"bg-yellow-100 text-yellow-800"},approved:{label:"Onaylandı",class:"bg-green-100 text-green-800"},rejected:{label:"Reddedildi",class:"bg-red-100 text-red-800"},completed:{label:"Tamamlandı",class:"bg-blue-100 text-blue-800"}}[e]||{label:e,class:"bg-gray-100 text-gray-800"};return s.jsxDEV("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${i.class}`,children:i.label},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:177,columnNumber:7},this)},E=e=>{const i={low:{label:"Düşük",class:"bg-gray-100 text-gray-800"},normal:{label:"Normal",class:"bg-blue-100 text-blue-800"},high:{label:"Yüksek",class:"bg-orange-100 text-orange-800"},urgent:{label:"Acil",class:"bg-red-100 text-red-800"}}[e]||{label:e,class:"bg-gray-100 text-gray-800"};return s.jsxDEV("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${i.class}`,children:i.label},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:192,columnNumber:7},this)};return p?s.jsxDEV("div",{className:"flex h-64 items-center justify-center",children:s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:202,columnNumber:11},this),s.jsxDEV("p",{className:"text-muted-foreground",children:"Yükleniyor..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:203,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:200,columnNumber:7},this):s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-2xl font-bold",children:"Yardım Yönetimi"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:214,columnNumber:11},this),s.jsxDEV("p",{className:"text-muted-foreground",children:"Yardım süreçlerinizi takip edin ve yönetin"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:215,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:213,columnNumber:9},this),s.jsxDEV("div",{className:"flex gap-2",children:s.jsxDEV(a,{to:"/aid/applications",className:"rounded bg-primary px-4 py-2 text-sm text-primary-foreground hover:bg-primary/90",children:"Yeni Başvuru"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:218,columnNumber:11},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:212,columnNumber:7},this),s.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxDEV(u,{title:"Toplam İhtiyaç Sahibi",value:N.totalBeneficiaries,icon:r,accentClass:"bg-blue-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:229,columnNumber:9},this),s.jsxDEV(u,{title:"Bekleyen Başvurular",value:N.pendingApplications,icon:d,accentClass:"bg-orange-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:235,columnNumber:9},this),s.jsxDEV(u,{title:"Acil Başvurular",value:N.urgentApplications,icon:x,accentClass:"bg-red-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:241,columnNumber:9},this),s.jsxDEV(u,{title:"Bu Ay Tamamlanan",value:N.completedAids,icon:n,accentClass:"bg-green-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:247,columnNumber:9},this),s.jsxDEV(u,{title:"Bu Ay Toplam Tutar",value:j(N.monthlyAidAmount||0),icon:t,accentClass:"bg-purple-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:253,columnNumber:9},this),s.jsxDEV(u,{title:"Aktif Yardım Kayıtları",value:N.activeAidRecords,icon:l,accentClass:"bg-indigo-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:259,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:228,columnNumber:7},this),s.jsxDEV("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[s.jsxDEV("div",{className:"rounded-lg border p-6",children:[s.jsxDEV("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxDEV("h2",{className:"text-lg font-semibold",children:"Son Başvurular"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:272,columnNumber:13},this),s.jsxDEV(a,{to:"/aid/applications",className:"text-sm text-primary hover:underline",children:"Tümünü Gör"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:273,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:271,columnNumber:11},this),s.jsxDEV("div",{className:"space-y-3",children:b.length>0?b.map(e=>{var i,a,r;return s.jsxDEV("div",{className:"flex items-center justify-between rounded border p-3",children:[s.jsxDEV("div",{className:"flex-1",children:[s.jsxDEV("div",{className:"font-medium",children:[(null==(i=e.beneficiaries)?void 0:i.name)||"İsim"," ",(null==(a=e.beneficiaries)?void 0:a.surname)||"Soyisim"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:282,columnNumber:21},this),s.jsxDEV("div",{className:"text-sm text-muted-foreground",children:e.description||"Açıklama bulunmamaktadır"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:285,columnNumber:21},this),s.jsxDEV("div",{className:"mt-1 flex items-center gap-2",children:[D(e.status||"pending"),E(e.priority||"normal")]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:288,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:281,columnNumber:19},this),s.jsxDEV("div",{className:"text-right text-sm text-muted-foreground",children:e.created_at?(r=e.created_at,new Date(r).toLocaleDateString("tr-TR")):"Tarih yok"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:293,columnNumber:19},this)]},e.id,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:280,columnNumber:13},this)}):s.jsxDEV("div",{className:"text-center text-muted-foreground py-8",children:"Henüz başvuru bulunmamaktadır."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:299,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:277,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:270,columnNumber:9},this),s.jsxDEV("div",{className:"rounded-lg border p-6",children:[s.jsxDEV("h2",{className:"mb-4 text-lg font-semibold",children:"Hızlı Erişim"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:308,columnNumber:11},this),s.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxDEV(a,{to:"/aid/beneficiaries",className:"flex flex-col items-center rounded border p-4 hover:bg-muted transition-colors",children:[s.jsxDEV(r,{className:"h-8 w-8 text-blue-600 mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:314,columnNumber:15},this),s.jsxDEV("span",{className:"text-sm font-medium",children:"İhtiyaç Sahipleri"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:315,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:310,columnNumber:13},this),s.jsxDEV(a,{to:"/aid/applications",className:"flex flex-col items-center rounded border p-4 hover:bg-muted transition-colors",children:[s.jsxDEV(m,{className:"h-8 w-8 text-orange-600 mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:321,columnNumber:15},this),s.jsxDEV("span",{className:"text-sm font-medium",children:"Başvurular"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:322,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:317,columnNumber:13},this),s.jsxDEV(a,{to:"/aid/cash-vault",className:"flex flex-col items-center rounded border p-4 hover:bg-muted transition-colors",children:[s.jsxDEV(t,{className:"h-8 w-8 text-green-600 mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:328,columnNumber:15},this),s.jsxDEV("span",{className:"text-sm font-medium",children:"Nakdi Yardım"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:329,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:324,columnNumber:13},this),s.jsxDEV(a,{to:"/aid/reports",className:"flex flex-col items-center rounded border p-4 hover:bg-muted transition-colors",children:[s.jsxDEV(c,{className:"h-8 w-8 text-purple-600 mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:335,columnNumber:15},this),s.jsxDEV("span",{className:"text-sm font-medium",children:"Raporlar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:336,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:331,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:309,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:307,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:268,columnNumber:7},this),s.jsxDEV("div",{className:"rounded-lg border p-6",children:[s.jsxDEV("h2",{className:"mb-4 text-lg font-semibold flex items-center gap-2",children:[s.jsxDEV(o,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:345,columnNumber:11},this),"Bu Ay Özeti"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:344,columnNumber:9},this),s.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV("div",{className:"text-2xl font-bold text-green-600",children:N.completedAids},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:350,columnNumber:13},this),s.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Tamamlanan Yardım"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:351,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:349,columnNumber:11},this),s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV("div",{className:"text-2xl font-bold text-blue-600",children:j(N.monthlyAidAmount||0)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:354,columnNumber:13},this),s.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Toplam Tutar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:355,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:353,columnNumber:11},this),s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV("div",{className:"text-2xl font-bold text-orange-600",children:N.pendingApplications},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:358,columnNumber:13},this),s.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Bekleyen Başvuru"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:359,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:357,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:348,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:343,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Index.tsx",lineNumber:210,columnNumber:5},this)}export{N as default};
