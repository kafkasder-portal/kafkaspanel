import{r as e,j as a}from"../assets/index-dW79Uy5k.js";import{D as s}from"./DataTable-Co2fK-v0.js";import{M as r}from"./Modal-BBek2lFh.js";import{e as n}from"./exportToCsv-DLkyd1nM.js";const t=[{id:"1",date:"2024-01-15",donorName:"Ayşe Demir",donorPhone:"+90 532 123 4567",donorEmail:"ayse.demir@email.com",amount:500,currency:"TRY",cardNumber:"****-****-****-1234",cardType:"Visa",bankName:"İş Bankası",transactionId:"TXN789123456",authCode:"AUTH123",installments:1,purpose:"Eğitim Yardımı",status:"başarılı",commission:15,netAmount:485,notes:"Online bağış"},{id:"2",date:"2024-01-14",donorName:"Mehmet Kaya",donorPhone:"+90 533 987 6543",amount:1e3,currency:"TRY",cardNumber:"****-****-****-5678",cardType:"Mastercard",bankName:"Garanti BBVA",transactionId:"TXN456789123",authCode:"AUTH456",installments:3,purpose:"Genel Bağış",status:"başarılı",commission:30,netAmount:970},{id:"3",date:"2024-01-13",donorName:"Fatma Özkan",donorEmail:"fatma.ozkan@email.com",amount:250,currency:"TRY",cardNumber:"****-****-****-9012",cardType:"Troy",bankName:"Ziraat Bankası",transactionId:"TXN321654987",authCode:"AUTH789",installments:1,purpose:"Kurban",status:"beklemede",commission:7.5,netAmount:242.5}];function l(){const[l,d]=e.useState(t),[o,i]=e.useState(""),[c,m]=e.useState(!1),[u,x]=e.useState(!1),[p,h]=e.useState(null),[b,j]=e.useState(null),[g,N]=e.useState({donorName:"",donorPhone:"",donorEmail:"",amount:"",currency:"TRY",cardNumber:"",cardType:"Visa",bankName:"",transactionId:"",authCode:"",installments:"1",purpose:"",notes:""}),[v,y]=e.useState({refundAmount:"",refundReason:"",refundNotes:""}),f=e.useMemo(()=>l.filter(e=>JSON.stringify(e).toLowerCase().includes(o.toLowerCase())),[l,o]),T=f.reduce((e,a)=>e+a.amount,0),k=f.reduce((e,a)=>e+a.commission,0),C=f.reduce((e,a)=>e+a.netAmount,0),S=[{key:"date",header:"Tarih"},{key:"transactionId",header:"İşlem No"},{key:"donorName",header:"Bağışçı"},{key:"cardNumber",header:"Kart No"},{key:"cardType",header:"Kart Tipi",render:(e,s)=>a.jsx("span",{className:"px-2 py-1 rounded text-xs "+("Visa"===s.cardType?"bg-blue-100 text-blue-800":"Mastercard"===s.cardType?"bg-red-100 text-red-800":"Troy"===s.cardType?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"),children:s.cardType})},{key:"amount",header:"Tutar",render:(e,a)=>`${a.amount.toLocaleString("tr-TR")} ${a.currency}`},{key:"installments",header:"Taksit",render:(e,a)=>1===a.installments?"Peşin":`${a.installments} Taksit`},{key:"commission",header:"Komisyon",render:(e,a)=>`${a.commission.toLocaleString("tr-TR")} ₺`},{key:"netAmount",header:"Net Tutar",render:(e,a)=>`${a.netAmount.toLocaleString("tr-TR")} ₺`},{key:"purpose",header:"Amaç"},{key:"status",header:"Durum",render:(e,s)=>a.jsx("span",{className:"px-2 py-1 rounded text-xs "+("başarılı"===s.status?"bg-green-100 text-green-800":"beklemede"===s.status?"bg-yellow-100 text-yellow-800":"başarısız"===s.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:s.status})},{key:"id",header:"İşlemler",render:(e,s)=>a.jsxs("div",{className:"flex gap-2",children:["başarılı"===s.status&&a.jsx("button",{onClick:()=>B(s),className:"text-orange-600 hover:text-orange-800 text-sm",children:"İade"}),a.jsx("button",{onClick:()=>w(s),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),a.jsx("button",{onClick:()=>A(s.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],w=e=>{h(e),N({donorName:e.donorName,donorPhone:e.donorPhone||"",donorEmail:e.donorEmail||"",amount:e.amount.toString(),currency:e.currency,cardNumber:e.cardNumber,cardType:e.cardType,bankName:e.bankName,transactionId:e.transactionId,authCode:e.authCode,installments:e.installments.toString(),purpose:e.purpose,notes:e.notes||""}),m(!0)},B=e=>{j(e),y({refundAmount:e.amount.toString(),refundReason:"",refundNotes:""}),x(!0)},A=e=>{confirm("Bu kredi kartı bağışını silmek istediğinizden emin misiniz?")&&d(l.filter(a=>a.id!==e))},K=()=>{N({donorName:"",donorPhone:"",donorEmail:"",amount:"",currency:"TRY",cardNumber:"",cardType:"Visa",bankName:"",transactionId:"",authCode:"",installments:"1",purpose:"",notes:""})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Kredi Kartı Bağışları"}),a.jsx("button",{onClick:()=>{h(null),K(),m(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Kredi Kartı Bağışı"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam İşlem"}),a.jsx("p",{className:"text-2xl font-bold text-blue-900",children:f.length})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Brüt Tutar"}),a.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[T.toLocaleString("tr-TR")," ₺"]})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-orange-600",children:"Komisyon"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[k.toLocaleString("tr-TR")," ₺"]})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Net Tutar"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[C.toLocaleString("tr-TR")," ₺"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Kart Tipi Dağılımı"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:["Visa","Mastercard","Troy","American Express"].map(e=>{const s=f.filter(a=>a.cardType===e).length,r=f.filter(a=>a.cardType===e).reduce((e,a)=>e+a.amount,0);return a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium",children:e}),a.jsxs("p",{className:"text-sm text-gray-600",children:[s," işlem"]}),a.jsxs("p",{className:"text-lg font-bold",children:[r.toLocaleString("tr-TR")," ₺"]})]},e)})})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("input",{value:o,onChange:e=>i(e.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Bağışçı, kart no, işlem no ile ara..."}),a.jsxs("select",{className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"Tüm Durumlar"}),a.jsx("option",{value:"başarılı",children:"Başarılı"}),a.jsx("option",{value:"beklemede",children:"Beklemede"}),a.jsx("option",{value:"başarısız",children:"Başarısız"}),a.jsx("option",{value:"iade",children:"İade"})]}),a.jsxs("select",{className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"Tüm Kart Tipleri"}),a.jsx("option",{value:"Visa",children:"Visa"}),a.jsx("option",{value:"Mastercard",children:"Mastercard"}),a.jsx("option",{value:"Troy",children:"Troy"}),a.jsx("option",{value:"American Express",children:"American Express"})]}),a.jsx("input",{type:"date",className:"border rounded px-3 py-2"}),a.jsx("button",{onClick:()=>n("kredi-karti-bagislar.csv",f),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Excel İndir"})]}),a.jsx(s,{columns:S,data:f})]}),a.jsx(r,{isOpen:c,onClose:()=>m(!1),title:p?"Kredi Kartı Bağışı Düzenle":"Yeni Kredi Kartı Bağışı",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=parseFloat(g.amount),s=.03*a,r=a-s;if(p)d(l.map(e=>e.id===p.id?{...e,...g,amount:a,installments:parseInt(g.installments),commission:s,netAmount:r}:e));else{const e={id:Date.now().toString(),date:(new Date).toISOString().split("T")[0],...g,amount:a,installments:parseInt(g.installments),commission:s,netAmount:r,status:"başarılı"};d([...l,e])}m(!1),h(null),K()},className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),a.jsx("input",{type:"text",value:g.donorName,onChange:e=>N({...g,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),a.jsx("input",{type:"tel",value:g.donorPhone,onChange:e=>N({...g,donorPhone:e.target.value}),className:"w-full border rounded px-3 py-2"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),a.jsx("input",{type:"email",value:g.donorEmail,onChange:e=>N({...g,donorEmail:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),a.jsx("input",{type:"number",step:"0.01",value:g.amount,onChange:e=>N({...g,amount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),a.jsxs("select",{value:g.currency,onChange:e=>N({...g,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"TRY",children:"TRY"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kart Numarası (Maskelenmiş)"}),a.jsx("input",{type:"text",value:g.cardNumber,onChange:e=>N({...g,cardNumber:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"****-****-****-1234",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kart Tipi"}),a.jsxs("select",{value:g.cardType,onChange:e=>N({...g,cardType:e.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"Visa",children:"Visa"}),a.jsx("option",{value:"Mastercard",children:"Mastercard"}),a.jsx("option",{value:"Troy",children:"Troy"}),a.jsx("option",{value:"American Express",children:"American Express"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Banka"}),a.jsx("input",{type:"text",value:g.bankName,onChange:e=>N({...g,bankName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taksit Sayısı"}),a.jsxs("select",{value:g.installments,onChange:e=>N({...g,installments:e.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"1",children:"Peşin"}),a.jsx("option",{value:"2",children:"2 Taksit"}),a.jsx("option",{value:"3",children:"3 Taksit"}),a.jsx("option",{value:"6",children:"6 Taksit"}),a.jsx("option",{value:"9",children:"9 Taksit"}),a.jsx("option",{value:"12",children:"12 Taksit"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"İşlem No"}),a.jsx("input",{type:"text",value:g.transactionId,onChange:e=>N({...g,transactionId:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Yetki Kodu"}),a.jsx("input",{type:"text",value:g.authCode,onChange:e=>N({...g,authCode:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),a.jsxs("select",{value:g.purpose,onChange:e=>N({...g,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"Seçiniz"}),a.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),a.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),a.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),a.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),a.jsx("option",{value:"Kurban",children:"Kurban"}),a.jsx("option",{value:"Ramazan",children:"Ramazan"}),a.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),a.jsx("textarea",{value:g.notes,onChange:e=>N({...g,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"Güncelle":"Kaydet"})]})]})}),a.jsx(r,{isOpen:u,onClose:()=>x(!1),title:"Kredi Kartı İadesi",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),b&&d(l.map(e=>e.id===b.id?{...e,status:"iade",notes:`İade: ${v.refundReason}. ${v.refundNotes}`}:e)),x(!1),j(null),y({refundAmount:"",refundReason:"",refundNotes:""})},className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"İşlem Bilgileri"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Bağışçı:"})," ",null==b?void 0:b.donorName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Tutar:"})," ",null==b?void 0:b.amount.toLocaleString("tr-TR")," ",null==b?void 0:b.currency]}),a.jsxs("p",{children:[a.jsx("strong",{children:"İşlem No:"})," ",null==b?void 0:b.transactionId]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Kart:"})," ",null==b?void 0:b.cardNumber]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Tutarı"}),a.jsx("input",{type:"number",step:"0.01",value:v.refundAmount,onChange:e=>y({...v,refundAmount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Sebebi"}),a.jsxs("select",{value:v.refundReason,onChange:e=>y({...v,refundReason:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"Seçiniz"}),a.jsx("option",{value:"Bağışçı Talebi",children:"Bağışçı Talebi"}),a.jsx("option",{value:"Teknik Hata",children:"Teknik Hata"}),a.jsx("option",{value:"Yanlış İşlem",children:"Yanlış İşlem"}),a.jsx("option",{value:"İptal Talebi",children:"İptal Talebi"}),a.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"İade Notları"}),a.jsx("textarea",{value:v.refundNotes,onChange:e=>y({...v,refundNotes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"İade ile ilgili ek bilgiler..."})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"İade İşlemini Başlat"})]})]})})]})}export{l as default};
