import{r as e,V as s,j as i,o as r,e as a,q as d,aa as n,D as m,S as t,n as l,X as c}from"../assets/index-CzvAnh9f.js";import{e as o}from"./exportToCsv-DLkyd1nM.js";import{D as u}from"./DataTable-CBtBMNX8.js";import{M as N}from"./Modal-CXkm-C8J.js";import{S as h}from"./StatCard-3Oaqvq3F.js";import{u as b,t as x,o as v,s as p,n as g}from"./types-C2SbTJX7.js";import{V as f}from"./index-DX2TtJe9.js";import{A as k}from"./alert-circle-D6Smf8fy.js";import{E as B}from"./eye-C9FxZSh9.js";import{P as j}from"./pen-square-DRhBp83i.js";const D=v({beneficiary_id:p().min(1,"İhtiyaç sahibi seçiniz"),aid_record_id:p().min(1,"Yardım kaydı seçiniz"),amount:g().min(1,"Tutar giriniz"),bank_name:p().min(1,"Banka adı giriniz"),account_number:p().min(1,"Hesap numarası giriniz"),account_holder:p().min(1,"Hesap sahibi giriniz"),iban:p().min(26,"Geçerli IBAN giriniz").max(34),notes:p().optional()});function E(){const[v,p]=e.useState([]),[g,E]=e.useState({totalPending:0,totalSent:0,totalCompleted:0,totalAmount:0}),[O,V]=e.useState(!0),[U,y]=e.useState(""),[w,_]=e.useState("all"),[S,C]=e.useState("all"),[T,z]=e.useState(!1),[L,A]=e.useState(!1),[G,Y]=e.useState([]),[q,H]=e.useState([]),[M,R]=e.useState([]),{register:$,handleSubmit:I,formState:{errors:P},reset:F,watch:J}=b({resolver:x(D)}),K=J("beneficiary_id");e.useEffect(()=>{W(),Q(),X()},[]),e.useEffect(()=>{K&&Z(K)},[K]);const W=async()=>{try{const{data:e,error:i}=await s.from("payments").select("\n          *,\n          beneficiaries (\n            name,\n            surname,\n            phone,\n            category\n          ),\n          aid_records (\n            aid_type,\n            amount,\n            notes\n          )\n        ").eq("payment_method","bank_transfer").order("created_at",{ascending:!1});if(i)throw i;p(e||[])}catch(e){f.error("Banka emirleri yüklenirken hata oluştu")}finally{V(!1)}},Q=async()=>{try{const{data:e}=await s.from("payments").select("status, amount").eq("payment_method","bank_transfer");if(e){const s=e.filter(e=>"pending"===e.status).length,i=e.filter(e=>"sent"===e.status).length,r=e.filter(e=>"completed"===e.status).length,a=e.reduce((e,s)=>e+(s.amount||0),0);E({totalPending:s,totalSent:i,totalCompleted:r,totalAmount:a})}}catch(e){}},X=async()=>{try{const{data:e,error:i}=await s.from("beneficiaries").select("id, name, surname, category").eq("status","active").order("name");if(i)throw i;H(e||[])}catch(e){}},Z=async e=>{try{const{data:i,error:r}=await s.from("aid_records").select("id, aid_type, amount, notes").eq("beneficiary_id",e).eq("status","approved").order("created_at",{ascending:!1});if(r)throw r;R(i||[])}catch(i){}},ee=e.useMemo(()=>v.filter(e=>{var s,i,r;const a=""===U||`${null==(s=e.beneficiaries)?void 0:s.name} ${null==(i=e.beneficiaries)?void 0:i.surname}`.toLowerCase().includes(U.toLowerCase())||e.account_holder.toLowerCase().includes(U.toLowerCase())||e.bank_name.toLowerCase().includes(U.toLowerCase())||(null==(r=e.transaction_ref)?void 0:r.toLowerCase().includes(U.toLowerCase())),d="all"===w||e.status===w;let n=!0;if("all"!==S){const s=new Date(e.order_date),i=new Date;switch(S){case"today":n=s.toDateString()===i.toDateString();break;case"week":n=s>=new Date(i.getTime()-6048e5);break;case"month":n=s.getMonth()===i.getMonth()&&s.getFullYear()===i.getFullYear()}}return a&&d&&n}),[v,U,w,S]),se=e=>{const s={pending:{label:"Beklemede",class:"bg-yellow-100 text-yellow-800",icon:d},sent:{label:"Gönderildi",class:"bg-blue-100 text-blue-800",icon:r},completed:{label:"Tamamlandı",class:"bg-green-100 text-green-800",icon:n},failed:{label:"Başarısız",class:"bg-red-100 text-red-800",icon:c},cancelled:{label:"İptal Edildi",class:"bg-gray-100 text-gray-800",icon:c}}[e]||{label:e,class:"bg-gray-100 text-gray-800",icon:k},a=s.icon;return i.jsxDEV("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${s.class}`,children:[i.jsxDEV(a,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:302,columnNumber:9},this),s.label]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:301,columnNumber:7},this)},ie=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),re=e=>new Date(e).toLocaleDateString("tr-TR"),ae=v.filter(e=>"pending"===e.status),de=[{key:"beneficiaries",header:"İhtiyaç Sahibi",render:(e,s)=>{var r,a,d;return i.jsxDEV("div",{children:[i.jsxDEV("div",{className:"font-medium",children:[null==(r=s.beneficiaries)?void 0:r.name," ",null==(a=s.beneficiaries)?void 0:a.surname]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:331,columnNumber:11},this),i.jsxDEV("div",{className:"text-sm text-muted-foreground",children:null==(d=s.beneficiaries)?void 0:d.category},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:332,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:330,columnNumber:5},this)}},{key:"amount",header:"Tutar",render:(e,s)=>i.jsxDEV("div",{className:"font-medium text-green-600",children:ie(s.amount)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:340,columnNumber:5},this)},{key:"bank_info",header:"Banka Bilgileri",render:(e,s)=>{return i.jsxDEV("div",{children:[i.jsxDEV("div",{className:"font-medium",children:s.bank_name},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:350,columnNumber:11},this),i.jsxDEV("div",{className:"text-sm text-muted-foreground",children:s.account_holder},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:351,columnNumber:11},this),i.jsxDEV("div",{className:"text-xs text-muted-foreground",children:(r=s.iban,r.replace(/(.{4})/g,"$1 ").trim())},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:352,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:349,columnNumber:5},this);var r}},{key:"status",header:"Durum",render:(e,s)=>se(s.status)},{key:"order_date",header:"Emir Tarihi",render:(e,s)=>re(s.order_date)},{key:"sent_date",header:"Gönderim Tarihi",render:(e,s)=>s.sent_date?re(s.sent_date):"-"},{key:"transaction_ref",header:"İşlem Ref.",render:(e,s)=>i.jsxDEV("div",{className:"max-w-xs truncate",title:s.transaction_ref,children:s.transaction_ref||"-"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:375,columnNumber:5},this)},{key:"actions",header:"İşlemler",render:(e,s)=>i.jsxDEV("div",{className:"flex items-center gap-2",children:[i.jsxDEV("button",{className:"rounded p-1 text-gray-600 hover:bg-gray-50",title:"Detay",children:i.jsxDEV(B,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:389,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:385,columnNumber:11},this),"pending"===s.status&&i.jsxDEV("button",{className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:i.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:396,columnNumber:15},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:392,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:384,columnNumber:5},this)}];return O?i.jsxDEV("div",{className:"flex h-64 items-center justify-center",children:i.jsxDEV("div",{className:"text-center",children:[i.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:408,columnNumber:11},this),i.jsxDEV("p",{className:"text-muted-foreground",children:"Yükleniyor..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:409,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:407,columnNumber:9},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:406,columnNumber:7},this):i.jsxDEV("div",{className:"space-y-6",children:[i.jsxDEV("div",{className:"flex items-center justify-between",children:[i.jsxDEV("div",{children:[i.jsxDEV("h1",{className:"text-2xl font-bold",children:"Banka Ödeme Emirleri"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:420,columnNumber:11},this),i.jsxDEV("p",{className:"text-muted-foreground",children:"Banka havalesi ile yapılacak ödemeleri yönetin"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:421,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:419,columnNumber:9},this),i.jsxDEV("div",{className:"flex gap-2",children:[ae.length>0&&i.jsxDEV("button",{onClick:()=>{Y(ae),A(!0)},className:"flex items-center gap-2 rounded bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700",children:[i.jsxDEV(r,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:432,columnNumber:15},this),"Toplu Gönder (",ae.length,")"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:425,columnNumber:11},this),i.jsxDEV("button",{onClick:()=>z(!0),className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[i.jsxDEV(a,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:440,columnNumber:13},this),"Yeni Emir"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:436,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:423,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:418,columnNumber:7},this),i.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsxDEV(h,{title:"Bekleyen Emirler",value:g.totalPending.toString(),icon:d,accentClass:"bg-yellow-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:448,columnNumber:9},this),i.jsxDEV(h,{title:"Gönderilen Emirler",value:g.totalSent.toString(),icon:r,accentClass:"bg-blue-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:454,columnNumber:9},this),i.jsxDEV(h,{title:"Tamamlanan Emirler",value:g.totalCompleted.toString(),icon:n,accentClass:"bg-green-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:460,columnNumber:9},this),i.jsxDEV(h,{title:"Toplam Tutar",value:ie(g.totalAmount),icon:m,accentClass:"bg-purple-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:466,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:447,columnNumber:7},this),i.jsxDEV("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border p-4",children:[i.jsxDEV("div",{className:"flex items-center gap-2",children:[i.jsxDEV(t,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:477,columnNumber:11},this),i.jsxDEV("input",{type:"text",placeholder:"Emir ara...",value:U,onChange:e=>y(e.target.value),className:"min-w-64 rounded border px-3 py-2 text-sm"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:478,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:476,columnNumber:9},this),i.jsxDEV("select",{value:w,onChange:e=>_(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[i.jsxDEV("option",{value:"all",children:"Tüm Durumlar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:492,columnNumber:11},this),i.jsxDEV("option",{value:"pending",children:"Bekleyen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:493,columnNumber:11},this),i.jsxDEV("option",{value:"sent",children:"Gönderilen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:494,columnNumber:11},this),i.jsxDEV("option",{value:"completed",children:"Tamamlanan"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:495,columnNumber:11},this),i.jsxDEV("option",{value:"failed",children:"Başarısız"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:496,columnNumber:11},this),i.jsxDEV("option",{value:"cancelled",children:"İptal Edilen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:497,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:487,columnNumber:9},this),i.jsxDEV("select",{value:S,onChange:e=>C(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[i.jsxDEV("option",{value:"all",children:"Tüm Tarihler"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:505,columnNumber:11},this),i.jsxDEV("option",{value:"today",children:"Bugün"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:506,columnNumber:11},this),i.jsxDEV("option",{value:"week",children:"Bu Hafta"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:507,columnNumber:11},this),i.jsxDEV("option",{value:"month",children:"Bu Ay"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:508,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:500,columnNumber:9},this),i.jsxDEV("button",{onClick:()=>o("banka-odeme-emirleri.csv",ee),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[i.jsxDEV(l,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:515,columnNumber:11},this),"İndir"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:511,columnNumber:9},this),i.jsxDEV("div",{className:"ml-auto text-sm text-muted-foreground",children:[ee.length," emir"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:519,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:475,columnNumber:7},this),i.jsxDEV(u,{columns:de,data:ee},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:525,columnNumber:7},this),i.jsxDEV(N,{open:T,onClose:()=>z(!1),children:[i.jsxDEV("div",{className:"flex items-center justify-between border-b p-4",children:[i.jsxDEV("h2",{className:"text-lg font-semibold",children:"Yeni Banka Ödeme Emri"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:530,columnNumber:11},this),i.jsxDEV("button",{onClick:()=>z(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:531,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:529,columnNumber:9},this),i.jsxDEV("form",{onSubmit:I(async e=>{try{const{error:i}=await s.from("payments").insert({aid_record_id:e.aid_record_id,beneficiary_id:e.beneficiary_id,payment_method:"bank_transfer",amount:e.amount,bank_account:e.iban,bank_name:e.bank_name,account_number:e.account_number,account_holder:e.account_holder,status:"pending",notes:e.notes});if(i)throw i;f.success("Banka ödeme emri başarıyla oluşturuldu"),z(!1),F(),W(),Q()}catch(i){f.error("Banka ödeme emri oluşturulurken hata oluştu")}}),className:"p-4 space-y-4",children:[i.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"İhtiyaç Sahibi *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:542,columnNumber:15},this),i.jsxDEV("select",{...$("beneficiary_id"),className:"w-full rounded border px-3 py-2 text-sm",children:[i.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:547,columnNumber:17},this),q.map(e=>i.jsxDEV("option",{value:e.id,children:[e.name," ",e.surname," - ",e.category]},e.id,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:549,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:543,columnNumber:15},this),P.beneficiary_id&&i.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:P.beneficiary_id.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:555,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:541,columnNumber:13},this),i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Yardım Kaydı *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:560,columnNumber:15},this),i.jsxDEV("select",{...$("aid_record_id"),className:"w-full rounded border px-3 py-2 text-sm",disabled:!K,children:[i.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:566,columnNumber:17},this),M.map(e=>i.jsxDEV("option",{value:e.id,children:[e.aid_type," - ",ie(e.amount)]},e.id,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:568,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:561,columnNumber:15},this),P.aid_record_id&&i.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:P.aid_record_id.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:574,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:559,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:540,columnNumber:11},this),i.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Tutar *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:581,columnNumber:15},this),i.jsxDEV("input",{type:"number",step:"0.01",...$("amount",{valueAsNumber:!0}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"0.00"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:582,columnNumber:15},this),P.amount&&i.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:P.amount.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:590,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:580,columnNumber:13},this),i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Banka Adı *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:595,columnNumber:15},this),i.jsxDEV("input",{type:"text",...$("bank_name"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Banka adı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:596,columnNumber:15},this),P.bank_name&&i.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:P.bank_name.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:603,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:594,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:579,columnNumber:11},this),i.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Hesap Sahibi *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:610,columnNumber:15},this),i.jsxDEV("input",{type:"text",...$("account_holder"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Hesap sahibinin adı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:611,columnNumber:15},this),P.account_holder&&i.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:P.account_holder.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:618,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:609,columnNumber:13},this),i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Hesap Numarası *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:623,columnNumber:15},this),i.jsxDEV("input",{type:"text",...$("account_number"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Hesap numarası"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:624,columnNumber:15},this),P.account_number&&i.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:P.account_number.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:631,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:622,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:608,columnNumber:11},this),i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"IBAN *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:637,columnNumber:13},this),i.jsxDEV("input",{type:"text",...$("iban"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"TR00 0000 0000 0000 0000 0000 00",maxLength:34},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:638,columnNumber:13},this),P.iban&&i.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:P.iban.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:646,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:636,columnNumber:11},this),i.jsxDEV("div",{children:[i.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Notlar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:651,columnNumber:13},this),i.jsxDEV("textarea",{...$("notes"),rows:3,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Ödeme emri ile ilgili notlar..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:652,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:650,columnNumber:11},this),i.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsxDEV("button",{type:"button",onClick:()=>z(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:661,columnNumber:13},this),i.jsxDEV("button",{type:"submit",className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[i.jsxDEV(a,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:672,columnNumber:15},this),"Oluştur"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:668,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:660,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:539,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:528,columnNumber:7},this),i.jsxDEV(N,{open:L,onClose:()=>A(!1),children:[i.jsxDEV("div",{className:"flex items-center justify-between border-b p-4",children:[i.jsxDEV("h2",{className:"text-lg font-semibold",children:"Toplu Banka Ödeme Emri Gönderimi"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:682,columnNumber:11},this),i.jsxDEV("button",{onClick:()=>A(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:683,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:681,columnNumber:9},this),i.jsxDEV("div",{className:"p-4 space-y-4",children:[i.jsxDEV("div",{className:"rounded border p-4 bg-yellow-50",children:[i.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxDEV(k,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:694,columnNumber:15},this),i.jsxDEV("h3",{className:"font-medium text-yellow-800",children:"Dikkat"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:695,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:693,columnNumber:13},this),i.jsxDEV("p",{className:"text-sm text-yellow-700",children:[G.length," adet banka ödeme emri gönderilecek. Bu işlem geri alınamaz."]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:697,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:692,columnNumber:11},this),i.jsxDEV("div",{className:"max-h-64 overflow-y-auto",children:i.jsxDEV("table",{className:"w-full text-sm",children:[i.jsxDEV("thead",{children:i.jsxDEV("tr",{className:"border-b",children:[i.jsxDEV("th",{className:"text-left p-2",children:"İhtiyaç Sahibi"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:706,columnNumber:19},this),i.jsxDEV("th",{className:"text-left p-2",children:"Tutar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:707,columnNumber:19},this),i.jsxDEV("th",{className:"text-left p-2",children:"Banka"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:708,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:705,columnNumber:17},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:704,columnNumber:15},this),i.jsxDEV("tbody",{children:G.map(e=>{var s,r;return i.jsxDEV("tr",{className:"border-b",children:[i.jsxDEV("td",{className:"p-2",children:[null==(s=e.beneficiaries)?void 0:s.name," ",null==(r=e.beneficiaries)?void 0:r.surname]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:714,columnNumber:21},this),i.jsxDEV("td",{className:"p-2",children:ie(e.amount)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:717,columnNumber:21},this),i.jsxDEV("td",{className:"p-2",children:e.bank_name},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:718,columnNumber:21},this)]},e.id,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:713,columnNumber:17},this)})},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:711,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:703,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:702,columnNumber:11},this),i.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsxDEV("button",{onClick:()=>A(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:726,columnNumber:13},this),i.jsxDEV("button",{onClick:async()=>{try{const e=G.map(e=>e.id),{error:i}=await s.from("payments").update({status:"sent",sent_date:(new Date).toISOString()}).in("id",e);if(i)throw i;f.success(`${G.length} adet banka ödeme emri gönderildi`),A(!1),Y([]),W(),Q()}catch(e){f.error("Banka emirleri gönderilirken hata oluştu")}},className:"flex items-center gap-2 rounded bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700",children:[i.jsxDEV(r,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:736,columnNumber:15},this),"Gönder"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:732,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:725,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:691,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:680,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/BankOrders.tsx",lineNumber:416,columnNumber:5},this)}export{E as default};
