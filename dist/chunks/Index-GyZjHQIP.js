import{t as e,ao as t,r as s,j as a,C as r,c as i,X as n,U as l,k as d,q as c,a0 as o,b as m,s as u,g as x,E as h,A as p,a4 as g,aE as y,ba as j,p as v,b4 as f,b5 as w,e as N,o as b,n as _,J as k,$ as S,S as D,F as T,a9 as G}from"../assets/index-dW79Uy5k.js";import{u as z,t as C,o as O,n as I,s as A,e as M}from"./types-DWSxFkmy.js";import{V as B}from"./index-BPtWanD8.js";import{T as Y}from"./target-DsPB6sh5.js";import{P as E}from"./pen-square-DLfSiTnY.js";import{E as $}from"./eye-C2ZiGWXh.js";const H=e("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),F=e("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),K=(e,s)=>{const a=(null==e?void 0:e.message)||`Error in ${s}`;throw t.error(a),new Error(a)},P=()=>[{id:"task_1",title:"Yıllık Bütçe Raporu Hazırlama",description:"Dernek 2024 yılı bütçe raporunu hazırlamak ve sunuma uygun hale getirmek",assigned_to:"user2",assigned_by:"user1",due_date:new Date(Date.now()+6048e5).toISOString(),priority:"high",status:"in_progress",category:"Finans",estimated_hours:20,actual_hours:12,created_at:new Date(Date.now()-432e6).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString()},{id:"task_2",title:"Yeni Proje Önerisi Değerlendirmesi",description:"Gelen proje önerilerini teknik ve bütçe açısından değerlendirme",assigned_to:"user3",assigned_by:"user1",due_date:new Date(Date.now()+2592e5).toISOString(),priority:"medium",status:"pending",category:"Proje Yönetimi",estimated_hours:8,created_at:new Date(Date.now()-2592e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()},{id:"task_3",title:"Web Sitesi Güncelleme",description:"Dernek web sitesindeki güncel olmayan bilgileri güncelleme",assigned_to:"user1",assigned_by:"user2",due_date:new Date(Date.now()+12096e5).toISOString(),priority:"low",status:"pending",category:"İletişim",estimated_hours:4,created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString()},{id:"task_4",title:"Toplantı Salonu Rezervasyonu",description:"Gelecek ay yapılacak genel kurul için toplantı salonu rezerve etme",assigned_to:"user2",assigned_by:"user3",due_date:new Date(Date.now()-1728e5).toISOString(),priority:"urgent",status:"overdue",category:"Organizasyon",estimated_hours:2,actual_hours:1,created_at:new Date(Date.now()-864e6).toISOString(),updated_at:new Date(Date.now()-2592e5).toISOString()},{id:"task_5",title:"Bağışçı Teşekkür Mektupları",description:"Bu ay bağış yapan tüm kişilere teşekkür mektupları hazırlayıp gönderme",assigned_to:"user3",assigned_by:"user1",priority:"medium",status:"completed",category:"İletişim",estimated_hours:6,actual_hours:5,completion_notes:"Tüm mektuplar hazırlandı ve gönderildi. Pozitif geri dönüşler alındı.",completed_at:new Date(Date.now()-864e5).toISOString(),created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()}],L=e=>[{id:"comment_1",task_id:e,user_id:"user1",content:"Bu görev için ek kaynaklara ihtiyacımız olabilir. Finans ekibiyle görüştüm.",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString()},{id:"comment_2",task_id:e,user_id:"user2",content:"Öncelikli verilerimi topladım. Yakında raporlamaya başlayacağım.",created_at:new Date(Date.now()-36e5).toISOString(),updated_at:new Date(Date.now()-36e5).toISOString()},{id:"comment_3",task_id:e,user_id:"user3",content:"Harika! Herhangi bir desteğe ihtiyaç duyarsan bana ulaşabilirsin.",created_at:new Date(Date.now()-18e5).toISOString(),updated_at:new Date(Date.now()-18e5).toISOString()}],V={async getTasks(){try{return P()}catch(e){return K(e,"getTasks"),[]}},async getTask(e){try{return P().find(t=>t.id===e)||null}catch(t){return K(t,"getTask"),null}},async createTask(e){try{const s={id:`task_${Date.now()}`,title:e.title,description:e.description,assigned_to:e.assigned_to,assigned_by:"current_user",due_date:e.due_date,priority:e.priority,status:"pending",category:e.category,estimated_hours:e.estimated_hours,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return await this.createActivity(s.id,"created","Görev oluşturuldu"),await this.createActivity(s.id,"assigned","Görev atandı","",e.assigned_to),await this.createNotification(e.assigned_to,s.id,"assignment","Yeni Görev",`"${s.title}" görevi size atandı.`),t.success("Görev başarıyla oluşturuldu"),s}catch(s){throw K(s,"createTask"),s}},async updateTask(e,s){try{const a=P().find(t=>t.id===e);if(!a)throw new Error("Görev bulunamadı");const r={...a,...s,updated_at:(new Date).toISOString(),..."completed"!==s.status||a.completed_at?{}:{completed_at:(new Date).toISOString()}};return s.status&&s.status!==a.status&&(await this.createActivity(e,"status_changed",`Durum "${this.getStatusText(a.status)}" den "${this.getStatusText(s.status)}" ya değiştirildi`,a.status,s.status),"completed"===s.status&&await this.createNotification(a.assigned_by,e,"completion","Görev Tamamlandı",`"${a.title}" görevi tamamlandı.`)),t.success("Görev başarıyla güncellendi"),r}catch(a){throw K(a,"updateTask"),a}},async deleteTask(e){try{t.success("Görev başarıyla silindi")}catch(s){throw K(s,"deleteTask"),s}},async assignTask(e,t){try{const s=await this.getTask(e);if(!s)throw new Error("Görev bulunamadı");await this.updateTask(e,{assigned_to:t}),await this.createActivity(e,"assigned","Görev yeniden atandı",s.assigned_to,t),await this.createNotification(t,e,"assignment","Görev Atandı",`"${s.title}" görevi size atandı.`)}catch(s){throw K(s,"assignTask"),s}},async getTaskComments(e){try{return L(e)}catch(t){return K(t,"getTaskComments"),[]}},async addTaskComment(e,s){try{const a={id:`comment_${Date.now()}`,task_id:e,user_id:"current_user",content:s,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};await this.createActivity(e,"commented","Göreve yorum eklendi");const r=await this.getTask(e);return r&&await this.createNotification(r.assigned_to,e,"comment","Yeni Yorum",`"${r.title}" görevine yeni yorum eklendi.`),t.success("Yorum eklendi"),a}catch(a){throw K(a,"addTaskComment"),a}},async updateTaskComment(e,s){try{const a=L("task_1").find(t=>t.id===e);if(!a)throw new Error("Yorum bulunamadı");const r={...a,content:s,updated_at:(new Date).toISOString()};return t.success("Yorum güncellendi"),r}catch(a){throw K(a,"updateTaskComment"),a}},async deleteTaskComment(e){try{t.success("Yorum silindi")}catch(s){throw K(s,"deleteTaskComment"),s}},async getTaskAttachments(e){try{return(e=>[{id:"attachment_1",task_id:e,file_name:"budget_template.xlsx",file_url:"https://example.com/budget_template.xlsx",file_size:156780,uploaded_by:"user1",uploaded_at:new Date(Date.now()-2592e5).toISOString()},{id:"attachment_2",task_id:e,file_name:"requirements.pdf",file_url:"https://example.com/requirements.pdf",file_size:245890,uploaded_by:"user2",uploaded_at:new Date(Date.now()-864e5).toISOString()}])(e)}catch(t){return K(t,"getTaskAttachments"),[]}},async uploadTaskAttachment(e,s){try{const a=10485760,r=["image/jpeg","image/png","image/gif","image/webp","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];if(s.size>a)throw new Error("Dosya boyutu 10MB'den küçük olmalıdır");if(!r.includes(s.type))throw new Error("Desteklenmeyen dosya türü");const i=s.name.split(".").pop(),n=`${Date.now()}_${Math.random().toString(36).substring(2)}.${i}`,l={id:`attachment_${Date.now()}`,task_id:e,file_name:s.name,file_url:`https://example.com/${n}`,file_size:s.size,uploaded_by:"current_user",uploaded_at:(new Date).toISOString()};return t.success("Dosya yüklendi"),l}catch(a){throw K(a,"uploadTaskAttachment"),a}},async deleteTaskAttachment(e){try{t.success("Dosya silindi")}catch(s){throw K(s,"deleteTaskAttachment"),s}},async getTaskActivities(e){try{return(e=>[{id:"activity_1",task_id:e,user_id:"user1",activity_type:"created",description:"Görev oluşturuldu",created_at:new Date(Date.now()-432e6).toISOString()},{id:"activity_2",task_id:e,user_id:"user1",activity_type:"assigned",old_value:"",new_value:"user2",description:"Görev kullanıcıya atandı",created_at:new Date(Date.now()-432e6).toISOString()},{id:"activity_3",task_id:e,user_id:"user2",activity_type:"status_changed",old_value:"pending",new_value:"in_progress",description:'Durum "Bekliyor" den "Devam Ediyor" ya değiştirildi',created_at:new Date(Date.now()-2592e5).toISOString()},{id:"activity_4",task_id:e,user_id:"user3",activity_type:"commented",description:"Göreve yorum ekledi",created_at:new Date(Date.now()-864e5).toISOString()}])(e)}catch(t){return K(t,"getTaskActivities"),[]}},async createActivity(e,t,s,a,r){try{return{id:`activity_${Date.now()}`,task_id:e,user_id:"current_user",activity_type:t,old_value:a,new_value:r,description:s,created_at:(new Date).toISOString()}}catch(i){throw i}},async getTaskNotifications(e){try{return[{id:"notif_1",task_id:"task_1",user_id:e,type:"assignment",title:"Yeni Görev Atandı",message:'"Yıllık Bütçe Raporu Hazırlama" görevi size atandı.',is_read:!1,created_at:new Date(Date.now()-72e5).toISOString()},{id:"notif_2",task_id:"task_2",user_id:e,type:"due_reminder",title:"Görev Süresi Yaklaşıyor",message:'"Yeni Proje Önerisi Değerlendirmesi" görevinin süresi yaklaşıyor.',is_read:!1,created_at:new Date(Date.now()-36e5).toISOString()}]}catch(t){return K(t,"getTaskNotifications"),[]}},async createNotification(e,t,s,a,r){try{return{id:`notif_${Date.now()}`,task_id:t,user_id:e,type:s,title:a,message:r,is_read:!1,created_at:(new Date).toISOString()}}catch(i){throw i}},async markNotificationAsRead(e){},async getTaskStats(){try{const e=P();return{total:e.length,pending:e.filter(e=>"pending"===e.status).length,in_progress:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,overdue:e.filter(e=>"overdue"===e.status).length,completion_rate:e.length>0?e.filter(e=>"completed"===e.status).length/e.length*100:0}}catch(e){return K(e,"getTaskStats"),{total:0,pending:0,in_progress:0,completed:0,overdue:0,completion_rate:0}}},async searchTasks(e,t){try{let s=P();return e&&(s=s.filter(t=>{var s,a;return t.title.toLowerCase().includes(e.toLowerCase())||(null==(s=t.description)?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null==(a=t.category)?void 0:a.toLowerCase().includes(e.toLowerCase()))})),t&&(t.status&&(s=s.filter(e=>e.status===t.status)),t.priority&&(s=s.filter(e=>e.priority===t.priority)),t.assigned_to&&(s=s.filter(e=>e.assigned_to===t.assigned_to)),t.category&&(s=s.filter(e=>e.category===t.category))),s}catch(s){return K(s,"searchTasks"),[]}},async getTasksByUser(e){try{return P().filter(t=>t.assigned_to===e)}catch(t){return K(t,"getTasksByUser"),[]}},async getOverdueTasks(){try{const e=P(),t=new Date;return e.filter(e=>!(!e.due_date||"completed"===e.status||"cancelled"===e.status)&&new Date(e.due_date)<t)}catch(e){return K(e,"getOverdueTasks"),[]}},getStatusText:e=>({pending:"Bekliyor",in_progress:"Devam Ediyor",completed:"Tamamlandı",cancelled:"İptal Edildi",overdue:"Süresi Geçti"}[e]||e),getPriorityText:e=>({low:"Düşük",medium:"Orta",high:"Yüksek",urgent:"Acil"}[e]||e),getPriorityColor:e=>({low:"bg-blue-100 text-blue-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),getStatusColor:e=>({pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800",overdue:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800")},R=O({title:A().min(1,"Görev başlığı zorunludur"),description:A().optional(),assigned_to:A().min(1,"Görev atanacak kişi seçilmelidir"),due_date:A().optional(),priority:M(["low","medium","high","urgent"]),category:A().optional(),estimated_hours:I().min(0).optional()});function q({onSuccess:e,onCancel:t,initialData:m,isEditMode:u=!1,taskId:x}){const[h,p]=s.useState(!1),{register:g,handleSubmit:y,watch:j,formState:{errors:v}}=z({resolver:C(R),defaultValues:{title:(null==m?void 0:m.title)||"",description:(null==m?void 0:m.description)||"",assigned_to:(null==m?void 0:m.assigned_to)||"",due_date:(null==m?void 0:m.due_date)?new Date(m.due_date).toISOString().slice(0,16):"",priority:(null==m?void 0:m.priority)||"medium",category:(null==m?void 0:m.category)||"",estimated_hours:(null==m?void 0:m.estimated_hours)||0}}),f=j("priority"),w=e=>{switch(e){case"urgent":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-yellow-500 bg-yellow-50";case"low":return"border-blue-500 bg-blue-50";default:return"border-gray-300 bg-white"}},N=e=>{switch(e){case"urgent":return"Acil";case"high":return"Yüksek";case"medium":default:return"Orta";case"low":return"Düşük"}};return a.jsxs(r,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:u?"Görev Düzenle":"Yeni Görev Oluştur"}),t&&a.jsx(i,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(n,{className:"h-4 w-4"})})]}),a.jsxs("form",{onSubmit:y(async t=>{p(!0);try{const s={title:t.title,description:t.description,assigned_to:t.assigned_to,due_date:t.due_date?new Date(t.due_date).toISOString():void 0,priority:t.priority,category:t.category,estimated_hours:t.estimated_hours};u&&x?(await V.updateTask(x,s),B.success("Görev güncellendi")):(await V.createTask(s),B.success("Görev oluşturuldu")),null==e||e()}catch(s){B.error(u?"Görev güncellenirken hata oluştu":"Görev oluşturulurken hata oluştu")}finally{p(!1)}}),className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Görev Başlığı *"}),a.jsx("input",{...g("title"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Görev başlığını giriniz"}),v.title&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.title.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Açıklama"}),a.jsx("textarea",{...g("description"),rows:4,className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Görev açıklamasını giriniz"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"assigned_to",className:"block text-sm font-medium mb-2",children:[a.jsx(l,{className:"h-4 w-4 inline mr-2"}),"Atanan Kişi *"]}),a.jsxs("select",{...g("assigned_to"),className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",disabled:!1,children:[a.jsx("option",{value:"",children:"Kişi seçin"}),a.jsx("option",{value:"user1",children:"Ali Veli"}),a.jsx("option",{value:"user2",children:"Ayşe Demir"}),a.jsx("option",{value:"user3",children:"Mehmet Can"})]}),v.assigned_to&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.assigned_to.message})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"priority",className:"block text-sm font-medium mb-2",children:[a.jsx(H,{className:"h-4 w-4 inline mr-2"}),"Öncelik"]}),a.jsx("div",{className:"grid grid-cols-4 gap-1",children:["low","medium","high","urgent"].map(e=>a.jsxs("label",{className:`flex items-center justify-center p-2 border-2 rounded-md cursor-pointer transition-all ${f===e?w(e):"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("input",{...g("priority"),type:"radio",value:e,className:"sr-only"}),a.jsx("span",{className:"text-xs font-medium",children:N(e)})]},e))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"due_date",className:"block text-sm font-medium mb-2",children:[a.jsx(d,{className:"h-4 w-4 inline mr-2"}),"Bitiş Tarihi"]}),a.jsx("input",{...g("due_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium mb-2",children:[a.jsx(F,{className:"h-4 w-4 inline mr-2"}),"Kategori"]}),a.jsxs("select",{...g("category"),className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",children:[a.jsx("option",{value:"",children:"Kategori seçin"}),a.jsx("option",{value:"development",children:"Geliştirme"}),a.jsx("option",{value:"reporting",children:"Raporlama"}),a.jsx("option",{value:"database",children:"Veritabanı"}),a.jsx("option",{value:"design",children:"Tasarım"}),a.jsx("option",{value:"testing",children:"Test"}),a.jsx("option",{value:"documentation",children:"Dökümantasyon"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"estimated_hours",className:"block text-sm font-medium mb-2",children:[a.jsx(c,{className:"h-4 w-4 inline mr-2"}),"Tahmini Süre (Saat)"]}),a.jsx("input",{...g("estimated_hours",{valueAsNumber:!0}),type:"number",min:"0",step:"0.5",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[t&&a.jsx(i,{type:"button",variant:"outline",onClick:t,children:"İptal"}),a.jsxs(i,{type:"submit",disabled:h,children:[a.jsx(o,{className:"h-4 w-4 mr-2"}),h?"Kaydediliyor...":u?"Güncelle":"Oluştur"]})]})]})]})}function U({taskId:e,isOpen:t,onClose:o,onEdit:D,onDelete:T}){const[G,z]=s.useState(null),[C,O]=s.useState([]),[I,A]=s.useState([]),[M,$]=s.useState([]),[F,K]=s.useState(!1),[P,L]=s.useState("overview"),[R,q]=s.useState(""),[U,Z]=s.useState(!1),[J,W]=s.useState(!1),{user:Q}=m(),X=null==Q?void 0:Q.id;s.useEffect(()=>{t&&e&&ee()},[t,e]);const ee=async()=>{K(!0);try{const[t,s,a,r]=await Promise.all([V.getTask(e),V.getTaskComments(e),V.getTaskAttachments(e),V.getTaskActivities(e)]);z(t),O(s),A(a),$(r)}catch(t){B.error("Görev detayları yüklenirken hata oluştu")}finally{K(!1)}},te=async t=>{if(G)try{const s=await V.updateTask(e,{status:t});z(s);const a=await V.getTaskActivities(e);$(a),B.success("Görev durumu güncellendi")}catch(s){B.error("Görev durumu güncellenirken hata oluştu")}},se=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},ae=e=>{switch(e){case"created":return a.jsx(N,{className:"h-4 w-4 text-green-600"});case"assigned":return a.jsx(l,{className:"h-4 w-4 text-blue-600"});case"status_changed":return a.jsx(S,{className:"h-4 w-4 text-orange-600"});case"commented":return a.jsx(h,{className:"h-4 w-4 text-purple-600"});case"completed":return a.jsx(v,{className:"h-4 w-4 text-green-600"});case"due_date_changed":return a.jsx(d,{className:"h-4 w-4 text-yellow-600"});default:return a.jsx(g,{className:"h-4 w-4 text-gray-600"})}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Y,{className:"h-6 w-6 text-primary"}),a.jsx("h2",{className:"text-xl font-semibold",children:"Görev Detayları"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[G&&a.jsxs(i,{size:"sm",variant:"outline",onClick:()=>null==D?void 0:D(G),children:[a.jsx(E,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),a.jsxs(i,{size:"sm",variant:"outline",onClick:async()=>{if(G&&window.confirm("Bu görevi silmek istediğinizden emin misiniz?"))try{await V.deleteTask(e),B.success("Görev silindi"),null==T||T(e),o()}catch(t){B.error("Görev silinirken hata oluştu")}},className:"text-red-600 hover:text-red-700",children:[a.jsx(u,{className:"h-4 w-4 mr-2"}),"Sil"]}),a.jsx(i,{variant:"ghost",size:"sm",onClick:o,children:a.jsx(n,{className:"h-4 w-4"})})]})]}),F?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Yükleniyor..."})]}):G?a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"flex border-b overflow-x-auto",children:[{id:"overview",label:"Genel Bakış",icon:x},{id:"comments",label:"Yorumlar",icon:h,count:C.length},{id:"attachments",label:"Dosyalar",icon:p,count:I.length},{id:"activity",label:"Aktivite",icon:g,count:M.length}].map(e=>a.jsxs("button",{onClick:()=>L(e.id),className:"flex items-center px-4 py-3 border-b-2 transition-colors whitespace-nowrap "+(P===e.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[a.jsx(e.icon,{className:"h-4 w-4 mr-2"}),e.label,void 0!==e.count&&a.jsx("span",{className:"ml-2 bg-muted text-muted-foreground text-xs px-2 py-1 rounded-full",children:e.count})]},e.id))}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===P&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:G.title}),G.description&&a.jsx("p",{className:"text-muted-foreground text-lg",children:G.description})]}),G.assigned_to===X&&a.jsxs("div",{className:"flex space-x-2 ml-4",children:["pending"===G.status&&a.jsxs(i,{size:"sm",onClick:()=>te("in_progress"),className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(y,{className:"h-4 w-4 mr-2"}),"Başlat"]}),"in_progress"===G.status&&a.jsxs(i,{size:"sm",variant:"outline",onClick:()=>te("pending"),children:[a.jsx(j,{className:"h-4 w-4 mr-2"}),"Duraklat"]}),("pending"===G.status||"in_progress"===G.status)&&a.jsxs(i,{size:"sm",onClick:()=>te("completed"),className:"bg-green-600 hover:bg-green-700",children:[a.jsx(v,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(r,{className:"p-4",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Durum ve Öncelik"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Durum"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"completed":return a.jsx(v,{className:"h-4 w-4 text-green-600"});case"in_progress":return a.jsx(y,{className:"h-4 w-4 text-blue-600"});case"overdue":return a.jsx(k,{className:"h-4 w-4 text-red-600"});case"cancelled":return a.jsx(n,{className:"h-4 w-4 text-gray-600"});default:return a.jsx(c,{className:"h-4 w-4 text-yellow-600"})}})(G.status),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V.getStatusColor(G.status)}`,children:V.getStatusText(G.status)})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Öncelik"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"urgent":return a.jsx(k,{className:"h-4 w-4 text-red-600"});case"high":return a.jsx(H,{className:"h-4 w-4 text-orange-600"});case"medium":return a.jsx(H,{className:"h-4 w-4 text-yellow-600"});default:return a.jsx(H,{className:"h-4 w-4 text-blue-600"})}})(G.priority),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V.getPriorityColor(G.priority)}`,children:V.getPriorityText(G.priority)})]})]})]})]}),a.jsxs(r,{className:"p-4",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Atama ve Tarihler"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Atanan"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(l,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:"text-sm",children:["Kullanıcı ",G.assigned_to]}),G.assigned_to===X&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Benim"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Oluşturan"}),a.jsxs("span",{className:"text-sm",children:["Kullanıcı ",G.assigned_by]})]}),G.due_date&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Bitiş Tarihi"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(d,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm",children:f(new Date(G.due_date),"dd MMM yyyy",{locale:w})})]})]})]})]}),(G.estimated_hours||G.actual_hours)&&a.jsxs(r,{className:"p-4",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Zaman Takibi"}),a.jsxs("div",{className:"space-y-3",children:[G.estimated_hours&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tahmini Süre"}),a.jsxs("span",{className:"text-sm",children:[G.estimated_hours," saat"]})]}),G.actual_hours&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Harcanan Süre"}),a.jsxs("span",{className:"text-sm",children:[G.actual_hours," saat"]})]}),G.estimated_hours&&G.actual_hours&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Verimlilik"}),a.jsxs("span",{className:"text-sm "+(G.actual_hours<=G.estimated_hours?"text-green-600":"text-red-600"),children:[(G.estimated_hours/G.actual_hours*100).toFixed(0),"%"]})]})]})]}),a.jsxs(r,{className:"p-4",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Kategori ve Tarihler"}),a.jsxs("div",{className:"space-y-3",children:[G.category&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Kategori"}),a.jsx("span",{className:"text-sm bg-gray-100 text-gray-800 px-2 py-1 rounded",children:G.category})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Oluşturulma"}),a.jsx("span",{className:"text-sm",children:f(new Date(G.created_at),"dd MMM yyyy HH:mm",{locale:w})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Son Güncelleme"}),a.jsx("span",{className:"text-sm",children:f(new Date(G.updated_at),"dd MMM yyyy HH:mm",{locale:w})})]}),G.completed_at&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tamamlanma"}),a.jsx("span",{className:"text-sm text-green-600",children:f(new Date(G.completed_at),"dd MMM yyyy HH:mm",{locale:w})})]})]})]})]}),G.completion_notes&&a.jsxs(r,{className:"p-4",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Tamamlanma Notları"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:G.completion_notes})]})]}),"comments"===P&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["Yorumlar (",C.length,")"]}),!U&&a.jsxs(i,{size:"sm",onClick:()=>Z(!0),children:[a.jsx(N,{className:"h-4 w-4 mr-2"}),"Yorum Ekle"]})]}),U&&a.jsx(r,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("textarea",{value:R,onChange:e=>q(e.target.value),placeholder:"Yorumunuzu yazın...",className:"w-full h-24 p-3 border rounded-md resize-none"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(i,{size:"sm",onClick:async()=>{if(R.trim())try{const t=await V.addTaskComment(e,R);O(e=>[...e,t]),q(""),Z(!1);const s=await V.getTaskActivities(e);$(s)}catch(t){B.error("Yorum eklenirken hata oluştu")}},children:[a.jsx(b,{className:"h-4 w-4 mr-2"}),"Gönder"]}),a.jsx(i,{size:"sm",variant:"outline",onClick:()=>{Z(!1),q("")},children:"İptal"})]})]})}),C.length>0?a.jsx("div",{className:"space-y-3",children:C.map(e=>a.jsx(r,{className:"p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"U"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsxs("span",{className:"font-medium text-sm",children:["Kullanıcı ",e.user_id]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:f(new Date(e.created_at),"dd MMM yyyy HH:mm",{locale:w})})]}),a.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:e.content})]})]})},e.id))}):!U&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(h,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Henüz yorum eklenmemiş"})]})]}),"attachments"===P&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["Dosyalar (",I.length,")"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:async t=>{var s;const a=null==(s=t.target.files)?void 0:s[0];if(a){W(!0);try{const t=await V.uploadTaskAttachment(e,a);A(e=>[...e,t])}catch(r){B.error("Dosya yüklenirken hata oluştu")}finally{W(!1),t.target.value=""}}},disabled:J}),a.jsxs(i,{size:"sm",onClick:()=>{var e;return null==(e=document.getElementById("file-upload"))?void 0:e.click()},disabled:J,children:[a.jsx(N,{className:"h-4 w-4 mr-2"}),J?"Yükleniyor...":"Dosya Ekle"]})]})]}),I.length>0?a.jsx("div",{className:"grid gap-3",children:I.map(e=>a.jsx(r,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(p,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:e.file_name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[se(e.file_size)," • Yüklendi: ",f(new Date(e.uploaded_at),"dd MMM yyyy",{locale:w})," • Yükleyen: Kullanıcı ",e.uploaded_by]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(i,{size:"sm",variant:"outline",onClick:()=>window.open(e.file_url,"_blank"),children:[a.jsx(_,{className:"h-4 w-4 mr-2"}),"İndir"]}),a.jsx(i,{size:"sm",variant:"outline",onClick:()=>(async e=>{if(window.confirm("Bu dosyayı silmek istediğinizden emin misiniz?"))try{await V.deleteTaskAttachment(e),A(t=>t.filter(t=>t.id!==e))}catch(t){B.error("Dosya silinirken hata oluştu")}})(e.id),className:"text-red-600 hover:text-red-700",children:a.jsx(u,{className:"h-4 w-4"})})]})]})},e.id))}):a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(p,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Henüz dosya eklenmemiş"})]})]}),"activity"===P&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["Aktivite Geçmişi (",M.length,")"]}),M.length>0?a.jsx("div",{className:"space-y-3",children:M.map(e=>a.jsx(r,{className:"p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"mt-0.5",children:ae(e.activity_type)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsxs("span",{className:"font-medium text-sm",children:["Kullanıcı ",e.user_id]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:f(new Date(e.created_at),"dd MMM yyyy HH:mm",{locale:w})})]}),a.jsx("p",{className:"text-sm text-gray-800",children:e.description}),e.old_value&&e.new_value&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("span",{className:"line-through",children:e.old_value})," → ",a.jsx("span",{className:"font-medium",children:e.new_value})]})]})]})},e.id))}):a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(g,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Henüz aktivite kaydı yok"})]})]})]})]}):a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Görev bulunamadı"})]})}):null}function Z(){const[e,t]=s.useState([]),[n,d]=s.useState(!0),[o,u]=s.useState(""),[x,h]=s.useState("all"),[p,g]=s.useState("all"),[j,b]=s.useState("all"),[_,S]=s.useState(!1),[z,C]=s.useState(null),[O,I]=s.useState(!1),[A,M]=s.useState(null),{user:Y}=m(),E=null==Y?void 0:Y.id;s.useEffect(()=>{H()},[]);const H=async()=>{d(!0);try{const e=await V.getTasks();t(e)}catch(e){B.error("Görevler yüklenirken hata oluştu")}finally{d(!1)}},F=async(e,s)=>{try{const a=await V.updateTask(e,{status:s});t(t=>t.map(t=>t.id===e?a:t)),B.success("Görev durumu güncellendi")}catch(a){B.error("Görev durumu güncellenirken hata oluştu")}},K=e.filter(e=>{var t;const s=e.title.toLowerCase().includes(o.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(o.toLowerCase())),a="all"===x||e.status===x,r="all"===p||e.priority===p,i="all"===j||"me"===j&&e.assigned_to===E||"others"===j&&e.assigned_to!==E;return s&&a&&r&&i}),P={total:e.length,inProgress:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,overdue:e.filter(e=>"overdue"===e.status).length,myTasks:e.filter(e=>e.assigned_to===E).length},L=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},R=e=>{switch(e){case"urgent":return"Acil";case"high":return"Yüksek";case"medium":default:return"Orta";case"low":return"Düşük"}},Z=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}},J=e=>{switch(e){case"completed":return"Tamamlandı";case"in_progress":return"Devam Ediyor";case"overdue":return"Süresi Geçti";case"cancelled":return"İptal Edildi";default:return"Bekliyor"}};return _?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(i,{variant:"outline",onClick:()=>{S(!1),M(null)},children:"← Geri"}),a.jsx("h1",{className:"text-3xl font-bold",children:A?"Görev Düzenle":"Yeni Görev"})]}),a.jsx(q,{onSuccess:()=>{S(!1),M(null),H()},onCancel:()=>{S(!1),M(null)},initialData:A||void 0,isEditMode:!!A,taskId:null==A?void 0:A.id})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Görevler"}),a.jsx("p",{className:"text-muted-foreground",children:"Görev atama ve takip sistemi"})]}),a.jsxs(i,{onClick:()=>S(!0),children:[a.jsx(N,{className:"h-4 w-4 mr-2"}),"Yeni Görev"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsx(r,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Görev"}),a.jsx("p",{className:"text-2xl font-bold",children:P.total})]}),a.jsx(v,{className:"h-8 w-8 text-blue-500"})]})}),a.jsx(r,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Devam Eden"}),a.jsx("p",{className:"text-2xl font-bold",children:P.inProgress})]}),a.jsx(c,{className:"h-8 w-8 text-orange-500"})]})}),a.jsx(r,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tamamlanan"}),a.jsx("p",{className:"text-2xl font-bold",children:P.completed})]}),a.jsx(v,{className:"h-8 w-8 text-green-500"})]})}),a.jsx(r,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Süresi Geçen"}),a.jsx("p",{className:"text-2xl font-bold",children:P.overdue})]}),a.jsx(k,{className:"h-8 w-8 text-red-500"})]})}),a.jsx(r,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Benim Görevlerim"}),a.jsx("p",{className:"text-2xl font-bold",children:P.myTasks})]}),a.jsx(l,{className:"h-8 w-8 text-purple-500"})]})})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Görev ara...",value:o,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background"})]})}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsxs("select",{value:x,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[a.jsx("option",{value:"all",children:"Tüm Durumlar"}),a.jsx("option",{value:"pending",children:"Bekliyor"}),a.jsx("option",{value:"in_progress",children:"Devam Ediyor"}),a.jsx("option",{value:"completed",children:"Tamamlandı"}),a.jsx("option",{value:"overdue",children:"Süresi Geçti"}),a.jsx("option",{value:"cancelled",children:"İptal Edildi"})]}),a.jsxs("select",{value:p,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[a.jsx("option",{value:"all",children:"Tüm Öncelikler"}),a.jsx("option",{value:"urgent",children:"Acil"}),a.jsx("option",{value:"high",children:"Yüksek"}),a.jsx("option",{value:"medium",children:"Orta"}),a.jsx("option",{value:"low",children:"Düşük"})]}),a.jsxs("select",{value:j,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[a.jsx("option",{value:"all",children:"Tüm Atamalar"}),a.jsx("option",{value:"me",children:"Benim Görevlerim"}),a.jsx("option",{value:"others",children:"Diğer Görevler"})]}),a.jsxs(i,{variant:"outline",children:[a.jsx(T,{className:"h-4 w-4 mr-2"}),"Filtreler"]})]})]}),n?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Görevler yükleniyor..."})]}):a.jsx(r,{className:"overflow-hidden",children:K.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"border-b bg-muted/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 font-medium",children:"Görev"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Atanan"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Bitiş Tarihi"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Öncelik"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"Durum"}),a.jsx("th",{className:"text-left p-4 font-medium",children:"İşlemler"})]})}),a.jsx("tbody",{children:K.map(e=>a.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:e.title}),e.description&&a.jsx("div",{className:"text-sm text-muted-foreground mt-1 truncate max-w-xs",children:e.description}),e.category&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1 capitalize",children:e.category})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(l,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:"text-sm",children:["Kullanıcı ",e.assigned_to]}),e.assigned_to===E&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Benim"})]})}),a.jsx("td",{className:"p-4",children:e.due_date?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(c,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm",children:f(new Date(e.due_date),"dd MMM yyyy",{locale:w})})]}):a.jsx("span",{className:"text-sm text-muted-foreground",children:"Belirsiz"})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(e.priority)}`,children:R(e.priority)})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Z(e.status)}`,children:J(e.status)})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(i,{size:"sm",variant:"outline",onClick:()=>(e=>{C(e),I(!0)})(e),children:[a.jsx($,{className:"h-4 w-4 mr-1"}),"Detay"]}),e.assigned_to===E&&a.jsxs(a.Fragment,{children:["pending"===e.status&&a.jsx(i,{size:"sm",variant:"outline",onClick:()=>F(e.id,"in_progress"),className:"text-blue-600 hover:text-blue-700",children:a.jsx(y,{className:"h-4 w-4"})}),("pending"===e.status||"in_progress"===e.status)&&a.jsx(i,{size:"sm",variant:"outline",onClick:()=>F(e.id,"completed"),className:"text-green-600 hover:text-green-700",children:a.jsx(G,{className:"h-4 w-4"})})]})]})})]},e.id))})]})}):a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:o||"all"!==x||"all"!==p||"all"!==j?"Arama kriterlerine uygun görev bulunamadı":"Henüz görev oluşturulmamış"})}),z&&a.jsx(U,{taskId:z.id,isOpen:O,onClose:()=>{I(!1),C(null)},onEdit:e=>{M(e),S(!0),I(!1)},onDelete:e=>{t(t=>t.filter(t=>t.id!==e))}})]})}export{Z as default};
