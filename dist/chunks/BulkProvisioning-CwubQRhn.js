import{r as e,j as t}from"../assets/index-C7XW2vnU.js";import{D as a}from"./DataTable-BR_3tqT5.js";import{R as s,B as l,C as r,X as n,Y as i,T as d,a as o,P as m,b as u,c}from"./PieChart-DKeYt9dB.js";import{M as x}from"./Modal-QxY_FyG0.js";const p=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function h({requests:a}){const x=e.useMemo(()=>{const e=a.length,t=a.filter(e=>["taslak","gönderildi","işlemde"].includes(e.status)).length,s=a.filter(e=>"onaylandı"===e.approvalStatus).length,l=a.filter(e=>"tamamlandı"===e.status).length,r=a.reduce((e,t)=>e+t.totalAmount,0),n=a.reduce((e,t)=>e+t.paidAmount,0);return{totalRequests:e,pendingRequests:t,approvedRequests:s,completedRequests:l,totalRequestedAmount:r,totalPaidAmount:n,totalRemainingAmount:a.reduce((e,t)=>e+t.remainingAmount,0),totalBeneficiaries:a.reduce((e,t)=>e+t.beneficiaryCount,0),averageRequestAmount:e>0?r/e:0,paymentCompletionRate:r>0?n/r*100:0}},[a]),h=e.useMemo(()=>{const e=a.reduce((e,t)=>(e[t.department]=(e[t.department]||0)+t.totalAmount,e),{});return Object.entries(e).map(([e,t])=>({name:e,value:t}))},[a]),y=e.useMemo(()=>{const e=a.reduce((e,t)=>(e[t.priority]=(e[t.priority]||0)+1,e),{});return Object.entries(e).map(([e,t])=>({name:e,value:t}))},[a]),g=e.useMemo(()=>{const e=a.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{});return Object.entries(e).map(([e,t])=>({name:e,value:t}))},[a]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Talep"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:x.totalRequests}),t.jsxs("p",{className:"text-xs text-blue-600",children:["Beklemede: ",x.pendingRequests]})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Toplam Tutar"}),t.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[x.totalRequestedAmount.toLocaleString("tr-TR")," ₺"]}),t.jsxs("p",{className:"text-xs text-green-600",children:["Ort: ",x.averageRequestAmount.toLocaleString("tr-TR")," ₺"]})]}),t.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-600",children:"Ödeme Durumu"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:["%",x.paymentCompletionRate.toFixed(1)]}),t.jsxs("p",{className:"text-xs text-yellow-600",children:["Ödenen: ",x.totalPaidAmount.toLocaleString("tr-TR")," ₺"]})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Faydalanıcı"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:x.totalBeneficiaries}),t.jsxs("p",{className:"text-xs text-purple-600",children:["Onaylanan: ",x.approvedRequests]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Departmana Göre Analiz"}),t.jsx(s,{width:"100%",height:300,children:t.jsxs(l,{data:h,children:[t.jsx(r,{strokeDasharray:"3 3"}),t.jsx(n,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),t.jsx(i,{tickFormatter:e=>`${(e/1e3).toFixed(0)}K`,fontSize:12}),t.jsx(d,{formatter:e=>[`${Number(e).toLocaleString("tr-TR")} ₺`,"Tutar"]}),t.jsx(o,{dataKey:"value",fill:"#3B82F6"})]})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Öncelik Dağılımı"}),t.jsx(s,{width:"100%",height:300,children:t.jsxs(m,{children:[t.jsx(u,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} (${(t?100*t:0).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:y.map((e,a)=>t.jsx(c,{fill:p[a%p.length]},`cell-${a}`))}),t.jsx(d,{})]})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border col-span-2",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Durum Analizi"}),t.jsx(s,{width:"100%",height:300,children:t.jsxs(l,{data:g,children:[t.jsx(r,{strokeDasharray:"3 3"}),t.jsx(n,{dataKey:"name",fontSize:12}),t.jsx(i,{fontSize:12}),t.jsx(d,{}),t.jsx(o,{dataKey:"value",fill:"#10B981"})]})})]})]})]})}function y({query:e,setQuery:a,statusFilter:s,setStatusFilter:l,priorityFilter:r,setPriorityFilter:n,departmentFilter:i,setDepartmentFilter:d,approvalFilter:o,setApprovalFilter:m,paymentFilter:u,setPaymentFilter:c,dateFilter:x,setDateFilter:p}){return t.jsxs("div",{className:"bg-white p-4 rounded-lg border mb-6",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Arama"}),t.jsx("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:"Talep no, kişi, amaç...",className:"w-full border rounded px-3 py-2 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Durum"}),t.jsxs("select",{value:s,onChange:e=>l(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Tümü"}),t.jsx("option",{value:"taslak",children:"Taslak"}),t.jsx("option",{value:"gönderildi",children:"Gönderildi"}),t.jsx("option",{value:"işlemde",children:"İşlemde"}),t.jsx("option",{value:"tamamlandı",children:"Tamamlandı"}),t.jsx("option",{value:"iptal",children:"İptal"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),t.jsxs("select",{value:r,onChange:e=>n(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Tümü"}),t.jsx("option",{value:"düşük",children:"Düşük"}),t.jsx("option",{value:"normal",children:"Normal"}),t.jsx("option",{value:"yüksek",children:"Yüksek"}),t.jsx("option",{value:"acil",children:"Acil"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departman"}),t.jsx("input",{type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"Departman adı...",className:"w-full border rounded px-3 py-2 text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Durumu"}),t.jsxs("select",{value:o,onChange:e=>m(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Tümü"}),t.jsx("option",{value:"beklemede",children:"Beklemede"}),t.jsx("option",{value:"onaylandı",children:"Onaylandı"}),t.jsx("option",{value:"reddedildi",children:"Reddedildi"}),t.jsx("option",{value:"revizyon",children:"Revizyon"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ödeme Durumu"}),t.jsxs("select",{value:u,onChange:e=>c(e.target.value),className:"w-full border rounded px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Tümü"}),t.jsx("option",{value:"beklemede",children:"Beklemede"}),t.jsx("option",{value:"kısmi",children:"Kısmi"}),t.jsx("option",{value:"tamamlandı",children:"Tamamlandı"}),t.jsx("option",{value:"iptal",children:"İptal"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tarih Filtresi"}),t.jsx("input",{type:"date",value:x,onChange:e=>p(e.target.value),className:"w-full border rounded px-3 py-2 text-sm"})]})]})]})}function g(e){return[{key:"requestId",header:"Talep No",render:(t,a)=>{const s=e.find(e=>e.id===a.requestId);return s?s.requestNumber:"Bilinmiyor"}},{key:"itemType",header:"Tip",render:(e,a)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("nakit"===a.itemType?"bg-green-100 text-green-800":"gıda"===a.itemType?"bg-blue-100 text-blue-800":"giyim"===a.itemType?"bg-purple-100 text-purple-800":"barınma"===a.itemType?"bg-orange-100 text-orange-800":"sağlık"===a.itemType?"bg-red-100 text-red-800":"eğitim"===a.itemType?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:a.itemType})},{key:"itemName",header:"Kalem Adı"},{key:"description",header:"Açıklama"},{key:"quantity",header:"Miktar/Birim",render:(e,t)=>`${t.quantity} ${t.unit}`},{key:"unitPrice",header:"Birim/Toplam",render:(e,a)=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("div",{children:[a.unitPrice.toLocaleString("tr-TR")," ₺"]}),t.jsxs("div",{className:"text-gray-500 font-medium",children:[a.totalPrice.toLocaleString("tr-TR")," ₺"]})]})},{key:"supplier",header:"Tedarikçi"},{key:"deliveryDate",header:"Teslimat",render:(e,t)=>t.deliveryDate?new Date(t.deliveryDate).toLocaleDateString("tr-TR"):"-"},{key:"status",header:"Durum",render:(e,a)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("teslim-edildi"===a.status?"bg-green-100 text-green-800":"sipariş-verildi"===a.status?"bg-blue-100 text-blue-800":"onaylandı"===a.status?"bg-yellow-100 text-yellow-800":"beklemede"===a.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:a.status})}]}function b(e){return[{key:"requestId",header:"Talep No",render:(t,a)=>{const s=e.find(e=>e.id===a.requestId);return s?s.requestNumber:"Bilinmiyor"}},{key:"paymentDate",header:"Ödeme Tarihi",render:(e,t)=>new Date(t.paymentDate).toLocaleDateString("tr-TR")},{key:"amount",header:"Tutar",render:(e,t)=>`${t.amount.toLocaleString("tr-TR")} ${t.currency}`},{key:"paymentMethod",header:"Ödeme Yöntemi",render:(e,a)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("nakit"===a.paymentMethod?"bg-green-100 text-green-800":"banka"===a.paymentMethod?"bg-blue-100 text-blue-800":"kredi-kartı"===a.paymentMethod?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"),children:a.paymentMethod})},{key:"referenceNumber",header:"Referans No"},{key:"paidBy",header:"Ödeyen"},{key:"receivedBy",header:"Alan"},{key:"receiptNumber",header:"Makbuz No"},{key:"status",header:"Durum",render:(e,a)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("tamamlandı"===a.status?"bg-green-100 text-green-800":"beklemede"===a.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:a.status})}]}function j({selectedRequest:e,items:s,payments:l,requests:r,isItemsModalOpen:n,setIsItemsModalOpen:i,isPaymentsModalOpen:d,setIsPaymentsModalOpen:o,isApprovalModalOpen:m,setIsApprovalModalOpen:u,isAddModalOpen:c,setIsAddModalOpen:p,onApprovalSubmit:h}){const y=g(r),j=b(r);return t.jsxs(t.Fragment,{children:[t.jsx(x,{isOpen:n,onClose:()=>i(!1),title:`Kalemler - ${null==e?void 0:e.requestNumber}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Talep Bilgileri"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:["Amaç: ",null==e?void 0:e.purpose]}),t.jsxs("div",{children:["Toplam Tutar: ",null==e?void 0:e.totalAmount.toLocaleString("tr-TR")," ₺"]}),t.jsxs("div",{children:["Faydalanıcı: ",null==e?void 0:e.beneficiaryCount," kişi"]}),t.jsxs("div",{children:["Hedef Tarih: ",null==e?void 0:e.targetDate]})]})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.jsx(a,{columns:y,data:s.filter(t=>t.requestId===(null==e?void 0:e.id))})})]})}),t.jsx(x,{isOpen:d,onClose:()=>o(!1),title:`Ödemeler - ${null==e?void 0:e.requestNumber}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Ödeme Özeti"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Toplam Tutar:"}),t.jsxs("div",{className:"font-medium",children:[null==e?void 0:e.totalAmount.toLocaleString("tr-TR")," ₺"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Ödenen:"}),t.jsxs("div",{className:"font-medium text-green-600",children:[null==e?void 0:e.paidAmount.toLocaleString("tr-TR")," ₺"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Kalan:"}),t.jsxs("div",{className:"font-medium text-orange-600",children:[null==e?void 0:e.remainingAmount.toLocaleString("tr-TR")," ₺"]})]})]})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.jsx(a,{columns:j,data:l.filter(t=>t.requestId===(null==e?void 0:e.id))})})]})}),t.jsx(x,{isOpen:m,onClose:()=>u(!1),title:`Talep Onayı - ${null==e?void 0:e.requestNumber}`,children:t.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget),a={status:t.get("status"),notes:t.get("notes")};null==h||h(a),u(!1)},className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Talep Detayları"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:["Talep Eden: ",null==e?void 0:e.requestedBy]}),t.jsxs("div",{children:["Departman: ",null==e?void 0:e.department]}),t.jsxs("div",{children:["Amaç: ",null==e?void 0:e.purpose]}),t.jsxs("div",{children:["Tutar: ",null==e?void 0:e.totalAmount.toLocaleString("tr-TR")," ₺"]}),t.jsxs("div",{children:["Faydalanıcı: ",null==e?void 0:e.beneficiaryCount," kişi"]}),t.jsxs("div",{children:["Hedef Tarih: ",null==e?void 0:e.targetDate]})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("span",{className:"text-gray-600",children:"Açıklama:"}),t.jsx("p",{className:"text-sm mt-1",children:null==e?void 0:e.description})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Durumu"}),t.jsxs("select",{name:"status",className:"w-full border rounded px-3 py-2",required:!0,children:[t.jsx("option",{value:"onaylandı",children:"Onayla"}),t.jsx("option",{value:"reddedildi",children:"Reddet"}),t.jsx("option",{value:"revizyon",children:"Revizyon İste"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Onay Notları"}),t.jsx("textarea",{name:"notes",className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Onay/ret gerekçesi...",required:!0})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",children:"İptal"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Kaydet"})]})]})}),t.jsx(x,{isOpen:c,onClose:()=>p(!1),title:"Yeni Provizyon Talebi",children:t.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.currentTarget);t.get("title"),t.get("description"),t.get("priority"),t.get("type"),t.get("amount"),(new Date).toISOString();try{alert("Talep başarıyla eklendi!"),p(!1)}catch(a){alert("Talep eklenirken hata oluştu!")}},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Talep Başlığı"}),t.jsx("input",{type:"text",name:"title",className:"w-full border rounded px-3 py-2",placeholder:"Talep başlığını girin...",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Departman"}),t.jsxs("select",{name:"department",className:"w-full border rounded px-3 py-2",required:!0,children:[t.jsx("option",{value:"",children:"Departman seçin..."}),t.jsx("option",{value:"IT",children:"IT"}),t.jsx("option",{value:"İnsan Kaynakları",children:"İnsan Kaynakları"}),t.jsx("option",{value:"Muhasebe",children:"Muhasebe"}),t.jsx("option",{value:"Satış",children:"Satış"}),t.jsx("option",{value:"Pazarlama",children:"Pazarlama"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"}),t.jsxs("select",{name:"priority",className:"w-full border rounded px-3 py-2",required:!0,children:[t.jsx("option",{value:"",children:"Öncelik seçin..."}),t.jsx("option",{value:"Düşük",children:"Düşük"}),t.jsx("option",{value:"Orta",children:"Orta"}),t.jsx("option",{value:"Yüksek",children:"Yüksek"}),t.jsx("option",{value:"Acil",children:"Acil"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama"}),t.jsx("textarea",{name:"description",className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Talep açıklaması...",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bütçe (TL)"}),t.jsx("input",{type:"number",name:"budget",className:"w-full border rounded px-3 py-2",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",children:"İptal"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Talep Oluştur"})]})]})})]})}function v(){const[s]=e.useState([]),[l]=e.useState([]),[r]=e.useState([]),[n,i]=e.useState(""),[d,o]=e.useState(""),[m,u]=e.useState(""),[c,x]=e.useState(""),[p,v]=e.useState(""),[N,k]=e.useState(""),[f,T]=e.useState(""),[w,S]=e.useState("requests"),[D,q]=e.useState(!1),[A,F]=e.useState(!1),[R,C]=e.useState(!1),[O,M]=e.useState(!1),[L,I]=e.useState(null),B=e.useMemo(()=>s.filter(e=>{const t=JSON.stringify(e).toLowerCase().includes(n.toLowerCase()),a=!d||e.status===d,s=!m||e.priority===m,l=!c||e.department.toLowerCase().includes(c.toLowerCase()),r=!p||e.approvalStatus===p,i=!N||e.paymentStatus===N,o=!f||e.requestDate.includes(f);return t&&a&&s&&l&&r&&i&&o}),[s,n,d,m,c,p,N,f]),P=e.useMemo(()=>l.filter(e=>JSON.stringify(e).toLowerCase().includes(n.toLowerCase())),[l,n]),z=e.useMemo(()=>r.filter(e=>JSON.stringify(e).toLowerCase().includes(n.toLowerCase())),[r,n]),K=function({onEdit:e,onViewItems:a,onViewPayments:s,onApproval:l}){return[{key:"requestNumber",header:"Talep No"},{key:"requestDate",header:"Tarih",render:(e,t)=>new Date(t.requestDate).toLocaleDateString("tr-TR")},{key:"requestedBy",header:"Talep Eden"},{key:"department",header:"Departman"},{key:"priority",header:"Öncelik",render:(e,a)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("acil"===a.priority?"bg-red-100 text-red-800":"yüksek"===a.priority?"bg-orange-100 text-orange-800":"normal"===a.priority?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:a.priority})},{key:"totalAmount",header:"Tutar/Faydalanıcı",render:(e,a)=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("div",{className:"font-medium",children:[a.totalAmount.toLocaleString("tr-TR")," ₺"]}),t.jsxs("div",{className:"text-gray-500",children:[a.beneficiaryCount," kişi"]})]})},{key:"purpose",header:"Amaç"},{key:"targetDate",header:"Hedef Tarih",render:(e,t)=>new Date(t.targetDate).toLocaleDateString("tr-TR")},{key:"approvalStatus",header:"Onay Durumu",render:(e,a)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("onaylandı"===a.approvalStatus?"bg-green-100 text-green-800":"beklemede"===a.approvalStatus?"bg-yellow-100 text-yellow-800":"reddedildi"===a.approvalStatus?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:a.approvalStatus})},{key:"paymentStatus",header:"Ödeme Durumu",render:(e,a)=>t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("tamamlandı"===a.paymentStatus?"bg-green-100 text-green-800":"kısmi"===a.paymentStatus?"bg-yellow-100 text-yellow-800":"beklemede"===a.paymentStatus?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:a.paymentStatus}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.paidAmount.toLocaleString("tr-TR")," / ",a.totalAmount.toLocaleString("tr-TR")," ₺"]})]})},{key:"status",header:"Durum",render:(e,a)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("tamamlandı"===a.status?"bg-green-100 text-green-800":"işlemde"===a.status?"bg-blue-100 text-blue-800":"gönderildi"===a.status?"bg-yellow-100 text-yellow-800":"taslak"===a.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:a.status})},{key:"id",header:"İşlemler",render:(r,n)=>t.jsxs("div",{className:"flex gap-1 text-xs",children:[e&&t.jsx("button",{onClick:()=>e(n),className:"text-blue-600 hover:text-blue-800 px-2 py-1 rounded",children:"Düzenle"}),t.jsx("button",{onClick:()=>a(n),className:"text-green-600 hover:text-green-800 px-2 py-1 rounded",children:"Kalemler"}),t.jsx("button",{onClick:()=>s(n),className:"text-purple-600 hover:text-purple-800 px-2 py-1 rounded",children:"Ödemeler"}),"beklemede"===n.approvalStatus&&t.jsx("button",{onClick:()=>l(n),className:"text-orange-600 hover:text-orange-800 px-2 py-1 rounded",children:"Onayla"})]})}]}({onViewItems:e=>{I(e),q(!0)},onViewPayments:e=>{I(e),F(!0)},onApproval:e=>{I(e),C(!0)}}),$=g(s),Y=b(s);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Toplu Provizyon Alma"}),t.jsxs("div",{className:"flex border rounded",children:[t.jsx("button",{onClick:()=>S("requests"),className:"px-4 py-2 text-sm "+("requests"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Talepler"}),t.jsx("button",{onClick:()=>S("items"),className:"px-4 py-2 text-sm "+("items"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Kalemler"}),t.jsx("button",{onClick:()=>S("payments"),className:"px-4 py-2 text-sm "+("payments"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Ödemeler"}),t.jsx("button",{onClick:()=>S("analytics"),className:"px-4 py-2 text-sm "+("analytics"===w?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Analitik"})]})]}),"requests"===w&&t.jsx("button",{onClick:()=>M(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Talep"})]}),"requests"===w&&t.jsxs(t.Fragment,{children:[t.jsx(y,{query:n,setQuery:i,statusFilter:d,setStatusFilter:o,priorityFilter:m,setPriorityFilter:u,departmentFilter:c,setDepartmentFilter:x,approvalFilter:p,setApprovalFilter:v,paymentFilter:N,setPaymentFilter:k,dateFilter:f,setDateFilter:T}),t.jsx(a,{columns:K,data:B})]}),"items"===w&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-4",children:t.jsx("input",{value:n,onChange:e=>i(e.target.value),className:"border rounded px-3 py-2 w-full max-w-md",placeholder:"Kalem adı, tedarikçi ile ara..."})}),t.jsx(a,{columns:$,data:P})]}),"payments"===w&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-4",children:t.jsx("input",{value:n,onChange:e=>i(e.target.value),className:"border rounded px-3 py-2 w-full max-w-md",placeholder:"Referans no, ödeyen kişi ile ara..."})}),t.jsx(a,{columns:Y,data:z})]}),"analytics"===w&&t.jsx(h,{requests:B})]}),t.jsx(j,{selectedRequest:L,items:l,payments:r,requests:s,isItemsModalOpen:D,setIsItemsModalOpen:q,isPaymentsModalOpen:A,setIsPaymentsModalOpen:F,isApprovalModalOpen:R,setIsApprovalModalOpen:C,isAddModalOpen:O,setIsAddModalOpen:M,onApprovalSubmit:e=>{C(!1),I(null)}})]})}export{v as default};
