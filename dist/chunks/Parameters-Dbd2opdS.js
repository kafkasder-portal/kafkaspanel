import{r as e,j as a,e as t,K as s,O as r,i as l,a3 as i,S as n,n as d,a0 as o,$ as m}from"../assets/index-C7XW2vnU.js";import{e as c}from"./exportToCsv-DLkyd1nM.js";import{D as u}from"./DataTable-BR_3tqT5.js";import{M as x}from"./Modal-QxY_FyG0.js";import{S as p}from"./StatCard-BDZzrbVN.js";import{u as y,t as h,o as g,s as v,e as b}from"./types-Drtxg6gu.js";import{V as j}from"./index-DGkWrISs.js";import{E as _}from"./eye-Bpapn1fj.js";import{P as f}from"./pen-square-C-SOcf8u.js";const N=g({category:v().min(1,"Kategori seçiniz"),key:v().min(1,"Parametre anahtarı giriniz"),value:v().min(1,"Değer giriniz"),description:v().min(1,"Açıklama giriniz"),data_type:b(["string","number","boolean","json","date"],{message:"Veri tipi seçiniz"}),validation_rules:v().optional(),default_value:v().optional()}),S=["Genel Ayarlar","Yardım Limitleri","Başvuru Ayarları","Bildirim Ayarları","Rapor Ayarları","Güvenlik Ayarları","Entegrasyon Ayarları","İş Akışı Ayarları","Kullanıcı Ayarları","Sistem Ayarları"],w=[{value:"string",label:"Metin"},{value:"number",label:"Sayı"},{value:"boolean",label:"Doğru/Yanlış"},{value:"json",label:"JSON"},{value:"date",label:"Tarih"}];function k(){const[g,v]=e.useState([]),[b,k]=e.useState({totalParameters:0,systemParameters:0,userParameters:0,categories:0}),[D,P]=e.useState(!0),[C,O]=e.useState(""),[A,I]=e.useState("all"),[z,T]=e.useState("all"),[L,K]=e.useState("all"),[V,Y]=e.useState(!1),[E,B]=e.useState(null),[G,M]=e.useState(!1),{register:q,handleSubmit:J,formState:{errors:H},reset:R,watch:$}=y({resolver:h(N)}),F=$("data_type");e.useEffect(()=>{Q(),U()},[]);const Q=async()=>{try{const e=[{id:"1",category:"Yardım Limitleri",key:"max_monthly_aid_amount",value:"5000",description:"Aylık maksimum yardım tutarı (TL)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:0,max:50000",default_value:"3000",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"2",category:"Başvuru Ayarları",key:"application_review_period_days",value:"7",description:"Başvuru değerlendirme süresi (gün)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:1,max:30",default_value:"5",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"3",category:"Bildirim Ayarları",key:"email_notifications_enabled",value:"true",description:"E-posta bildirimlerini etkinleştir",data_type:"boolean",is_system:!1,is_editable:!0,validation_rules:"",default_value:"true",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"4",category:"Sistem Ayarları",key:"database_version",value:"1.2.5",description:"Veritabanı şema versiyonu",data_type:"string",is_system:!0,is_editable:!1,validation_rules:"",default_value:"1.0.0",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"system"},{id:"5",category:"Güvenlik Ayarları",key:"session_timeout_minutes",value:"30",description:"Oturum zaman aşımı süresi (dakika)",data_type:"number",is_system:!1,is_editable:!0,validation_rules:"min:5,max:480",default_value:"30",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"},{id:"6",category:"Genel Ayarlar",key:"organization_name",value:"Yardım Derneği",description:"Organizasyon adı",data_type:"string",is_system:!1,is_editable:!0,validation_rules:"min:2,max:100",default_value:"Yardım Organizasyonu",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"admin@example.com"}];v(e)}catch(e){j.error("Parametreler yüklenirken hata oluştu")}finally{P(!1)}},U=async()=>{try{k({totalParameters:25,systemParameters:8,userParameters:17,categories:10})}catch(e){}},W=e.useMemo(()=>g.filter(e=>{const a=""===C||e.key.toLowerCase().includes(C.toLowerCase())||e.description.toLowerCase().includes(C.toLowerCase())||e.value.toLowerCase().includes(C.toLowerCase())||e.category.toLowerCase().includes(C.toLowerCase()),t="all"===A||e.category===A,s="all"===z||e.data_type===z,r="all"===L||"system"===L&&e.is_system||"user"===L&&!e.is_system,l=G||!e.is_system;return a&&t&&s&&r&&l}),[g,C,A,z,L,G]),X=async(e,a)=>{try{v(t=>t.map(t=>t.id===e?{...t,value:a,updated_at:(new Date).toISOString(),updated_by:"current_user@example.com"}:t)),j.success("Parametre değeri güncellendi")}catch(t){j.error("Parametre güncellenirken hata oluştu")}},Z=e=>{switch(e.data_type){case"boolean":return"true"===e.value?"Evet":"Hayır";case"date":try{return new Date(e.value).toLocaleDateString("tr-TR")}catch{return e.value}case"json":try{return JSON.stringify(JSON.parse(e.value),null,2)}catch{return e.value}default:return e.value}},ee=[{key:"category",header:"Kategori",render:(e,t)=>a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:t.category}),t.is_system&&a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(r,{className:"h-3 w-3 text-red-600"}),a.jsx("span",{className:"text-xs text-red-600",children:"Sistem"})]})]})},{key:"key",header:"Anahtar",render:(e,t)=>a.jsxs("div",{children:[a.jsx("div",{className:"font-mono text-sm",children:t.key}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})},{key:"value",header:"Değer",render:(e,t)=>a.jsx("div",{className:"max-w-xs",children:t.is_editable&&!t.is_system?a.jsxs("div",{className:"space-y-2",children:["boolean"===t.data_type?a.jsxs("select",{value:t.value,onChange:e=>X(t.id,e.target.value),className:"w-full rounded border px-2 py-1 text-sm",children:[a.jsx("option",{value:"true",children:"Evet"}),a.jsx("option",{value:"false",children:"Hayır"})]}):"json"===t.data_type?a.jsx("textarea",{value:t.value,onChange:e=>X(t.id,e.target.value),className:"w-full rounded border px-2 py-1 text-sm font-mono",rows:3}):a.jsx("input",{type:"number"===t.data_type?"number":"date"===t.data_type?"date":"text",value:t.value,onChange:e=>X(t.id,e.target.value),className:"w-full rounded border px-2 py-1 text-sm"}),t.default_value&&t.value!==t.default_value&&a.jsxs("button",{onClick:()=>(async e=>{try{const a=g.find(a=>a.id===e);a&&a.default_value&&(await X(e,a.default_value),j.success("Parametre varsayılan değere sıfırlandı"))}catch(a){j.error("Parametre sıfırlanırken hata oluştu")}})(t.id),className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800",title:"Varsayılan değere sıfırla",children:[a.jsx(m,{className:"h-3 w-3"}),"Sıfırla"]})]}):a.jsx("div",{className:"text-sm",children:"json"===t.data_type?a.jsx("pre",{className:"text-xs font-mono bg-gray-50 p-2 rounded max-h-20 overflow-auto",children:Z(t)}):a.jsx("span",{className:t.is_system?"text-muted-foreground":"",children:Z(t)})})})},{key:"data_type",header:"Tip",render:(e,t)=>(e=>{const t={string:{label:"Metin",class:"bg-blue-100 text-blue-800"},number:{label:"Sayı",class:"bg-green-100 text-green-800"},boolean:{label:"Boolean",class:"bg-purple-100 text-purple-800"},json:{label:"JSON",class:"bg-orange-100 text-orange-800"},date:{label:"Tarih",class:"bg-pink-100 text-pink-800"}}[e]||{label:e,class:"bg-gray-100 text-gray-800"};return a.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${t.class}`,children:t.label})})(t.data_type)},{key:"validation",header:"Doğrulama",render:(e,t)=>a.jsxs("div",{children:[t.validation_rules?a.jsx("div",{className:"text-xs font-mono bg-gray-50 p-1 rounded",children:t.validation_rules}):a.jsx("span",{className:"text-muted-foreground text-sm",children:"-"}),t.default_value&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Varsayılan: ",t.default_value]})]})},{key:"updated_info",header:"Güncelleme",render:(e,t)=>{return a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:(s=t.updated_at,new Date(s).toLocaleString("tr-TR"))}),t.updated_by&&a.jsx("div",{className:"text-xs text-muted-foreground",children:t.updated_by})]});var s}},{key:"actions",header:"İşlemler",render:(e,t)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"rounded p-1 text-gray-600 hover:bg-gray-50",title:"Detay",children:a.jsx(_,{className:"h-4 w-4"})}),t.is_editable&&a.jsx("button",{onClick:()=>{B(t),Y(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:a.jsx(f,{className:"h-4 w-4"})})]})}];return D?a.jsx("div",{className:"flex h-64 items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"}),a.jsx("p",{className:"text-muted-foreground",children:"Yükleniyor..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Parametreler"}),a.jsx("p",{className:"text-muted-foreground",children:"Sistem parametrelerini yönetin ve yapılandırın"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:G,onChange:e=>M(e.target.checked),className:"rounded"}),a.jsx("label",{className:"text-sm",children:"Sistem parametrelerini göster"})]}),a.jsxs("button",{onClick:()=>{B(null),Y(!0)},className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[a.jsx(t,{className:"h-4 w-4"}),"Yeni Parametre"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(p,{title:"Toplam Parametreler",value:b.totalParameters.toString(),icon:s,accentClass:"bg-blue-100"}),a.jsx(p,{title:"Sistem Parametreleri",value:b.systemParameters.toString(),icon:r,accentClass:"bg-red-100"}),a.jsx(p,{title:"Kullanıcı Parametreleri",value:b.userParameters.toString(),icon:l,accentClass:"bg-green-100"}),a.jsx(p,{title:"Kategoriler",value:b.categories.toString(),icon:i,accentClass:"bg-purple-100"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border p-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(n,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("input",{type:"text",placeholder:"Parametre ara...",value:C,onChange:e=>O(e.target.value),className:"min-w-64 rounded border px-3 py-2 text-sm"})]}),a.jsxs("select",{value:A,onChange:e=>I(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[a.jsx("option",{value:"all",children:"Tüm Kategoriler"}),S.map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsxs("select",{value:z,onChange:e=>T(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[a.jsx("option",{value:"all",children:"Tüm Tipler"}),w.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]}),a.jsxs("select",{value:L,onChange:e=>K(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[a.jsx("option",{value:"all",children:"Tümü"}),a.jsx("option",{value:"system",children:"Sistem Parametreleri"}),a.jsx("option",{value:"user",children:"Kullanıcı Parametreleri"})]}),a.jsxs("button",{onClick:()=>c("parametreler.csv",W),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[a.jsx(d,{className:"h-4 w-4"}),"İndir"]}),a.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[W.length," parametre"]})]}),a.jsx(u,{columns:ee,data:W}),a.jsxs(x,{open:V,onClose:()=>Y(!1),children:[a.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:E?"Parametre Düzenle":"Yeni Parametre"}),a.jsx("button",{onClick:()=>Y(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"})]}),a.jsxs("form",{onSubmit:J(async e=>{try{const a={id:Date.now().toString(),...e,is_system:!1,is_editable:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),updated_by:"current_user@example.com"};E?(v(e=>e.map(e=>e.id===E.id?{...a,id:E.id}:e)),j.success("Parametre başarıyla güncellendi")):(v(e=>[a,...e]),j.success("Parametre başarıyla oluşturuldu")),Y(!1),R(),U()}catch(a){j.error("Parametre kaydedilirken hata oluştu")}}),className:"p-4 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori *"}),a.jsxs("select",{...q("category"),className:"w-full rounded border px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Seçiniz..."}),S.map(e=>a.jsx("option",{value:e,children:e},e))]}),H.category&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.category.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Veri Tipi *"}),a.jsxs("select",{...q("data_type"),className:"w-full rounded border px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Seçiniz..."}),w.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]}),H.data_type&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.data_type.message})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Parametre Anahtarı *"}),a.jsx("input",{type:"text",...q("key"),className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:"parameter_key_name"}),H.key&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.key.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Açıklama *"}),a.jsx("textarea",{...q("description"),rows:2,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Parametrenin açıklaması..."}),H.description&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.description.message})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Değer *"}),"boolean"===F?a.jsxs("select",{...q("value"),className:"w-full rounded border px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Seçiniz..."}),a.jsx("option",{value:"true",children:"Evet"}),a.jsx("option",{value:"false",children:"Hayır"})]}):"json"===F?a.jsx("textarea",{...q("value"),rows:4,className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:'{"key": "value"}'}):a.jsx("input",{type:"number"===F?"number":"date"===F?"date":"text",...q("value"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Parametre değeri"}),H.value&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:H.value.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Varsayılan Değer"}),a.jsx("input",{type:"text",...q("default_value"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Varsayılan değer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Doğrulama Kuralları"}),a.jsx("input",{type:"text",...q("validation_rules"),className:"w-full rounded border px-3 py-2 text-sm font-mono",placeholder:"min:0,max:100 veya required,email"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Örnek: min:0,max:100 veya required,email"})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>Y(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"}),a.jsxs("button",{type:"submit",className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[a.jsx(o,{className:"h-4 w-4"}),E?"Güncelle":"Kaydet"]})]})]})]})]})}export{k as default};
