import{r as e,V as i,j as s,e as a,S as r,F as l,X as t,n,g as d,aa as m,q as o}from"../assets/index-CzvAnh9f.js";import{e as c}from"./exportToCsv-DLkyd1nM.js";import{d as u,f as p}from"./pdfExport-BBuOquMH.js";import{D as h}from"./DataTable-CBtBMNX8.js";import{M as b}from"./Modal-CXkm-C8J.js";import{u as v,t as N,o as x,e as g,s as f,n as y}from"./types-C2SbTJX7.js";import{V as A}from"./index-DX2TtJe9.js";import{A as D}from"./AdvancedSearchModal-BZE3zJ3S.js";import{F as j}from"./jspdf.plugin.autotable-BhjKYg0a.js";import{P as k}from"./pen-square-DRhBp83i.js";import{E}from"./eye-C9FxZSh9.js";import"./sanitization-DKE2yZnW.js";const U={baseUrl:"/applications",paramPrefix:"filter_",excludeFromUrl:["quickFilter"],arrayDelimiter:","},V=x({beneficiary_id:f().min(1,"İhtiyaç sahibi seçiniz"),aid_type:g(["cash","in_kind","service","medical"],{message:"Yardım türü seçiniz"}),amount:y().optional(),description:f().min(10,"Açıklama en az 10 karakter olmalıdır"),priority:g(["low","normal","high","urgent"])});function _(){var x,g;const[f,y]=e.useState([]),[_,w]=e.useState([]),[S,Y]=e.useState(!0),[T,C]=e.useState(""),[B,F]=e.useState("all"),[O,z]=e.useState("all"),[M,R]=e.useState("all"),[$,I]=e.useState(!1),[L,q]=e.useState(null),[H,Q]=e.useState(!1),[K,G]=e.useState(null),[P,J]=e.useState(!1),[W,X]=e.useState({}),[Z,ee]=e.useState([]),ie=e.useMemo(()=>({fields:[{key:"search",type:"text",label:"Genel Arama",placeholder:"Başvuran adı, açıklama..."},{key:"beneficiary_name",type:"text",label:"Başvuran Adı",placeholder:"Ad veya soyad..."},{key:"status",type:"multiSelect",label:"Durum",options:[{value:"pending",label:"Bekleyen"},{value:"approved",label:"Onaylanan"},{value:"rejected",label:"Reddedilen"},{value:"completed",label:"Tamamlanan"}]},{key:"priority",type:"multiSelect",label:"Öncelik",options:[{value:"low",label:"Düşük"},{value:"normal",label:"Normal"},{value:"high",label:"Yüksek"},{value:"urgent",label:"Acil"}]},{key:"aid_type",type:"multiSelect",label:"Yardım Türü",options:[{value:"cash",label:"Nakdi Yardım"},{value:"in_kind",label:"Ayni Yardım"},{value:"service",label:"Hizmet Yardımı"},{value:"medical",label:"Sağlık Yardımı"}]},{key:"amount_range",type:"numberRange",label:"Tutar Aralığı (TL)",placeholder:"Min - Max tutar"},{key:"beneficiary_category",type:"multiSelect",label:"Yararlanıcı Kategorisi",options:[{value:"Yetim Ailesi",label:"Yetim Ailesi"},{value:"Dul Kadın",label:"Dul Kadın"},{value:"Yaşlı",label:"Yaşlı"},{value:"Engelli",label:"Engelli"},{value:"Hasta",label:"Hasta"},{value:"Öğrenci",label:"Öğrenci"},{value:"Mülteci",label:"Mülteci"},{value:"Diğer",label:"Diğer"}]},{key:"created_date_range",type:"dateRange",label:"Başvuru Tarihi",placeholder:"Tarih aralığı seçin"},{key:"evaluated_date_range",type:"dateRange",label:"Değerlendirme Tarihi",placeholder:"Tarih aralığı seçin"},{key:"evaluated_by",type:"text",label:"Değerlendiren",placeholder:"Değerlendiren kişi..."},{key:"has_evaluation_notes",type:"select",label:"Değerlendirme Notu",options:[{value:"yes",label:"Var"},{value:"no",label:"Yok"}]}],groups:[{id:"general",key:"general",label:"Genel Arama",fields:["search"],operator:"AND"},{id:"beneficiary",key:"beneficiary",label:"Yararlanıcı Bilgileri",fields:["beneficiary_name","beneficiary_category"],operator:"AND"},{id:"status",key:"status",label:"Durum Bilgileri",fields:["status","priority"],operator:"AND"},{id:"details",key:"details",label:"Başvuru Detayları",fields:["aid_type","amount_range"],operator:"AND"},{id:"dates",key:"dates",label:"Tarih Aralıkları",fields:["created_date_range","evaluated_date_range"],operator:"AND"},{id:"evaluation",key:"evaluation",label:"Değerlendirme",fields:["evaluated_by","has_evaluation_notes"],operator:"AND"}],dependencies:[{field:"amount_range",dependsOn:"aid_type",condition:{operator:"contains",value:"cash"},action:"show"},{field:"evaluated_date_range",dependsOn:"status",condition:{operator:"in",value:["approved","rejected"]},action:"show"},{field:"evaluated_by",dependsOn:"status",condition:{operator:"in",value:["approved","rejected"]},action:"show"},{field:"has_evaluation_notes",dependsOn:"status",condition:{operator:"in",value:["approved","rejected"]},action:"show"}],validationRules:[{field:"amount_range",rules:{custom:e=>e&&e.min&&e.max&&e.min>e.max?"Minimum tutar maksimum tutardan büyük olamaz":null}},{field:"created_date_range",rules:{custom:e=>e&&e.start&&e.end&&new Date(e.start)>new Date(e.end)?"Başlangıç tarihi bitiş tarihinden sonra olamaz":null}},{field:"evaluated_date_range",rules:{custom:e=>e&&e.start&&e.end&&new Date(e.start)>new Date(e.end)?"Başlangıç tarihi bitiş tarihinden sonra olamaz":null}}]}),[]),se=e.useMemo(()=>U,[]),ae=e.useMemo(()=>({storageKey:"applications_saved_filters",maxSavedFilters:10}),[]),re=e.useMemo(()=>function(){const e=(new Date).toISOString();return[{id:"pending_applications",name:"Bekleyen Başvurular",description:"İnceleme bekleyen başvurular",filters:{status:["pending"]},pageType:"applications",createdAt:e,updatedAt:e,usageCount:0,lastUsed:e,isQuickFilter:!0},{id:"urgent_applications",name:"Acil Başvurular",description:"Acil öncelikli başvurular",filters:{priority:["urgent"]},pageType:"applications",createdAt:e,updatedAt:e,usageCount:0,lastUsed:e,isQuickFilter:!0},{id:"cash_aid_applications",name:"Nakit Yardım Başvuruları",description:"Nakit yardım kategorisindeki başvurular",filters:{category:["cash_aid"]},pageType:"applications",createdAt:e,updatedAt:e,usageCount:0,lastUsed:e,isQuickFilter:!0},{id:"approved_applications",name:"Onaylanan Başvurular",description:"Onaylanmış başvurular",filters:{status:["approved"]},pageType:"applications",createdAt:e,updatedAt:e,usageCount:0,lastUsed:e,isQuickFilter:!0},{id:"high_priority_pending",name:"Yüksek Öncelik Bekleyen",description:"Yüksek öncelikli bekleyen başvurular",filters:{status:["pending"],priority:["high"]},pageType:"applications",createdAt:e,updatedAt:e,usageCount:0,lastUsed:e,isQuickFilter:!0},{id:"medical_aid_applications",name:"Sağlık Yardımı Başvuruları",description:"Sağlık yardımı kategorisindeki başvurular",filters:{category:["medical_aid"]},pageType:"applications",createdAt:e,updatedAt:e,usageCount:0,lastUsed:e,isQuickFilter:!0}]}(),[]),{register:le,handleSubmit:te,formState:{errors:ne},reset:de,setValue:me,watch:oe}=v({resolver:N(V)}),ce=oe("aid_type"),ue=e.useCallback(async()=>{try{Y(!0);let e=i.from("applications").select("\n          *,\n          beneficiaries (\n            id,\n            name,\n            surname,\n            category\n          )\n        ");T&&(e=e.or(`description.ilike.%${T}%,beneficiaries.name.ilike.%${T}%,beneficiaries.surname.ilike.%${T}%`)),Object.entries(W).forEach(([i,s])=>{if(s&&(!Array.isArray(s)||0!==s.length))switch(i){case"beneficiary_name":"string"==typeof s&&s.trim()&&(e=e.or(`beneficiaries.name.ilike.%${s}%,beneficiaries.surname.ilike.%${s}%`));break;case"status":Array.isArray(s)&&s.length>0&&(e=e.in("status",s));break;case"priority":Array.isArray(s)&&s.length>0&&(e=e.in("priority",s));break;case"aid_type":Array.isArray(s)&&s.length>0&&(e=e.in("aid_type",s));break;case"amount_range":void 0!==s.min&&""!==s.min&&(e=e.gte("amount",s.min)),void 0!==s.max&&""!==s.max&&(e=e.lte("amount",s.max));break;case"beneficiary_category":Array.isArray(s)&&s.length>0&&(e=e.in("beneficiaries.category",s));break;case"created_date_range":s.start&&(e=e.gte("created_at",s.start)),s.end&&(e=e.lte("created_at",s.end));break;case"evaluated_date_range":s.start&&(e=e.gte("evaluated_at",s.start)),s.end&&(e=e.lte("evaluated_at",s.end));break;case"evaluated_by":"string"==typeof s&&s.trim()&&(e=e.ilike("evaluated_by",`%${s}%`));break;case"has_evaluation_notes":"yes"===s?e=e.not("evaluation_notes","is",null):"no"===s&&(e=e.is("evaluation_notes",null))}}),e=e.order("created_at",{ascending:!1});const{data:s,error:a}=await e;if(a)throw a;y(s||[])}catch(e){A.error("Başvurular yüklenirken hata oluştu")}finally{Y(!1)}},[W,T]);e.useEffect(()=>{ue(),pe()},[ue]),e.useEffect(()=>{ue()},[T,W]);const pe=async()=>{try{const{data:e,error:s}=await i.from("beneficiaries").select("id, name, surname, category").eq("status","active").order("name");if(s)throw s;w(e||[])}catch(e){}},he=e.useMemo(()=>f.filter(e=>{var i,s;const a=""===T||e.description.toLowerCase().includes(T.toLowerCase())||`${null==(i=e.beneficiaries)?void 0:i.name} ${null==(s=e.beneficiaries)?void 0:s.surname}`.toLowerCase().includes(T.toLowerCase()),r="all"===B||e.status===B,l="all"===O||e.priority===O,t="all"===M||e.aid_type===M;return a&&r&&l&&t}),[f,T,B,O,M]),be=async(e,s,a)=>{try{const{error:r}=await i.from("applications").update({status:s,evaluation_notes:a,evaluated_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;A.success("Başvuru "+("approved"===s?"onaylandı":"reddedildi")),Q(!1),G(null),ue()}catch(r){A.error("Başvuru değerlendirilirken hata oluştu")}},ve=e=>{const i={pending:{label:"Bekliyor",class:"bg-yellow-100 text-yellow-800",icon:o},approved:{label:"Onaylandı",class:"bg-green-100 text-green-800",icon:m},rejected:{label:"Reddedildi",class:"bg-red-100 text-red-800",icon:t},completed:{label:"Tamamlandı",class:"bg-blue-100 text-blue-800",icon:m}}[e]||{label:e,class:"bg-gray-100 text-gray-800",icon:o},a=i.icon;return s.jsxDEV("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${i.class}`,children:[s.jsxDEV(a,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:348,columnNumber:9},this),i.label]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:347,columnNumber:7},this)},Ne=e=>{const i={low:{label:"Düşük",class:"bg-gray-100 text-gray-800"},normal:{label:"Normal",class:"bg-blue-100 text-blue-800"},high:{label:"Yüksek",class:"bg-orange-100 text-orange-800"},urgent:{label:"Acil",class:"bg-red-100 text-red-800"}}[e]||{label:e,class:"bg-gray-100 text-gray-800"};return s.jsxDEV("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${i.class}`,children:i.label},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:363,columnNumber:7},this)},xe=e=>({cash:"Nakdi Yardım",in_kind:"Ayni Yardım",service:"Hizmet Yardımı",medical:"Sağlık Yardımı"}[e]||e),ge=e=>e?new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e):"-",fe=[{key:"beneficiaries",header:"İhtiyaç Sahibi",render:(e,i)=>{var a,r,l;return s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"font-medium",children:[null==(a=i.beneficiaries)?void 0:a.name," ",null==(r=i.beneficiaries)?void 0:r.surname]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:397,columnNumber:11},this),s.jsxDEV("div",{className:"text-sm text-muted-foreground",children:null==(l=i.beneficiaries)?void 0:l.category},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:398,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:396,columnNumber:5},this)}},{key:"aid_type",header:"Yardım Türü",render:(e,i)=>xe(i.aid_type)},{key:"amount",header:"Tutar",render:(e,i)=>ge(i.amount)},{key:"description",header:"A��ıklama",render:(e,i)=>s.jsxDEV("div",{className:"max-w-xs truncate",title:i.description,children:i.description},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:416,columnNumber:5},this)},{key:"priority",header:"Öncelik",render:(e,i)=>Ne(i.priority)},{key:"status",header:"Durum",render:(e,i)=>ve(i.status)},{key:"created_at",header:"Tarih",render:(e,i)=>{return s=i.created_at,new Date(s).toLocaleDateString("tr-TR");var s}},{key:"actions",header:"İşlemler",render:(e,i)=>s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("button",{onClick:()=>{q(i),me("beneficiary_id",i.beneficiary_id),me("aid_type",i.aid_type),me("amount",i.amount),me("description",i.description),me("priority",i.priority),I(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:s.jsxDEV(k,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:454,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:441,columnNumber:11},this),"pending"===i.status&&s.jsxDEV("button",{onClick:()=>{G(i),Q(!0)},className:"rounded p-1 text-green-600 hover:bg-green-50",title:"Değerlendir",children:s.jsxDEV(E,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:465,columnNumber:15},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:457,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:440,columnNumber:5},this)}];return S?s.jsxDEV("div",{className:"flex h-64 items-center justify-center",children:s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:477,columnNumber:11},this),s.jsxDEV("p",{className:"text-muted-foreground",children:"Yükleniyor..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:478,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:476,columnNumber:9},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:475,columnNumber:7},this):s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-2xl font-bold",children:"Yardım Başvuruları"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:489,columnNumber:11},this),s.jsxDEV("p",{className:"text-muted-foreground",children:"Yardım başvurularını yönetin ve değerlendirin"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:490,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:488,columnNumber:9},this),s.jsxDEV("button",{onClick:()=>{q(null),de(),I(!0)},className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-primary-foreground hover:bg-primary/90",children:[s.jsxDEV(a,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:500,columnNumber:11},this),"Yeni Başvuru"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:492,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:487,columnNumber:7},this),s.jsxDEV("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border p-4",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(r,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:508,columnNumber:11},this),s.jsxDEV("input",{type:"text",placeholder:"Başvuru ara...",value:T,onChange:e=>C(e.target.value),className:"min-w-64 rounded border px-3 py-2 text-sm"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:509,columnNumber:11},this),s.jsxDEV("button",{onClick:()=>J(!0),className:"px-4 py-2 rounded-md flex items-center gap-2 transition-colors "+(Object.keys(W).length>0?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-600 text-white hover:bg-gray-700"),children:[s.jsxDEV(l,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:524,columnNumber:13},this),"Gelişmiş Filtre",Object.keys(W).length>0&&s.jsxDEV("span",{className:"bg-white text-orange-600 px-2 py-0.5 rounded-full text-xs font-medium",children:Object.keys(W).length},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:527,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:516,columnNumber:11},this),Object.keys(W).length>0&&s.jsxDEV("button",{onClick:()=>{X({})},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center gap-2",children:[s.jsxDEV(t,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:537,columnNumber:15},this),"Filtreleri Temizle"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:533,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:507,columnNumber:9},this),s.jsxDEV("select",{value:B,onChange:e=>F(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[s.jsxDEV("option",{value:"all",children:"Tüm Durumlar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:548,columnNumber:11},this),s.jsxDEV("option",{value:"pending",children:"Bekleyen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:549,columnNumber:11},this),s.jsxDEV("option",{value:"approved",children:"Onaylanan"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:550,columnNumber:11},this),s.jsxDEV("option",{value:"rejected",children:"Reddedilen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:551,columnNumber:11},this),s.jsxDEV("option",{value:"completed",children:"Tamamlanan"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:552,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:543,columnNumber:9},this),s.jsxDEV("select",{value:O,onChange:e=>z(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[s.jsxDEV("option",{value:"all",children:"Tüm Öncelikler"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:560,columnNumber:11},this),s.jsxDEV("option",{value:"low",children:"Düşük"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:561,columnNumber:11},this),s.jsxDEV("option",{value:"normal",children:"Normal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:562,columnNumber:11},this),s.jsxDEV("option",{value:"high",children:"Yüksek"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:563,columnNumber:11},this),s.jsxDEV("option",{value:"urgent",children:"Acil"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:564,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:555,columnNumber:9},this),s.jsxDEV("select",{value:M,onChange:e=>R(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[s.jsxDEV("option",{value:"all",children:"Tüm Türler"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:572,columnNumber:11},this),s.jsxDEV("option",{value:"cash",children:"Nakdi Yardım"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:573,columnNumber:11},this),s.jsxDEV("option",{value:"in_kind",children:"Ayni Yardım"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:574,columnNumber:11},this),s.jsxDEV("option",{value:"service",children:"Hizmet Yardımı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:575,columnNumber:11},this),s.jsxDEV("option",{value:"medical",children:"Sağlık Yardımı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:576,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:567,columnNumber:9},this),s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("button",{onClick:()=>c("yardim-basvurulari.csv",he),className:"flex items-center gap-1 rounded bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700",title:"CSV olarak indir",children:[s.jsxDEV(n,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:585,columnNumber:13},this),"CSV"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:580,columnNumber:11},this),s.jsxDEV("button",{onClick:()=>{const e={search:T.trim()||void 0,status:"all"!==B?B:void 0,priority:"all"!==O?O:void 0,aidType:"all"!==M?M:void 0};u(he,Object.values(e).some(e=>e)?e:void 0)},className:"flex items-center gap-1 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",title:"Excel olarak indir",children:[s.jsxDEV(j,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:601,columnNumber:13},this),"Excel"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:588,columnNumber:11},this),s.jsxDEV("button",{onClick:()=>{const e={search:T.trim()||void 0,status:"all"!==B?B:void 0,priority:"all"!==O?O:void 0,aidType:"all"!==M?M:void 0};p(he,Object.values(e).some(e=>e)?e:void 0)},className:"flex items-center gap-1 rounded bg-red-600 px-3 py-2 text-sm text-white hover:bg-red-700",title:"PDF olarak indir",children:[s.jsxDEV(d,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:617,columnNumber:13},this),"PDF"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:604,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:579,columnNumber:9},this),s.jsxDEV("div",{className:"ml-auto text-sm text-muted-foreground",children:[he.length," başvuru"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:622,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:506,columnNumber:7},this),s.jsxDEV(h,{columns:fe,data:he},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:628,columnNumber:7},this),s.jsxDEV(D,{isOpen:P,onClose:()=>J(!1),onApplyFilters:e=>{X(e),J(!1)},onSaveFilter:e=>{const i={...e,id:Date.now().toString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};ee(e=>[...e,i]),A.success("Filtre kaydedildi")},onLoadFilter:e=>{X(e.filters),J(!1),A.success("Filtre yüklendi")},fields:ie.fields,pageType:"applications",urlConfig:se,savedFiltersConfig:ae,quickFilters:re,initialFilters:W,savedFilters:Z},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:631,columnNumber:7},this),s.jsxDEV(b,{open:$,onClose:()=>I(!1),children:[s.jsxDEV("div",{className:"flex items-center justify-between border-b p-4",children:[s.jsxDEV("h2",{className:"text-lg font-semibold",children:L?"Başvuru Düzenle":"Yeni Başvuru"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:650,columnNumber:11},this),s.jsxDEV("button",{onClick:()=>I(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:653,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:649,columnNumber:9},this),s.jsxDEV("form",{onSubmit:te(async e=>{try{if(L){const{error:s}=await i.from("applications").update({...e,updated_at:(new Date).toISOString()}).eq("id",L.id);if(s)throw s;A.success("Başvuru güncellendi")}else{const{error:s}=await i.from("applications").insert([e]);if(s)throw s;A.success("Başvuru oluşturuldu")}I(!1),q(null),de(),ue()}catch(s){A.error("Başvuru kaydedilirken hata oluştu")}}),className:"p-4 space-y-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"İhtiyaç Sahibi *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:663,columnNumber:13},this),s.jsxDEV("select",{...le("beneficiary_id"),className:"w-full rounded border px-3 py-2 text-sm",children:[s.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:668,columnNumber:15},this),_.map(e=>s.jsxDEV("option",{value:e.id,children:[e.name," ",e.surname," - ",e.category]},e.id,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:670,columnNumber:15},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:664,columnNumber:13},this),ne.beneficiary_id&&s.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:ne.beneficiary_id.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:676,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:662,columnNumber:11},this),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Yardım Türü *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:681,columnNumber:13},this),s.jsxDEV("select",{...le("aid_type"),className:"w-full rounded border px-3 py-2 text-sm",children:[s.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:686,columnNumber:15},this),s.jsxDEV("option",{value:"cash",children:"Nakdi Yardım"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:687,columnNumber:15},this),s.jsxDEV("option",{value:"in_kind",children:"Ayni Yardım"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:688,columnNumber:15},this),s.jsxDEV("option",{value:"service",children:"Hizmet Yardımı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:689,columnNumber:15},this),s.jsxDEV("option",{value:"medical",children:"Sağlık Yardımı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:690,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:682,columnNumber:13},this),ne.aid_type&&s.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:ne.aid_type.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:693,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:680,columnNumber:11},this),"cash"===ce&&s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Tutar (TL)"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:699,columnNumber:15},this),s.jsxDEV("input",{type:"number",step:"0.01",...le("amount",{valueAsNumber:!0}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"0.00"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:700,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:698,columnNumber:11},this),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Açıklama *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:711,columnNumber:13},this),s.jsxDEV("textarea",{...le("description"),rows:4,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Başvuru detayların�� açıklayın..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:712,columnNumber:13},this),ne.description&&s.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:ne.description.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:719,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:710,columnNumber:11},this),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Öncelik"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:724,columnNumber:13},this),s.jsxDEV("select",{...le("priority"),className:"w-full rounded border px-3 py-2 text-sm",defaultValue:"normal",children:[s.jsxDEV("option",{value:"low",children:"Düşük"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:730,columnNumber:15},this),s.jsxDEV("option",{value:"normal",children:"Normal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:731,columnNumber:15},this),s.jsxDEV("option",{value:"high",children:"Yüksek"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:732,columnNumber:15},this),s.jsxDEV("option",{value:"urgent",children:"Acil"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:733,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:725,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:723,columnNumber:11},this),s.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsxDEV("button",{type:"button",onClick:()=>I(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:738,columnNumber:13},this),s.jsxDEV("button",{type:"submit",className:"rounded bg-primary px-4 py-2 text-sm text-primary-foreground hover:bg-primary/90",children:L?"Güncelle":"Kaydet"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:745,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:737,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:661,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:648,columnNumber:7},this),s.jsxDEV(b,{open:H,onClose:()=>Q(!1),children:[s.jsxDEV("div",{className:"flex items-center justify-between border-b p-4",children:[s.jsxDEV("h2",{className:"text-lg font-semibold",children:"Başvuru Değerlendirme"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:758,columnNumber:11},this),s.jsxDEV("button",{onClick:()=>Q(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:759,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:757,columnNumber:9},this),K&&s.jsxDEV("div",{className:"p-4 space-y-4",children:[s.jsxDEV("div",{className:"rounded border p-4 bg-gray-50",children:[s.jsxDEV("h3",{className:"font-medium mb-2",children:"Başvuru Detayları"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:770,columnNumber:15},this),s.jsxDEV("div",{className:"space-y-2 text-sm",children:[s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"İhtiyaç Sahibi:"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:772,columnNumber:22},this)," ",null==(x=K.beneficiaries)?void 0:x.name," ",null==(g=K.beneficiaries)?void 0:g.surname]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:772,columnNumber:17},this),s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Yardım Türü:"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:773,columnNumber:22},this)," ",xe(K.aid_type)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:773,columnNumber:17},this),K.amount&&s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Tutar:"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:775,columnNumber:20},this)," ",ge(K.amount)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:775,columnNumber:15},this),s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Açıklama:"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:777,columnNumber:22},this)," ",K.description]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:777,columnNumber:17},this),s.jsxDEV("div",{children:[s.jsxDEV("strong",{children:"Öncelik:"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:778,columnNumber:22},this)," ",Ne(K.priority)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:778,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:771,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:769,columnNumber:13},this),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Değerlendirme Notları"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:783,columnNumber:15},this),s.jsxDEV("textarea",{id:"evaluation-notes",rows:4,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Değerlendirme notlarınızı yazın..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:784,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:782,columnNumber:13},this),s.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsxDEV("button",{onClick:()=>Q(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:793,columnNumber:15},this),s.jsxDEV("button",{onClick:()=>{var e;const i=(null==(e=document.getElementById("evaluation-notes"))?void 0:e.value)||"";be(K.id,"rejected",i)},className:"flex items-center gap-2 rounded bg-red-600 px-4 py-2 text-sm text-white hover:bg-red-700",children:[s.jsxDEV(t,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:806,columnNumber:17},this),"Reddet"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:799,columnNumber:15},this),s.jsxDEV("button",{onClick:()=>{var e;const i=(null==(e=document.getElementById("evaluation-notes"))?void 0:e.value)||"";be(K.id,"approved",i)},className:"flex items-center gap-2 rounded bg-green-600 px-4 py-2 text-sm text-white hover:bg-green-700",children:[s.jsxDEV(m,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:816,columnNumber:17},this),"Onayla"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:809,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:792,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:768,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:756,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/Applications.tsx",lineNumber:485,columnNumber:5},this)}export{_ as default};
