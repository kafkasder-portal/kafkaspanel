import{r as e,j as a,m as s,e as i,y as r,p as t,X as l,J as n,S as o,n as d,q as m,a3 as u}from"../assets/index-CzvAnh9f.js";import{e as c}from"./exportToCsv-DLkyd1nM.js";import{D as h}from"./DataTable-CBtBMNX8.js";import{M as N}from"./Modal-CXkm-C8J.js";import{S as b}from"./StatCard-3Oaqvq3F.js";import{u as x,t as v,o as p,s as g,e as D}from"./types-C2SbTJX7.js";import{V as f}from"./index-DX2TtJe9.js";import{A as y}from"./alert-circle-D6Smf8fy.js";import{E as C}from"./eye-C9FxZSh9.js";import{P as _}from"./pen-square-DRhBp83i.js";const j=p({table_name:g().min(1,"Tablo adı seçiniz"),validation_type:D(["integrity","consistency","completeness","accuracy","duplicates"],{message:"Doğrulama tipi seçiniz"}),field_name:g().optional(),rule_description:g().min(1,"Kural açıklaması giriniz"),details:g().optional(),suggested_action:g().optional()}),V=["beneficiaries","aid_applications","cash_aids","bank_orders","service_tracking","hospital_referrals","parameters","users","donations","reports"],E=[{value:"integrity",label:"Veri Bütünlüğü"},{value:"consistency",label:"Tutarlılık"},{value:"completeness",label:"Eksiksizlik"},{value:"accuracy",label:"Doğruluk"},{value:"duplicates",label:"Tekrar Eden Kayıtlar"}];function U(){const[p,g]=e.useState([]),[D,U]=e.useState([]),[k,w]=e.useState({totalValidations:0,passedValidations:0,failedValidations:0,warningValidations:0,totalRecords:0,errorRecords:0,dataQualityScore:0}),[S,T]=e.useState(!0),[z,I]=e.useState(""),[O,K]=e.useState("all"),[M,$]=e.useState("all"),[B,L]=e.useState("all"),[R,A]=e.useState(!1),[Y,G]=e.useState(null),[P,Q]=e.useState(!0),[q,H]=e.useState(null),{register:J,handleSubmit:F,formState:{errors:W},reset:X}=x({resolver:v(j)});e.useEffect(()=>{Z(),ee(),ae()},[]);const Z=async()=>{try{const e=[{id:"1",table_name:"beneficiaries",validation_type:"completeness",field_name:"phone",rule_description:"Telefon numarası zorunlu alanların kontrolü",status:"warning",error_count:15,total_records:250,error_percentage:6,last_check:(new Date).toISOString(),created_at:(new Date).toISOString(),details:"15 kayıtta telefon numarası eksik",suggested_action:"Eksik telefon numaralarını tamamlayın"},{id:"2",table_name:"aid_applications",validation_type:"duplicates",field_name:"beneficiary_id",rule_description:"Aynı kişiden birden fazla aktif başvuru kontrolü",status:"failed",error_count:8,total_records:180,error_percentage:4.4,last_check:new Date(Date.now()-72e5).toISOString(),created_at:(new Date).toISOString(),details:"8 kişinin birden fazla aktif başvurusu var",suggested_action:"Tekrar eden başvuruları birleştirin veya iptal edin"},{id:"3",table_name:"cash_aids",validation_type:"integrity",field_name:"amount",rule_description:"Yardım tutarının pozitif olması kontrolü",status:"passed",error_count:0,total_records:95,error_percentage:0,last_check:new Date(Date.now()-18e5).toISOString(),created_at:(new Date).toISOString(),details:"Tüm yardım tutarları pozitif",suggested_action:""},{id:"4",table_name:"beneficiaries",validation_type:"accuracy",field_name:"birth_date",rule_description:"Doğum tarihinin mantıklı aralıkta olması kontrolü",status:"warning",error_count:3,total_records:250,error_percentage:1.2,last_check:new Date(Date.now()-144e5).toISOString(),created_at:(new Date).toISOString(),details:"3 kayıtta şüpheli doğum tarihi (100+ yaş)",suggested_action:"Doğum tarihlerini kontrol edin"},{id:"5",table_name:"bank_orders",validation_type:"consistency",field_name:"status",rule_description:"Ödeme durumu ile tarih alanlarının tutarlılığı",status:"passed",error_count:0,total_records:45,error_percentage:0,last_check:new Date(Date.now()-36e5).toISOString(),created_at:(new Date).toISOString(),details:"Tüm ödeme durumları tutarlı",suggested_action:""}];g(e)}catch(e){f.error("Veri doğrulama kayıtları yüklenirken hata oluştu")}finally{T(!1)}},ee=async()=>{try{const e=[{table_name:"beneficiaries",record_count:250,last_updated:new Date(Date.now()-72e5).toISOString(),health_score:85,issues:2,status:"warning"},{table_name:"aid_applications",record_count:180,last_updated:new Date(Date.now()-18e5).toISOString(),health_score:75,issues:3,status:"warning"},{table_name:"cash_aids",record_count:95,last_updated:new Date(Date.now()-36e5).toISOString(),health_score:95,issues:0,status:"healthy"},{table_name:"bank_orders",record_count:45,last_updated:new Date(Date.now()-27e5).toISOString(),health_score:92,issues:1,status:"healthy"}];U(e)}catch(e){}},ae=async()=>{try{w({totalValidations:25,passedValidations:15,failedValidations:4,warningValidations:6,totalRecords:1250,errorRecords:45,dataQualityScore:87})}catch(e){}},se=e.useMemo(()=>p.filter(e=>{var a,s;const i=""===z||e.table_name.toLowerCase().includes(z.toLowerCase())||e.rule_description.toLowerCase().includes(z.toLowerCase())||(null==(a=e.field_name)?void 0:a.toLowerCase().includes(z.toLowerCase()))||(null==(s=e.details)?void 0:s.toLowerCase().includes(z.toLowerCase())),r="all"===O||e.table_name===O,t="all"===M||e.validation_type===M,l="all"===B||e.status===B;return i&&r&&t&&l}),[p,z,O,M,B]),ie=e=>{const s={passed:{label:"Başarılı",class:"bg-green-100 text-green-800",icon:t},failed:{label:"Başarısız",class:"bg-red-100 text-red-800",icon:l},warning:{label:"Uyarı",class:"bg-yellow-100 text-yellow-800",icon:n},pending:{label:"Bekliyor",class:"bg-gray-100 text-gray-800",icon:m}}[e]||{label:e,class:"bg-gray-100 text-gray-800",icon:y},i=s.icon;return a.jsxDEV("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${s.class}`,children:[a.jsxDEV(i,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:411,columnNumber:9},this),s.label]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:410,columnNumber:7},this)},re=e=>{const s={integrity:{label:"Bütünlük",class:"bg-blue-100 text-blue-800"},consistency:{label:"Tutarlılık",class:"bg-purple-100 text-purple-800"},completeness:{label:"Eksiksizlik",class:"bg-orange-100 text-orange-800"},accuracy:{label:"Doğruluk",class:"bg-green-100 text-green-800"},duplicates:{label:"Tekrar",class:"bg-red-100 text-red-800"}}[e]||{label:e,class:"bg-gray-100 text-gray-800"};return a.jsxDEV("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${s.class}`,children:s.label},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:427,columnNumber:7},this)},te=e=>{const s={healthy:{label:"Sağlıklı",class:"bg-green-100 text-green-800",icon:t},warning:{label:"Uyarı",class:"bg-yellow-100 text-yellow-800",icon:n},critical:{label:"Kritik",class:"bg-red-100 text-red-800",icon:y}}[e]||{label:e,class:"bg-gray-100 text-gray-800",icon:y},i=s.icon;return a.jsxDEV("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${s.class}`,children:[a.jsxDEV(i,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:443,columnNumber:9},this),s.label]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:442,columnNumber:7},this)},le=e=>new Date(e).toLocaleString("tr-TR"),ne=e=>{const a=new Date,s=new Date(e),i=a.getTime()-s.getTime(),r=Math.floor(i/6e4),t=Math.floor(i/36e5),l=Math.floor(i/864e5);return r<60?`${r} dakika önce`:t<24?`${t} saat önce`:`${l} gün önce`},oe=[{key:"table_info",header:"Tablo & Alan",render:(e,s)=>a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"font-medium flex items-center gap-1",children:[a.jsxDEV(u,{className:"h-3 w-3 text-blue-600"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:477,columnNumber:13},this),s.table_name]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:476,columnNumber:11},this),s.field_name&&a.jsxDEV("div",{className:"text-sm text-muted-foreground",children:s.field_name},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:481,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:475,columnNumber:5},this)},{key:"validation_type",header:"Tip",render:(e,a)=>re(a.validation_type)},{key:"rule_description",header:"Kural",render:(e,s)=>a.jsxDEV("div",{className:"max-w-xs",children:[a.jsxDEV("div",{className:"text-sm truncate",title:s.rule_description,children:s.rule_description},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:498,columnNumber:11},this),s.details&&a.jsxDEV("div",{className:"text-xs text-muted-foreground mt-1",title:s.details,children:s.details},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:502,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:497,columnNumber:5},this)},{key:"status",header:"Durum",render:(e,a)=>ie(a.status)},{key:"results",header:"Sonuçlar",render:(e,s)=>a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"text-sm",children:[a.jsxDEV("span",{className:s.error_count>0?"text-red-600 font-medium":"text-green-600",children:s.error_count},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:520,columnNumber:13},this),a.jsxDEV("span",{className:"text-muted-foreground",children:[" / ",s.total_records]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:523,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:519,columnNumber:11},this),a.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["%",s.error_percentage.toFixed(1)," hata"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:525,columnNumber:11},this),s.error_percentage>0&&a.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-1",children:a.jsxDEV("div",{className:"h-1 rounded-full "+(s.error_percentage<5?"bg-yellow-500":"bg-red-500"),style:{width:`${Math.min(s.error_percentage,100)}%`}},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:530,columnNumber:15},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:529,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:518,columnNumber:5},this)},{key:"last_check",header:"Son Kontrol",render:(e,s)=>a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"text-sm",children:ne(s.last_check)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:546,columnNumber:11},this),a.jsxDEV("div",{className:"text-xs text-muted-foreground",children:le(s.last_check)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:547,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:545,columnNumber:5},this)},{key:"actions",header:"İşlemler",render:(e,i)=>a.jsxDEV("div",{className:"flex items-center gap-2",children:[a.jsxDEV("button",{onClick:()=>(async e=>{try{H(e),await new Promise(e=>setTimeout(e,2e3));const a={error_count:Math.floor(20*Math.random()),total_records:100+Math.floor(200*Math.random())};g(s=>s.map(s=>{if(s.id===e){const e=a.error_count/a.total_records*100,i=0===e?"passed":e<5?"warning":"failed";return{...s,...a,error_percentage:e,status:i,last_check:(new Date).toISOString()}}return s})),f.success("Doğrulama başarıyla çalıştırıldı")}catch(a){f.error("Doğrulama çalıştırılırken hata oluştu")}finally{H(null)}})(i.id),disabled:q===i.id||"all"===q,className:"rounded p-1 text-blue-600 hover:bg-blue-50 disabled:opacity-50",title:"Doğrulamayı Çalıştır",children:q===i.id?a.jsxDEV("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:565,columnNumber:9},this):a.jsxDEV(s,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:567,columnNumber:9},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:558,columnNumber:11},this),a.jsxDEV("button",{className:"rounded p-1 text-gray-600 hover:bg-gray-50",title:"Detay",children:a.jsxDEV(C,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:574,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:570,columnNumber:11},this),a.jsxDEV("button",{onClick:()=>{G(i),A(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:a.jsxDEV(_,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:584,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:576,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:557,columnNumber:5},this)}],de=[{key:"table_name",header:"Tablo",render:(e,s)=>a.jsxDEV("div",{className:"font-medium flex items-center gap-1",children:[a.jsxDEV(u,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:597,columnNumber:11},this),s.table_name]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:596,columnNumber:5},this)},{key:"record_count",header:"Kayıt Sayısı",render:(e,s)=>a.jsxDEV("div",{className:"text-sm font-medium",children:s.record_count.toLocaleString()},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:606,columnNumber:5},this)},{key:"health_score",header:"Sağlık Skoru",render:(e,s)=>a.jsxDEV("div",{className:"flex items-center gap-2",children:[a.jsxDEV("div",{className:"text-sm font-medium",children:["%",s.health_score]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:616,columnNumber:11},this),a.jsxDEV("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:a.jsxDEV("div",{className:"h-2 rounded-full "+(s.health_score>=90?"bg-green-500":s.health_score>=70?"bg-yellow-500":"bg-red-500"),style:{width:`${s.health_score}%`}},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:620,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:619,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:615,columnNumber:5},this)},{key:"issues",header:"Sorunlar",render:(e,s)=>a.jsxDEV("div",{className:"text-sm font-medium "+(0===s.issues?"text-green-600":"text-red-600"),children:s.issues},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:635,columnNumber:5},this)},{key:"status",header:"Durum",render:(e,a)=>te(a.status)},{key:"last_updated",header:"Son Güncelleme",render:(e,s)=>a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"text-sm",children:ne(s.last_updated)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:652,columnNumber:11},this),a.jsxDEV("div",{className:"text-xs text-muted-foreground",children:le(s.last_updated)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:653,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:651,columnNumber:5},this)}];return S?a.jsxDEV("div",{className:"flex h-64 items-center justify-center",children:a.jsxDEV("div",{className:"text-center",children:[a.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:665,columnNumber:11},this),a.jsxDEV("p",{className:"text-muted-foreground",children:"Yükleniyor..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:666,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:664,columnNumber:9},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:663,columnNumber:7},this):a.jsxDEV("div",{className:"space-y-6",children:[a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV("h1",{className:"text-2xl font-bold",children:"Veri Kontrolü"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:677,columnNumber:11},this),a.jsxDEV("p",{className:"text-muted-foreground",children:"Veri kalitesini izleyin ve doğrulama kurallarını yönetin"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:678,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:676,columnNumber:9},this),a.jsxDEV("div",{className:"flex items-center gap-2",children:[a.jsxDEV("button",{onClick:async()=>{try{H("all"),await new Promise(e=>setTimeout(e,5e3)),g(e=>e.map(e=>{const a=Math.floor(20*Math.random()),s=100+Math.floor(200*Math.random()),i=a/s*100;return{...e,error_count:a,total_records:s,error_percentage:i,status:0===i?"passed":i<5?"warning":"failed",last_check:(new Date).toISOString()}})),f.success("Tüm doğrulamalar başarıyla çalıştırıldı"),ae(),ee()}catch(e){f.error("Doğrulamalar çalıştırılırken hata oluştu")}finally{H(null)}},disabled:"all"===q,className:"flex items-center gap-2 rounded bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700 disabled:opacity-50",children:["all"===q?a.jsxDEV("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:687,columnNumber:13},this):a.jsxDEV(s,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:689,columnNumber:13},this),"Tümünü Çalıştır"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:681,columnNumber:11},this),a.jsxDEV("button",{onClick:()=>{G(null),A(!0)},className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[a.jsxDEV(i,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:700,columnNumber:13},this),"Yeni Kural"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:693,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:680,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:675,columnNumber:7},this),a.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsxDEV(b,{title:"Veri Kalite Skoru",value:`%${k.dataQualityScore}`,icon:r,accentClass:"bg-blue-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:708,columnNumber:9},this),a.jsxDEV(b,{title:"Başarılı Doğrulamalar",value:k.passedValidations.toString(),icon:t,accentClass:"bg-green-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:714,columnNumber:9},this),a.jsxDEV(b,{title:"Başarısız Doğrulamalar",value:k.failedValidations.toString(),icon:l,accentClass:"bg-red-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:720,columnNumber:9},this),a.jsxDEV(b,{title:"Hatalı Kayıtlar",value:`${k.errorRecords} / ${k.totalRecords}`,icon:n,accentClass:"bg-yellow-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:726,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:707,columnNumber:7},this),P&&a.jsxDEV("div",{className:"rounded-lg border",children:[a.jsxDEV("div",{className:"flex items-center justify-between border-b p-4",children:[a.jsxDEV("h2",{className:"text-lg font-semibold",children:"Tablo Sağlık Durumu"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:738,columnNumber:13},this),a.jsxDEV("button",{onClick:()=>Q(!1),className:"text-muted-foreground hover:text-foreground",children:a.jsxDEV(l,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:743,columnNumber:15},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:739,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:737,columnNumber:11},this),a.jsxDEV("div",{className:"p-4",children:a.jsxDEV(h,{columns:de,data:D},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:747,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:746,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:736,columnNumber:7},this),a.jsxDEV("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border p-4",children:[a.jsxDEV("div",{className:"flex items-center gap-2",children:[a.jsxDEV(o,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:755,columnNumber:11},this),a.jsxDEV("input",{type:"text",placeholder:"Doğrulama ara...",value:z,onChange:e=>I(e.target.value),className:"min-w-64 rounded border px-3 py-2 text-sm"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:756,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:754,columnNumber:9},this),a.jsxDEV("select",{value:O,onChange:e=>K(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[a.jsxDEV("option",{value:"all",children:"Tüm Tablolar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:770,columnNumber:11},this),V.map(e=>a.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:772,columnNumber:11},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:765,columnNumber:9},this),a.jsxDEV("select",{value:M,onChange:e=>$(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[a.jsxDEV("option",{value:"all",children:"Tüm Tipler"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:781,columnNumber:11},this),E.map(e=>a.jsxDEV("option",{value:e.value,children:e.label},e.value,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:783,columnNumber:11},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:776,columnNumber:9},this),a.jsxDEV("select",{value:B,onChange:e=>L(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[a.jsxDEV("option",{value:"all",children:"Tüm Durumlar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:792,columnNumber:11},this),a.jsxDEV("option",{value:"passed",children:"Başarılı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:793,columnNumber:11},this),a.jsxDEV("option",{value:"failed",children:"Başarısız"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:794,columnNumber:11},this),a.jsxDEV("option",{value:"warning",children:"Uyarı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:795,columnNumber:11},this),a.jsxDEV("option",{value:"pending",children:"Bekleyen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:796,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:787,columnNumber:9},this),a.jsxDEV("button",{onClick:()=>c("veri-kontrol.csv",se),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[a.jsxDEV(d,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:803,columnNumber:11},this),"İndir"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:799,columnNumber:9},this),a.jsxDEV("div",{className:"ml-auto text-sm text-muted-foreground",children:[se.length," doğrulama"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:807,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:753,columnNumber:7},this),a.jsxDEV(h,{columns:oe,data:se},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:813,columnNumber:7},this),a.jsxDEV(N,{open:R,onClose:()=>A(!1),children:[a.jsxDEV("div",{className:"flex items-center justify-between border-b p-4",children:[a.jsxDEV("h2",{className:"text-lg font-semibold",children:Y?"Doğrulama Kuralı Düzenle":"Yeni Doğrulama Kuralı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:818,columnNumber:11},this),a.jsxDEV("button",{onClick:()=>A(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:821,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:817,columnNumber:9},this),a.jsxDEV("form",{onSubmit:F(async e=>{try{const a={id:Date.now().toString(),...e,status:"pending",error_count:0,total_records:0,error_percentage:0,last_check:(new Date).toISOString(),created_at:(new Date).toISOString()};Y?(g(e=>e.map(e=>e.id===Y.id?{...a,id:Y.id}:e)),f.success("Doğrulama kuralı başarıyla güncellendi")):(g(e=>[a,...e]),f.success("Doğrulama kuralı başarıyla oluşturuldu")),A(!1),X(),ae()}catch(a){f.error("Doğrulama kuralı kaydedilirken hata oluştu")}}),className:"p-4 space-y-4",children:[a.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxDEV("div",{children:[a.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Tablo *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:832,columnNumber:15},this),a.jsxDEV("select",{...J("table_name"),className:"w-full rounded border px-3 py-2 text-sm",children:[a.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:837,columnNumber:17},this),V.map(e=>a.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:839,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:833,columnNumber:15},this),W.table_name&&a.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:W.table_name.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:843,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:831,columnNumber:13},this),a.jsxDEV("div",{children:[a.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Doğrulama Tipi *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:848,columnNumber:15},this),a.jsxDEV("select",{...J("validation_type"),className:"w-full rounded border px-3 py-2 text-sm",children:[a.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:853,columnNumber:17},this),E.map(e=>a.jsxDEV("option",{value:e.value,children:e.label},e.value,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:855,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:849,columnNumber:15},this),W.validation_type&&a.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:W.validation_type.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:859,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:847,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:830,columnNumber:11},this),a.jsxDEV("div",{children:[a.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Alan Adı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:865,columnNumber:13},this),a.jsxDEV("input",{type:"text",...J("field_name"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Kontrol edilecek alan adı (opsiyonel)"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:866,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:864,columnNumber:11},this),a.jsxDEV("div",{children:[a.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Kural Açıklaması *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:875,columnNumber:13},this),a.jsxDEV("textarea",{...J("rule_description"),rows:3,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Doğrulama kuralının açıklaması..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:876,columnNumber:13},this),W.rule_description&&a.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:W.rule_description.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:883,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:874,columnNumber:11},this),a.jsxDEV("div",{children:[a.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Detaylar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:888,columnNumber:13},this),a.jsxDEV("textarea",{...J("details"),rows:2,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Ek detaylar ve açıklamalar..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:889,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:887,columnNumber:11},this),a.jsxDEV("div",{children:[a.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Önerilen Eylem"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:898,columnNumber:13},this),a.jsxDEV("textarea",{...J("suggested_action"),rows:2,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Hata durumunda önerilen eylem..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:899,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:897,columnNumber:11},this),a.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsxDEV("button",{type:"button",onClick:()=>A(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:908,columnNumber:13},this),a.jsxDEV("button",{type:"submit",className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[a.jsxDEV(i,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:919,columnNumber:15},this),Y?"Güncelle":"Kaydet"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:915,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:907,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:829,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:816,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/DataControl.tsx",lineNumber:673,columnNumber:5},this)}export{U as default};
