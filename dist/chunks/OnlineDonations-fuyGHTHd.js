import{r as e,j as a,T as r,e as t,G as l,h as s,F as n,g as i}from"../assets/index-C7XW2vnU.js";import{D as o}from"./DataTable-BR_3tqT5.js";import{M as d}from"./Modal-QxY_FyG0.js";import{A as c}from"./AdvancedSearchModal-D5BsVEb_.js";import{e as m}from"./exportToCsv-DLkyd1nM.js";import{e as u,a as p}from"./pdfExport-CeEl07Zc.js";import{T as x,O as g,D as b,M as h}from"./DonationCard-C92J6yxP.js";import{F as y}from"./jspdf.plugin.autotable-DrQwAAop.js";import"./sanitization-DKE2yZnW.js";import"./useSwipeGestures-BfFToUID.js";import"./trending-down-gHf4Zw32.js";const f=[{key:"search",type:"text",label:"Genel Arama",placeholder:"Bağışçı adı, e-posta veya işlem no ile ara..."},{key:"donorName",type:"text",label:"Bağışçı Adı",placeholder:"Bağışçı adını girin"},{key:"donorEmail",type:"text",label:"E-posta",placeholder:"E-posta adresini girin"},{key:"status",type:"multiSelect",label:"Durum",options:[{value:"başarılı",label:"Başarılı"},{value:"beklemede",label:"Beklemede"},{value:"başarısız",label:"Başarısız"},{value:"iptal",label:"İptal"},{value:"iade",label:"İade"}]},{key:"platform",type:"multiSelect",label:"Platform",options:[{value:"Web Sitesi",label:"Web Sitesi"},{value:"Mobil Uygulama",label:"Mobil Uygulama"},{value:"Facebook",label:"Facebook"},{value:"Instagram",label:"Instagram"},{value:"WhatsApp",label:"WhatsApp"},{value:"SMS",label:"SMS"}]},{key:"paymentMethod",type:"multiSelect",label:"Ödeme Yöntemi",options:[{value:"Kredi Kartı",label:"Kredi Kartı"},{value:"Banka Kartı",label:"Banka Kartı"},{value:"Havale/EFT",label:"Havale/EFT"},{value:"Mobil Ödeme",label:"Mobil Ödeme"},{value:"Dijital Cüzdan",label:"Dijital Cüzdan"}]},{key:"amountRange",type:"numberRange",label:"Tutar Aralığı",placeholder:"Min - Max tutar"},{key:"currency",type:"multiSelect",label:"Para Birimi",options:[{value:"TRY",label:"TRY"},{value:"USD",label:"USD"},{value:"EUR",label:"EUR"}]},{key:"purpose",type:"multiSelect",label:"Bağış Amacı",options:[{value:"Genel Bağış",label:"Genel Bağış"},{value:"Eğitim Yardımı",label:"Eğitim Yardımı"},{value:"Sağlık Yardımı",label:"Sağlık Yardımı"},{value:"Gıda Yardımı",label:"Gıda Yardımı"},{value:"Kurban",label:"Kurban"},{value:"Ramazan",label:"Ramazan"},{value:"Diğer",label:"Diğer"}]},{key:"isRecurring",type:"select",label:"Bağış Tipi",options:[{value:"true",label:"Düzenli Bağışlar"},{value:"false",label:"Tek Seferlik Bağışlar"}]},{key:"recurringPeriod",type:"multiSelect",label:"Düzenli Bağış Periyodu",options:[{value:"Aylık",label:"Aylık"},{value:"Üç Aylık",label:"Üç Aylık"},{value:"Altı Aylık",label:"Altı Aylık"},{value:"Yıllık",label:"Yıllık"}]},{key:"referralSource",type:"multiSelect",label:"Yönlendirme Kaynağı",options:[{value:"Organik Arama",label:"Organik Arama"},{value:"Google Ads",label:"Google Ads"},{value:"Facebook Ads",label:"Facebook Ads"},{value:"E-posta Kampanyası",label:"E-posta Kampanyası"},{value:"SMS Kampanyası",label:"SMS Kampanyası"},{value:"Sosyal Medya",label:"Sosyal Medya"},{value:"Arkadaş Tavsiyesi",label:"Arkadaş Tavsiyesi"},{value:"Diğer",label:"Diğer"}]},{key:"campaign",type:"text",label:"Kampanya",placeholder:"Kampanya adını girin"},{key:"dateRange",type:"dateRange",label:"Bağış Tarihi",placeholder:"Tarih aralığı seçin"},{key:"transactionId",type:"text",label:"İşlem No",placeholder:"İşlem numarasını girin"}],v=[{id:"basic",key:"basic",label:"Temel Filtreler",fields:["search","donorName","donorEmail","status"],operator:"AND"},{id:"platform",key:"platform",label:"Platform ve Ödeme",fields:["platform","paymentMethod","currency"],operator:"AND"},{id:"amount",key:"amount",label:"Tutar ve Amaç",fields:["amountRange","purpose"],operator:"AND"},{id:"recurring",key:"recurring",label:"Düzenli Bağışlar",fields:["isRecurring","recurringPeriod"],operator:"AND"},{id:"marketing",key:"marketing",label:"Pazarlama ve Kampanya",fields:["referralSource","campaign"],operator:"AND"},{id:"date",key:"date",label:"Tarih ve İşlem",fields:["dateRange","transactionId"],operator:"AND"}],j=[{field:"recurringPeriod",dependsOn:"isRecurring",condition:{operator:"equals",value:"true"},action:"show"}],k=[{field:"amountRange",rules:{custom:e=>e&&e.min&&e.max&&e.min>e.max?"Minimum tutar maksimum tutardan büyük olamaz":null}},{field:"dateRange",rules:{custom:e=>e&&e.start&&e.end&&new Date(e.start)>new Date(e.end)?"Başlangıç tarihi bitiş tarihinden sonra olamaz":null}}],N=[{id:"1",date:"2024-01-15",donorName:"Ahmet Yılmaz",donorEmail:"ahmet.yilmaz@email.com",donorPhone:"+90 532 123 4567",amount:1e3,currency:"TRY",platform:"Website",paymentMethod:"Kredi Kartı",transactionId:"WEB789123456",sessionId:"SES123456789",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",purpose:"Eğitim Yardımı",campaign:"Okul Öncesi Eğitim",referralSource:"Google Ads",isRecurring:!0,recurringPeriod:"Aylık",status:"başarılı",processingFee:30,netAmount:970,notes:"Düzenli bağışçı"},{id:"2",date:"2024-01-14",donorName:"Zeynep Kaya",donorEmail:"zeynep.kaya@email.com",amount:500,currency:"TRY",platform:"Mobile App",paymentMethod:"Dijital Cüzdan",transactionId:"APP456789123",purpose:"Genel Bağış",referralSource:"Sosyal Medya",isRecurring:!1,status:"başarılı",processingFee:15,netAmount:485},{id:"3",date:"2024-01-13",donorName:"Mehmet Demir",donorEmail:"mehmet.demir@email.com",donorPhone:"+90 533 987 6543",amount:250,currency:"TRY",platform:"Facebook",paymentMethod:"Kredi Kartı",transactionId:"FB321654987",purpose:"Kurban",campaign:"Kurban 2024",referralSource:"Facebook",isRecurring:!1,status:"beklemede",processingFee:7.5,netAmount:242.5}],A=["Website","Mobile App","Facebook","Instagram","WhatsApp","SMS"],w=["Kredi Kartı","Banka Kartı","Dijital Cüzdan","Kripto Para","QR Kod"],S=["Google Ads","Facebook","Instagram","Twitter","YouTube","E-posta","SMS","Doğrudan","Diğer"];function C(){const[C,T]=e.useState(N),[D,R]=e.useState(""),[B,M]=e.useState(!1),[z,K]=e.useState(!1),[F,E]=e.useState(null),[P,Y]=e.useState(!1),[I,O]=e.useState({}),[L,U]=e.useState([]),G=e.useMemo(()=>({fields:f,groups:v,dependencies:j,validationRules:k}),[]),W=e.useMemo(()=>({baseUrl:"/donations/online",paramPrefix:"f_",excludeFromUrl:["search"],arrayDelimiter:","}),[]),Q=e.useMemo(()=>({storageKey:"donations_saved_filters",maxSavedFilters:10,defaultFilters:[]}),[]),q=e.useMemo(()=>function(){const e=(new Date).toISOString();return[{id:"successful",name:"Başarılı Bağışlar",filters:{status:["başarılı"]},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e},{id:"pending",name:"Bekleyen Bağışlar",filters:{status:["beklemede"]},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e},{id:"recurring",name:"Düzenli Bağışlar",filters:{isRecurring:"true"},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e},{id:"high_amount",name:"Yüksek Tutarlı Bağışlar",filters:{amountRange:{min:1e3}},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e},{id:"this_month",name:"Bu Ay",filters:{dateRange:{start:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],end:(new Date).toISOString().split("T")[0]}},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e},{id:"credit_card",name:"Kredi Kartı Bağışları",filters:{paymentMethod:["Kredi Kartı"]},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e},{id:"mobile_donations",name:"Mobil Bağışlar",filters:{platform:["Mobil Uygulama"]},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e},{id:"social_media",name:"Sosyal Medya Bağışları",filters:{referralSource:["Facebook Ads","Sosyal Medya"]},pageType:"donations",isQuickFilter:!0,createdAt:e,updatedAt:e,usageCount:0,lastUsed:e}]}(),[]),[_,H]=e.useState({donorName:"",donorEmail:"",donorPhone:"",amount:"",currency:"TRY",platform:"Website",paymentMethod:"Kredi Kartı",transactionId:"",purpose:"",campaign:"",referralSource:"",isRecurring:!1,recurringPeriod:"Aylık",notes:""}),$=e.useMemo(()=>C.filter(e=>{if(D){const a=D.toLowerCase();if(!(e.donorName.toLowerCase().includes(a)||e.donorEmail.toLowerCase().includes(a)||e.transactionId.toLowerCase().includes(a)||e.platform.toLowerCase().includes(a)||e.purpose.toLowerCase().includes(a)))return!1}for(const[a,r]of Object.entries(I))if(r&&(!Array.isArray(r)||0!==r.length))switch(a){case"search":{const a=r.toLowerCase();if(!(e.donorName.toLowerCase().includes(a)||e.donorEmail.toLowerCase().includes(a)||e.transactionId.toLowerCase().includes(a)))return!1;break}case"donorName":if(!e.donorName.toLowerCase().includes(r.toLowerCase()))return!1;break;case"donorEmail":if(!e.donorEmail.toLowerCase().includes(r.toLowerCase()))return!1;break;case"status":if(Array.isArray(r)&&!r.includes(e.status))return!1;break;case"platform":if(Array.isArray(r)&&!r.includes(e.platform))return!1;break;case"paymentMethod":if(Array.isArray(r)&&!r.includes(e.paymentMethod))return!1;break;case"amountRange":if(void 0!==r.min&&e.amount<r.min)return!1;if(void 0!==r.max&&e.amount>r.max)return!1;break;case"currency":if(Array.isArray(r)&&!r.includes(e.currency))return!1;break;case"purpose":if(Array.isArray(r)&&!r.includes(e.purpose))return!1;break;case"isRecurring":{const a="true"===r;if(e.isRecurring!==a)return!1;break}case"recurringPeriod":if(Array.isArray(r)&&e.recurringPeriod&&!r.includes(e.recurringPeriod))return!1;break;case"referralSource":if(Array.isArray(r)&&e.referralSource&&!r.includes(e.referralSource))return!1;break;case"campaign":if(e.campaign&&!e.campaign.toLowerCase().includes(r.toLowerCase()))return!1;break;case"dateRange":{const a=new Date(e.date);if(r.start&&a<new Date(r.start))return!1;if(r.end&&a>new Date(r.end))return!1;break}case"transactionId":if(!e.transactionId.toLowerCase().includes(r.toLowerCase()))return!1}return!0}),[C,D,I]),V=$.reduce((e,a)=>e+a.amount,0),Z=$.reduce((e,a)=>e+a.processingFee,0),J=$.filter(e=>e.isRecurring).length,X=e.useMemo(()=>A.map(e=>{const a=$.filter(a=>a.platform===e);return{platform:e,count:a.length,amount:a.reduce((e,a)=>e+a.amount,0)}}).filter(e=>e.count>0),[$]),ee=e.useMemo(()=>S.map(e=>{const a=$.filter(a=>a.referralSource===e);return{source:e,count:a.length,amount:a.reduce((e,a)=>e+a.amount,0)}}).filter(e=>e.count>0),[$]),ae=[{key:"date",header:"Tarih"},{key:"transactionId",header:"İşlem No"},{key:"donorName",header:"Bağışçı"},{key:"donorEmail",header:"E-posta"},{key:"platform",header:"Platform",render:(e,r)=>a.jsx("span",{className:"px-2 py-1 rounded text-xs "+("Website"===r.platform?"bg-blue-100 text-blue-800":"Mobile App"===r.platform?"bg-green-100 text-green-800":"Facebook"===r.platform?"bg-blue-100 text-blue-800":"Instagram"===r.platform?"bg-pink-100 text-pink-800":"WhatsApp"===r.platform?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:r.platform})},{key:"paymentMethod",header:"Ödeme Yöntemi"},{key:"amount",header:"Tutar",render:(e,a)=>`${a.amount.toLocaleString("tr-TR")} ${a.currency}`},{key:"isRecurring",header:"Düzenli",render:(e,r)=>a.jsx("span",{className:"px-2 py-1 rounded text-xs "+(r.isRecurring?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:r.isRecurring?`Evet (${r.recurringPeriod})`:"Hayır"})},{key:"purpose",header:"Amaç"},{key:"campaign",header:"Kampanya"},{key:"status",header:"Durum",render:(e,r)=>a.jsx("span",{className:"px-2 py-1 rounded text-xs "+("başarılı"===r.status?"bg-green-100 text-green-800":"beklemede"===r.status?"bg-yellow-100 text-yellow-800":"başarısız"===r.status?"bg-red-100 text-red-800":"iptal"===r.status?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"),children:r.status})},{key:"id",header:"İşlemler",render:(e,r)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>re(r),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),a.jsx("button",{onClick:()=>te(r.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],re=e=>{E(e),H({donorName:e.donorName,donorEmail:e.donorEmail,donorPhone:e.donorPhone||"",amount:e.amount.toString(),currency:e.currency,platform:e.platform,paymentMethod:e.paymentMethod,transactionId:e.transactionId,purpose:e.purpose,campaign:e.campaign||"",referralSource:e.referralSource||"",isRecurring:e.isRecurring,recurringPeriod:e.recurringPeriod||"Aylık",notes:e.notes||""}),M(!0)},te=e=>{confirm("Bu online bağışı silmek istediğinizden emin misiniz?")&&T(C.filter(a=>a.id!==e))},le=()=>{H({donorName:"",donorEmail:"",donorPhone:"",amount:"",currency:"TRY",platform:"Website",paymentMethod:"Kredi Kartı",transactionId:"",purpose:"",campaign:"",referralSource:"",isRecurring:!1,recurringPeriod:"Aylık",notes:""})};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Online Bağışlar"}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Dijital platform bağışlarını yönetin ve analiz edin"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[a.jsx(r,{size:18}),"Analitik"]}),a.jsxs("button",{onClick:()=>{E(null),le(),M(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[a.jsx(t,{size:18}),"Yeni Online Bağış"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(x,{title:"Toplam Bağış",value:V,change:12,changeType:"increase",period:"Bu Ay",trend:[45,52,48,61,55,67,73]}),a.jsx(g,{title:"Net Tutar",value:V-Z,change:8,changeType:"increase",period:"Net Tutar",trend:[32,38,35,42,39,45,48]}),a.jsx(b,{title:"Benzersiz Bağışçı",value:new Set($.map(e=>e.donorEmail)).size,change:15,changeType:"increase",period:"Benzersiz Bağışçı",trend:[12,15,13,18,16,21,24]}),a.jsx(h,{title:"İşlem Ücreti",value:Z,change:3,changeType:"decrease",period:"İşlem Ücreti",trend:[8,7,9,6,7,5,6]})]}),a.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20",children:[a.jsxs("h3",{className:"text-xl font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[a.jsx(l,{className:"text-blue-600",size:24}),"Platform Dağılımı"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:X.map(e=>a.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 rounded-xl p-5 border border-slate-200 hover:shadow-lg transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-semibold text-slate-800",children:e.platform}),a.jsx(s,{className:"text-blue-500",size:20})]}),a.jsxs("p",{className:"text-sm text-slate-600 mb-1",children:[e.count," bağış"]}),a.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[e.amount.toLocaleString("tr-TR")," ₺"]})]},e.platform))})]}),a.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-4 mb-6",children:[a.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl border transition-all duration-200 "+(Object.keys(I).length>0?"bg-blue-50 border-blue-300 text-blue-700 shadow-md":"bg-white border-slate-300 text-slate-700 hover:bg-slate-50 hover:shadow-md"),children:[a.jsx(n,{size:16}),"Gelişmiş Filtre",Object.keys(I).length>0&&a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:Object.keys(I).length})]}),Object.keys(I).length>0&&a.jsx("button",{onClick:()=>{O({}),R("")},className:"px-4 py-2 text-slate-600 hover:text-slate-800 border border-slate-300 rounded-xl hover:bg-slate-50 transition-all duration-200",children:"Filtreleri Temizle"}),a.jsxs("div",{className:"flex gap-3 ml-auto",children:[a.jsxs("button",{onClick:()=>m("online-bagislar.csv",$),className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-xl hover:from-green-700 hover:to-emerald-700 flex items-center gap-2 transition-all duration-200 shadow-lg hover:shadow-xl",children:[a.jsx(i,{size:16}),"CSV"]}),a.jsxs("button",{onClick:()=>u($,{}),className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-4 py-2 rounded-xl hover:from-blue-700 hover:to-cyan-700 flex items-center gap-2 transition-all duration-200 shadow-lg hover:shadow-xl",children:[a.jsx(y,{size:16}),"Excel"]}),a.jsxs("button",{onClick:()=>p($,{}),className:"bg-gradient-to-r from-red-600 to-pink-600 text-white px-4 py-2 rounded-xl hover:from-red-700 hover:to-pink-700 flex items-center gap-2 transition-all duration-200 shadow-lg hover:shadow-xl",children:[a.jsx(i,{size:16}),"PDF"]})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:a.jsx(o,{columns:ae,data:$})})]})]}),a.jsx(d,{isOpen:B,onClose:()=>M(!1),title:F?"Online Bağış Düzenle":"Yeni Online Bağış",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=parseFloat(_.amount),r=.03*a,t=a-r;if(F)T(C.map(e=>e.id===F.id?{...e,..._,amount:a,processingFee:r,netAmount:t}:e));else{const e={id:Date.now().toString(),date:(new Date).toISOString().split("T")[0],..._,donorPhone:_.donorPhone||void 0,amount:a,processingFee:r,netAmount:t,status:"başarılı"};T([...C,e])}M(!1),E(null),le()},className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),a.jsx("input",{type:"text",value:_.donorName,onChange:e=>H({..._,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),a.jsx("input",{type:"email",value:_.donorEmail,onChange:e=>H({..._,donorEmail:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),a.jsx("input",{type:"tel",value:_.donorPhone,onChange:e=>H({..._,donorPhone:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),a.jsx("input",{type:"number",step:"0.01",value:_.amount,onChange:e=>H({..._,amount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),a.jsxs("select",{value:_.currency,onChange:e=>H({..._,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"TRY",children:"TRY"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Platform"}),a.jsx("select",{value:_.platform,onChange:e=>H({..._,platform:e.target.value}),className:"w-full border rounded px-3 py-2",children:A.map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ödeme Yöntemi"}),a.jsx("select",{value:_.paymentMethod,onChange:e=>H({..._,paymentMethod:e.target.value}),className:"w-full border rounded px-3 py-2",children:w.map(e=>a.jsx("option",{value:e,children:e},e))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"İşlem No"}),a.jsx("input",{type:"text",value:_.transactionId,onChange:e=>H({..._,transactionId:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),a.jsxs("select",{value:_.purpose,onChange:e=>H({..._,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"Seçiniz"}),a.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),a.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),a.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),a.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),a.jsx("option",{value:"Kurban",children:"Kurban"}),a.jsx("option",{value:"Ramazan",children:"Ramazan"}),a.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kampanya"}),a.jsx("input",{type:"text",value:_.campaign,onChange:e=>H({..._,campaign:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Kampanya adı (opsiyonel)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Yönlendirme Kaynağı"}),a.jsxs("select",{value:_.referralSource,onChange:e=>H({..._,referralSource:e.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"Seçiniz"}),S.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:_.isRecurring,onChange:e=>H({..._,isRecurring:e.target.checked}),className:"mr-2"}),"Düzenli Bağış"]}),_.isRecurring&&a.jsxs("select",{value:_.recurringPeriod,onChange:e=>H({..._,recurringPeriod:e.target.value}),className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"Aylık",children:"Aylık"}),a.jsx("option",{value:"Üç Aylık",children:"Üç Aylık"}),a.jsx("option",{value:"Altı Aylık",children:"Altı Aylık"}),a.jsx("option",{value:"Yıllık",children:"Yıllık"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),a.jsx("textarea",{value:_.notes,onChange:e=>H({..._,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:F?"Güncelle":"Kaydet"})]})]})}),a.jsx(d,{isOpen:z,onClose:()=>K(!1),title:"Online Bağış Analitiği",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Platform Performansı"}),a.jsx("div",{className:"space-y-2",children:X.map(e=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[a.jsx("span",{className:"font-medium",children:e.platform}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[e.count," bağış"]}),a.jsxs("div",{className:"font-bold",children:[e.amount.toLocaleString("tr-TR")," ₺"]})]})]},e.platform))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Yönlendirme Kaynakları"}),a.jsx("div",{className:"space-y-2",children:ee.map(e=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[a.jsx("span",{className:"font-medium",children:e.source}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[e.count," bağış"]}),a.jsxs("div",{className:"font-bold",children:[e.amount.toLocaleString("tr-TR")," ₺"]})]})]},e.source))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Genel İstatistikler"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-3 bg-blue-50 rounded",children:[a.jsx("div",{className:"text-sm text-blue-600",children:"Ortalama Bağış"}),a.jsxs("div",{className:"text-xl font-bold text-blue-900",children:[$.length>0?(V/$.length).toLocaleString("tr-TR"):"0"," ₺"]})]}),a.jsxs("div",{className:"p-3 bg-green-50 rounded",children:[a.jsx("div",{className:"text-sm text-green-600",children:"Başarı Oranı"}),a.jsxs("div",{className:"text-xl font-bold text-green-900",children:[$.length>0?Math.round($.filter(e=>"başarılı"===e.status).length/$.length*100):0,"%"]})]}),a.jsxs("div",{className:"p-3 bg-purple-50 rounded",children:[a.jsx("div",{className:"text-sm text-purple-600",children:"Düzenli Bağış Oranı"}),a.jsxs("div",{className:"text-xl font-bold text-purple-900",children:[$.length>0?Math.round(J/$.length*100):0,"%"]})]}),a.jsxs("div",{className:"p-3 bg-orange-50 rounded",children:[a.jsx("div",{className:"text-sm text-orange-600",children:"Ortalama İşlem Ücreti"}),a.jsxs("div",{className:"text-xl font-bold text-orange-900",children:[$.length>0?(Z/$.length).toLocaleString("tr-TR"):"0"," ₺"]})]})]})]})]})}),a.jsx(c,{isOpen:P,onClose:()=>Y(!1),onApplyFilters:e=>{O(e),Y(!1)},onSaveFilter:e=>{const a={...e,id:Date.now().toString(),createdAt:(new Date).toISOString()};U(e=>[...e,a])},onLoadFilter:e=>{O(e.filters)},fields:G.fields,pageType:"donations",urlConfig:W,savedFiltersConfig:Q,quickFilters:q,savedFilters:L,initialFilters:I})]})}export{C as default};
