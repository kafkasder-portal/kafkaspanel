import{r as e,j as a,e as s,T as l,s as t}from"../assets/index-C7XW2vnU.js";import{D as r}from"./DataTable-BR_3tqT5.js";import{e as d}from"./exportToCsv-DLkyd1nM.js";import{R as n,B as i,C as m,X as o,Y as c,T as x,a as u,P as h,b as p,c as j}from"./PieChart-DKeYt9dB.js";import{P as y}from"./pen-square-C-SOcf8u.js";const b=[{id:"1",name:"Kurumsal Bağış - ABC Şirketi",code:"SRC-001",type:"Kaynak",category:"Kurumsal Bağış",amount:5e4,date:"2024-01-15",description:"ABC Şirketi kurumsal bağışı",fund:"Genel Fon",status:"Onaylandı",responsible:"Ahmet Yılmaz"},{id:"2",name:"Gıda Paketi Alımı",code:"EXP-001",type:"Harcama",category:"Gıda Malzemesi",amount:-15e3,date:"2024-01-14",description:"Aylık gıda paketi malzeme alımı",fund:"Yardım Fonu",status:"Onaylandı",responsible:"Fatma Demir"},{id:"3",name:"Bireysel Bağışlar",code:"SRC-002",type:"Kaynak",category:"Bireysel Bağış",amount:25e3,date:"2024-01-13",description:"Çeşitli bireysel bağışların toplamı",fund:"Genel Fon",status:"Onaylandı",responsible:"Mehmet Öz"},{id:"4",name:"Eğitim Materyali",code:"EXP-002",type:"Harcama",category:"Eğitim Malzemesi",amount:-8e3,date:"2024-01-12",description:"Öğrenci kırtasiye ve kitap alımı",fund:"Eğitim Fonu",status:"Beklemede",responsible:"Ayşe Kaya"}],g=[{name:"Kurumsal Bağış",kaynak:5e4,harcama:0},{name:"Bireysel Bağış",kaynak:25e3,harcama:0},{name:"Gıda Malzemesi",kaynak:0,harcama:15e3},{name:"Eğitim Malzemesi",kaynak:0,harcama:8e3}],f=[{name:"Kurumsal Bağış",value:5e4,color:"#0088FE"},{name:"Bireysel Bağış",value:25e3,color:"#00C49F"},{name:"Gıda Malzemesi",value:15e3,color:"#FFBB28"},{name:"Eğitim Malzemesi",value:8e3,color:"#FF8042"}];function k(){const[k,N]=e.useState(""),[v,K]=e.useState(!1),[w,B]=e.useState("all"),[S,F]=e.useState("all"),T=e.useMemo(()=>{let e=b;return"all"!==w&&(e=e.filter(e=>e.type===w)),"all"!==S&&(e=e.filter(e=>e.status===S)),k&&(e=e.filter(e=>JSON.stringify(e).toLowerCase().includes(k.toLowerCase()))),e},[k,w,S]),C=e.useMemo(()=>T.filter(e=>"Kaynak"===e.type).reduce((e,a)=>e+a.amount,0),[T]),z=e.useMemo(()=>Math.abs(T.filter(e=>"Harcama"===e.type).reduce((e,a)=>e+a.amount,0)),[T]),M=[{key:"code",header:"Kod"},{key:"name",header:"Açıklama"},{key:"type",header:"Tip",render:e=>{const s=String(e||"");return a.jsxs("span",{className:"flex items-center gap-1 rounded-full px-2 py-1 text-xs "+("Kaynak"===s?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[a.jsx(l,{className:"h-3 w-3"}),s]})}},{key:"category",header:"Kategori"},{key:"amount",header:"Tutar (TL)",render:e=>{const s=Number(e)||0;return a.jsxs("span",{className:s>0?"text-green-600 font-medium":"text-red-600 font-medium",children:["₺",Math.abs(s).toLocaleString()]})}},{key:"fund",header:"Fon"},{key:"date",header:"Tarih"},{key:"status",header:"Durum",render:e=>{const s={"Onaylandı":"bg-green-100 text-green-700",Beklemede:"bg-yellow-100 text-yellow-700","İptal":"bg-red-100 text-red-700"},l=String(e||""),t=l;return a.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${s[t]||s.Beklemede}`,children:l})}},{key:"responsible",header:"Sorumlu"},{key:"actions",header:"İşlemler",render:()=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:a.jsx(y,{className:"h-4 w-4"})}),a.jsx("button",{className:"rounded p-1 text-red-600 hover:bg-red-50",title:"Sil",children:a.jsx(t,{className:"h-4 w-4"})})]})}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-2",children:[a.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-1 text-sm text-white",children:[a.jsx(s,{className:"h-4 w-4"}),"Yeni Kayıt"]}),a.jsxs("select",{value:w,onChange:e=>B(e.target.value),className:"rounded border bg-background px-2 py-1 text-sm",children:[a.jsx("option",{value:"all",children:"Tüm Tipler"}),a.jsx("option",{value:"Kaynak",children:"Kaynak"}),a.jsx("option",{value:"Harcama",children:"Harcama"})]}),a.jsxs("select",{value:S,onChange:e=>F(e.target.value),className:"rounded border bg-background px-2 py-1 text-sm",children:[a.jsx("option",{value:"all",children:"Tüm Durumlar"}),a.jsx("option",{value:"Onaylandı",children:"Onaylandı"}),a.jsx("option",{value:"Beklemede",children:"Beklemede"}),a.jsx("option",{value:"İptal",children:"İptal"})]}),a.jsx("input",{value:k,onChange:e=>N(e.target.value),className:"min-w-64 flex-1 rounded border px-2 py-1 text-sm",placeholder:"Kaynak/Harcama ara..."}),a.jsx("button",{className:"rounded bg-blue-600 px-3 py-1 text-sm text-white",children:"Ara"}),a.jsx("button",{className:"rounded border px-3 py-1 text-sm",children:"Filtre"}),a.jsx("button",{onClick:()=>d("kaynak-harcama.csv",T),className:"rounded bg-gray-600 px-3 py-1 text-sm text-white",children:"İndir"}),a.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[T.length," Kayıt"]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[a.jsxs("div",{className:"rounded border bg-card p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Kaynak"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₺",C.toLocaleString()]})]}),a.jsxs("div",{className:"rounded border bg-card p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Harcama"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["₺",z.toLocaleString()]})]}),a.jsxs("div",{className:"rounded border bg-card p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Net Bakiye"}),a.jsxs("p",{className:"text-2xl font-bold "+(C-z>0?"text-green-600":"text-red-600"),children:["₺",(C-z).toLocaleString()]})]}),a.jsxs("div",{className:"rounded border bg-card p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Bekleyen İşlem"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:T.filter(e=>"Beklemede"===e.status).length})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"rounded border bg-card p-6",children:[a.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Kaynak vs Harcama"}),a.jsx(e.Suspense,{fallback:a.jsx("div",{className:"flex h-[300px] items-center justify-center",children:"Grafik yükleniyor..."}),children:a.jsx(n,{width:"100%",height:300,children:a.jsxs(i,{data:g,children:[a.jsx(m,{strokeDasharray:"3 3"}),a.jsx(o,{dataKey:"name"}),a.jsx(c,{}),a.jsx(x,{}),a.jsx(u,{dataKey:"kaynak",fill:"#22c55e",name:"Kaynak"}),a.jsx(u,{dataKey:"harcama",fill:"#ef4444",name:"Harcama"})]})})})]}),a.jsxs("div",{className:"rounded border bg-card p-6",children:[a.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Kategori Dağılımı"}),a.jsx(e.Suspense,{fallback:a.jsx("div",{className:"flex h-[300px] items-center justify-center",children:"Grafik yükleniyor..."}),children:a.jsx(n,{width:"100%",height:300,children:a.jsxs(h,{children:[a.jsx(p,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:a})=>`${e} ${(100*(a||0)).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:f.map((e,s)=>a.jsx(j,{fill:e.color},`cell-${s}`))}),a.jsx(x,{})]})})})]})]}),a.jsx(r,{columns:M,data:T}),v&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:a.jsxs("div",{className:"w-full max-w-lg rounded-lg bg-white p-6",children:[a.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"Yeni Kaynak/Harcama Ekle"}),a.jsxs("form",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Kod"}),a.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Tip"}),a.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[a.jsx("option",{value:"Kaynak",children:"Kaynak"}),a.jsx("option",{value:"Harcama",children:"Harcama"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Açıklama"}),a.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Kategori"}),a.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[a.jsx("option",{children:"Seçiniz..."}),a.jsx("option",{children:"Kurumsal Bağış"}),a.jsx("option",{children:"Bireysel Bağış"}),a.jsx("option",{children:"Gıda Malzemesi"}),a.jsx("option",{children:"Eğitim Malzemesi"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Fon"}),a.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",children:[a.jsx("option",{children:"Seçiniz..."}),a.jsx("option",{children:"Genel Fon"}),a.jsx("option",{children:"Yardım Fonu"}),a.jsx("option",{children:"Eğitim Fonu"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Tutar (TL)"}),a.jsx("input",{type:"number",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Tarih"}),a.jsx("input",{type:"date",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Sorumlu Kişi"}),a.jsx("input",{type:"text",className:"mt-1 w-full rounded border px-3 py-2 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Detay Açıklama"}),a.jsx("textarea",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",rows:3})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>K(!1),className:"flex-1 rounded border px-4 py-2 text-sm",children:"İptal"}),a.jsx("button",{type:"submit",className:"flex-1 rounded bg-green-600 px-4 py-2 text-sm text-white",children:"Kaydet"})]})]})]})})]})}export{k as default};
