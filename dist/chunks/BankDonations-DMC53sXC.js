import{r as e,j as a,g as n}from"../assets/index-dW79Uy5k.js";import{D as s}from"./DataTable-Co2fK-v0.js";import{M as r}from"./Modal-BBek2lFh.js";import{e as l}from"./exportToCsv-DLkyd1nM.js";import{L as t}from"./LazyCameraScanner-CZrOjs6-.js";import{e as o,a as i}from"./pdfExport-COs4Ncag.js";import{F as d}from"./jspdf.plugin.autotable-DPZz52D5.js";const c=[{id:"1",date:"2024-01-15",transactionDate:"2024-01-15",donorName:"Mehmet Yılmaz",donorIban:"TR33 0006 1005 1978 6457 8413 26",amount:2500,currency:"TRY",bankName:"Ziraat Bankası",accountName:"Dernek Genel Hesap",transactionRef:"TXN123456789",description:"EFT Gönderimi",purpose:"Genel Bağış",status:"eşleştirildi",matchedDonor:"Mehmet Yılmaz",notes:"Düzenli bağışçı"},{id:"2",date:"2024-01-14",transactionDate:"2024-01-14",donorName:"Bilinmeyen",amount:1e3,currency:"TRY",bankName:"İş Bankası",accountName:"Dernek Eğitim Hesap",transactionRef:"TXN987654321",description:"Havale",purpose:"Belirsiz",status:"beklemede",notes:"Bağışçı bilgisi eksik"}],m=[{name:"Dernek Genel Hesap",iban:"TR33 0006 1005 1978 6457 8413 26",bank:"Ziraat Bankası"},{name:"Dernek Eğitim Hesap",iban:"TR64 0001 2009 4520 0058 0012 34",bank:"İş Bankası"},{name:"Dernek Sağlık Hesap",iban:"TR98 0004 6007 8800 0000 1234 56",bank:"Akbank"}];function u(){const[u,p]=e.useState(c),[x,h]=e.useState(""),[b,j]=e.useState(!1),[N,g]=e.useState(!1),[v,k]=e.useState(null),[f,y]=e.useState(null),[B,R]=e.useState({donorName:"",donorIban:"",amount:"",currency:"TRY",bankName:"",accountName:"",transactionRef:"",description:"",purpose:"",notes:""}),[D,S]=e.useState({donorName:"",donorPhone:"",donorEmail:"",purpose:""}),[T,w]=e.useState(!1),C=e.useMemo(()=>u.filter(e=>JSON.stringify(e).toLowerCase().includes(x.toLowerCase())),[u,x]),E=C.reduce((e,a)=>e+a.amount,0),Y=C.filter(e=>"beklemede"===e.status).length,z=[{key:"transactionDate",header:"İşlem Tarihi"},{key:"transactionRef",header:"Referans No"},{key:"donorName",header:"Gönderen"},{key:"amount",header:"Tutar",render:(e,a)=>`${a.amount.toLocaleString("tr-TR")} ${a.currency}`},{key:"bankName",header:"Banka"},{key:"accountName",header:"Hesap"},{key:"description",header:"Açıklama"},{key:"purpose",header:"Amaç"},{key:"status",header:"Durum",render:(e,n)=>a.jsx("span",{className:"px-2 py-1 rounded text-xs "+("eşleştirildi"===n.status?"bg-green-100 text-green-800":"onaylandı"===n.status?"bg-blue-100 text-blue-800":"beklemede"===n.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:n.status})},{key:"id",header:"İşlemler",render:(e,n)=>a.jsxs("div",{className:"flex gap-2",children:["beklemede"===n.status&&a.jsx("button",{onClick:()=>$(n),className:"text-green-600 hover:text-green-800 text-sm",children:"Eşleştir"}),a.jsx("button",{onClick:()=>G(n),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Düzenle"}),a.jsx("button",{onClick:()=>A(n.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Sil"})]})}],G=e=>{k(e),R({donorName:e.donorName,donorIban:e.donorIban||"",amount:e.amount.toString(),currency:e.currency,bankName:e.bankName,accountName:e.accountName,transactionRef:e.transactionRef,description:e.description,purpose:e.purpose,notes:e.notes||""}),j(!0)},$=e=>{y(e),S({donorName:"Bilinmeyen"!==e.donorName?e.donorName:"",donorPhone:"",donorEmail:"",purpose:"Belirsiz"!==e.purpose?e.purpose:""}),g(!0)},A=e=>{confirm("Bu banka bağışını silmek istediğinizden emin misiniz?")&&p(u.filter(a=>a.id!==e))},I=()=>{R({donorName:"",donorIban:"",amount:"",currency:"TRY",bankName:"",accountName:"",transactionRef:"",description:"",purpose:"",notes:""})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Banka Bağışları"}),a.jsx("button",{onClick:()=>{k(null),I(),j(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Yeni Banka Bağışı"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-600",children:"Toplam Bağış"}),a.jsx("p",{className:"text-2xl font-bold text-blue-900",children:C.length})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-green-600",children:"Toplam Tutar"}),a.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[E.toLocaleString("tr-TR")," ₺"]})]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-600",children:"Bekleyen"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:Y})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600",children:"Bugünkü"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"1"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Banka Hesaplarımız"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m.map((e,n)=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600",children:e.bank}),a.jsx("p",{className:"text-sm font-mono",children:e.iban})]},n))})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("input",{value:x,onChange:e=>h(e.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Gönderen, referans no, banka ile ara..."}),a.jsxs("select",{className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"Tüm Durumlar"}),a.jsx("option",{value:"eşleştirildi",children:"Eşleştirildi"}),a.jsx("option",{value:"onaylandı",children:"Onaylandı"}),a.jsx("option",{value:"beklemede",children:"Beklemede"}),a.jsx("option",{value:"iptal",children:"İptal"})]}),a.jsxs("select",{className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"Tüm Bankalar"}),a.jsx("option",{value:"Ziraat Bankası",children:"Ziraat Bankası"}),a.jsx("option",{value:"İş Bankası",children:"İş Bankası"}),a.jsx("option",{value:"Akbank",children:"Akbank"})]}),a.jsx("input",{type:"date",className:"border rounded px-3 py-2"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>l("bank-donations.csv",C),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center gap-2",children:[a.jsx(n,{size:16}),"CSV İndir"]}),a.jsxs("button",{onClick:()=>o(C,{}),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[a.jsx(d,{size:16}),"Excel İndir"]}),a.jsxs("button",{onClick:()=>i(C,{}),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-2",children:[a.jsx(n,{size:16}),"PDF İndir"]})]})]}),a.jsx(s,{columns:z,data:C})]}),a.jsxs(r,{isOpen:b,onClose:()=>j(!1),title:v?"Banka Bağışı Düzenle":"Yeni Banka Bağışı",children:[T&&a.jsx("div",{className:"mb-4",children:a.jsx(t,{onScanResult:e=>{e&&(null!=e.donorName&&R(a=>({...a,donorName:e.donorName??a.donorName})),null!=e.donorIban&&R(a=>({...a,donorIban:e.donorIban??a.donorIban})),null!=e.amount&&R(a=>({...a,amount:(e.amount??Number(a.amount||0)).toString()})),null!=e.currency&&R(a=>({...a,currency:["TRY","USD","EUR"].includes(e.currency)?e.currency:a.currency})),null!=e.bankName&&R(a=>({...a,bankName:e.bankName??a.bankName})),null!=e.transactionRef&&R(a=>({...a,transactionRef:e.transactionRef??a.transactionRef})),null!=e.description&&R(a=>({...a,description:e.description??a.description})),null!=e.purpose&&R(a=>({...a,purpose:e.purpose??a.purpose})),null!=e.notes&&R(a=>({...a,notes:e.notes??a.notes})),e.firstName&&e.lastName&&R(a=>({...a,donorName:`${e.firstName} ${e.lastName}`})),e.idNumber&&R(a=>({...a,description:`TC: ${e.idNumber}`})),e.passportNumber&&R(a=>({...a,description:`Pasaport: ${e.passportNumber}`})),e.phone&&R(a=>({...a,notes:a.notes?`${a.notes} | Tel: ${e.phone}`:`Tel: ${e.phone}`})),e.address&&R(a=>({...a,notes:a.notes?`${a.notes} | Adres: ${e.address}`:`Adres: ${e.address}`})),e.birthDate&&R(a=>({...a,notes:a.notes?`${a.notes} | Doğum: ${e.birthDate}`:`Doğum: ${e.birthDate}`})),w(!1))},onError:e=>{}})}),a.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),v)p(u.map(e=>e.id===v.id?{...e,...B,amount:parseFloat(B.amount)}:e));else{const e={id:Date.now().toString(),date:(new Date).toISOString().split("T")[0],transactionDate:(new Date).toISOString().split("T")[0],...B,amount:parseFloat(B.amount),status:"onaylandı"};p([...u,e])}j(!1),k(null),I()},className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gönderen Adı"}),a.jsx("input",{type:"text",value:B.donorName,onChange:e=>R({...B,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gönderen IBAN"}),a.jsx("input",{type:"text",value:B.donorIban,onChange:e=>R({...B,donorIban:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"TR33 0006 1005 1978 6457 8413 26"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tutar"}),a.jsx("input",{type:"number",step:"0.01",value:B.amount,onChange:e=>R({...B,amount:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Para Birimi"}),a.jsxs("select",{value:B.currency,onChange:e=>R({...B,currency:e.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"TRY",children:"TRY"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Banka"}),a.jsx("input",{type:"text",value:B.bankName,onChange:e=>R({...B,bankName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alıcı Hesap"}),a.jsxs("select",{value:B.accountName,onChange:e=>R({...B,accountName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"Seçiniz"}),m.map((e,n)=>a.jsx("option",{value:e.name,children:e.name},n))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Referans No"}),a.jsx("input",{type:"text",value:B.transactionRef,onChange:e=>R({...B,transactionRef:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"İşlem Açıklaması"}),a.jsx("input",{type:"text",value:B.description,onChange:e=>R({...B,description:e.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"EFT, Havale, vb."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),a.jsxs("select",{value:B.purpose,onChange:e=>R({...B,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"Seçiniz"}),a.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),a.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),a.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),a.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),a.jsx("option",{value:"Kurban",children:"Kurban"}),a.jsx("option",{value:"Ramazan",children:"Ramazan"}),a.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notlar"}),a.jsx("textarea",{value:B.notes,onChange:e=>R({...B,notes:e.target.value}),className:"w-full border rounded px-3 py-2",rows:3})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:v?"Güncelle":"Kaydet"})]})]})]}),a.jsx(r,{isOpen:N,onClose:()=>g(!1),title:"Bağışçı Eşleştir",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),f&&p(u.map(e=>e.id===f.id?{...e,donorName:D.donorName,purpose:D.purpose,status:"eşleştirildi",matchedDonor:D.donorName}:e)),g(!1),y(null),S({donorName:"",donorPhone:"",donorEmail:"",purpose:""})},className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"İşlem Bilgileri"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Tutar:"})," ",null==f?void 0:f.amount.toLocaleString("tr-TR")," ",null==f?void 0:f.currency]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Referans:"})," ",null==f?void 0:f.transactionRef]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Tarih:"})," ",null==f?void 0:f.transactionDate]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağışçı Adı"}),a.jsx("input",{type:"text",value:D.donorName,onChange:e=>S({...D,donorName:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Telefon"}),a.jsx("input",{type:"tel",value:D.donorPhone,onChange:e=>S({...D,donorPhone:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"E-posta"}),a.jsx("input",{type:"email",value:D.donorEmail,onChange:e=>S({...D,donorEmail:e.target.value}),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bağış Amacı"}),a.jsxs("select",{value:D.purpose,onChange:e=>S({...D,purpose:e.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"Seçiniz"}),a.jsx("option",{value:"Genel Bağış",children:"Genel Bağış"}),a.jsx("option",{value:"Eğitim Yardımı",children:"Eğitim Yardımı"}),a.jsx("option",{value:"Sağlık Yardımı",children:"Sağlık Yardımı"}),a.jsx("option",{value:"Gıda Yardımı",children:"Gıda Yardımı"}),a.jsx("option",{value:"Kurban",children:"Kurban"}),a.jsx("option",{value:"Ramazan",children:"Ramazan"}),a.jsx("option",{value:"Diğer",children:"Diğer"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"İptal"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Eşleştir"})]})]})})]})}export{u as default};
