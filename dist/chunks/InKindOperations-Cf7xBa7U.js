import{t as e,r as i,V as s,j as r,e as a,ao as n,aC as t,k as d,S as m,n as l,X as o,aa as u,q as c,ak as p}from"../assets/index-CzvAnh9f.js";import{e as N}from"./exportToCsv-DLkyd1nM.js";import{D as h}from"./DataTable-CBtBMNX8.js";import{M as b}from"./Modal-CXkm-C8J.js";import{S as x}from"./StatCard-3Oaqvq3F.js";import{u as v,t as g,o as f,s as y,n as D,e as j}from"./types-C2SbTJX7.js";import{V as K}from"./index-DX2TtJe9.js";import{E}from"./eye-C9FxZSh9.js";import{P as O}from"./pen-square-DRhBp83i.js";const V=e("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),I=e("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),U=f({operation_type:j(["received","distributed","transferred","returned"],{message:"İşlem türü seçiniz"}),item_name:y().min(1,"Ürün adı giriniz"),item_category:y().min(1,"Kategori seçiniz"),quantity:D().min(1,"Miktar giriniz"),unit:y().min(1,"Birim seçiniz"),unit_value:D().optional(),source:y().optional(),destination:y().optional(),beneficiary_id:y().optional(),warehouse_location:y().min(1,"Depo konumu giriniz"),expiry_date:y().optional(),notes:y().optional()}),_=["Gıda","Giyim","Temizlik","Kırtasiye","Oyuncak","Ev Eşyası","Elektronik","Kitap","Diğer"],k=["Adet","Kg","Gram","Litre","Paket","Kutu","Çuval","Koli"],w=["Ana Depo - A Blok","Ana Depo - B Blok","Ana Depo - C Blok","Şube Depo 1","Şube Depo 2","Soğuk Hava Deposu"];function S(){const[e,f]=i.useState([]),[y,D]=i.useState({totalReceived:0,totalDistributed:0,currentStock:0,todayOperations:0}),[j,S]=i.useState(!0),[C,T]=i.useState(""),[A,q]=i.useState("all"),[z,B]=i.useState("all"),[M,L]=i.useState("all"),[Y,H]=i.useState("all"),[R,F]=i.useState(!1),[G,P]=i.useState(null),[W,$]=i.useState([]),{register:J,handleSubmit:Z,formState:{errors:Q},reset:X,watch:ee}=v({resolver:g(U)}),ie=ee("operation_type"),se=ee("quantity"),re=ee("unit_value");i.useEffect(()=>{},[se,re]),i.useEffect(()=>{ae(),ne(),te()},[]);const ae=async()=>{try{const{data:e,error:i}=await s.from("in_kind_aids").select("\n          *,\n          beneficiaries (\n            name,\n            surname,\n            category\n          )\n        ").order("created_at",{ascending:!1});if(i)throw i;const r=(null==e?void 0:e.map(e=>({id:e.id,operation_type:"distributed",item_name:e.item_name,item_category:e.item_category,quantity:e.quantity,unit:e.unit,unit_value:e.unit_value,total_value:e.total_value,beneficiary_id:e.beneficiary_id,warehouse_location:e.warehouse_location||"Ana Depo - A Blok",expiry_date:e.expiry_date,operation_date:e.distributed_at||e.created_at,status:"distributed"===e.status?"completed":"pending",notes:e.notes,created_at:e.created_at,operator_id:"user1",beneficiaries:e.beneficiaries,operator:{name:"Admin User",email:"admin@example.com"}})))||[];f(r)}catch(e){K.error("Ayni yardım işlemleri yüklenirken hata oluştu")}finally{S(!1)}},ne=async()=>{try{const{data:e}=await s.from("in_kind_aids").select("quantity, total_value, status");if(e){const i=e.reduce((e,i)=>e+(i.quantity||0),0),s=e.filter(e=>"distributed"===e.status).reduce((e,i)=>e+(i.quantity||0),0),r=i-s,a=e.filter(e=>{const i=new Date(e.created_at||""),s=new Date;return i.toDateString()===s.toDateString()}).length;D({totalReceived:i,totalDistributed:s,currentStock:r,todayOperations:a})}}catch(e){}},te=async()=>{try{const{data:e,error:i}=await s.from("beneficiaries").select("id, name, surname, category").eq("status","active").order("name");if(i)throw i;$(e||[])}catch(e){}},de=i.useMemo(()=>e.filter(e=>{const i=""===C||e.item_name.toLowerCase().includes(C.toLowerCase())||e.item_category.toLowerCase().includes(C.toLowerCase())||e.warehouse_location.toLowerCase().includes(C.toLowerCase()),s="all"===A||e.operation_type===A,r="all"===z||e.item_category===z,a="all"===M||e.status===M;let n=!0;if("all"!==Y){const i=new Date(e.operation_date),s=new Date;switch(Y){case"today":n=i.toDateString()===s.toDateString();break;case"week":n=i>=new Date(s.getTime()-6048e5);break;case"month":n=i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear()}}return i&&s&&r&&a&&n}),[e,C,A,z,M,Y]),me=e=>{const i={received:{label:"Alındı",class:"bg-green-100 text-green-800",icon:n},distributed:{label:"Dağıtıldı",class:"bg-blue-100 text-blue-800",icon:t},transferred:{label:"Transfer",class:"bg-purple-100 text-purple-800",icon:I},returned:{label:"İade",class:"bg-orange-100 text-orange-800",icon:V}}[e]||{label:e,class:"bg-gray-100 text-gray-800",icon:n},s=i.icon;return r.jsxDEV("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${i.class}`,children:[r.jsxDEV(s,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:333,columnNumber:9},this),i.label]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:332,columnNumber:7},this)},le=e=>{const i={pending:{label:"Beklemede",class:"bg-yellow-100 text-yellow-800",icon:c},completed:{label:"Tamamlandı",class:"bg-green-100 text-green-800",icon:u},cancelled:{label:"İptal Edildi",class:"bg-red-100 text-red-800",icon:o}}[e]||{label:e,class:"bg-gray-100 text-gray-800",icon:u},s=i.icon;return r.jsxDEV("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${i.class}`,children:[r.jsxDEV(s,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:349,columnNumber:9},this),i.label]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:348,columnNumber:7},this)},oe=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),ue=e=>new Date(e).toLocaleDateString("tr-TR"),ce=[{key:"operation_type",header:"İşlem Türü",render:(e,i)=>me(i.operation_type)},{key:"item_info",header:"Ürün Bilgisi",render:(e,i)=>r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"font-medium",children:i.item_name},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:377,columnNumber:11},this),r.jsxDEV("div",{className:"text-sm text-muted-foreground",children:i.item_category},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:378,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:376,columnNumber:5},this)},{key:"quantity",header:"Miktar",render:(e,i)=>r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"font-medium",children:[i.quantity," ",i.unit]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:387,columnNumber:11},this),i.unit_value&&r.jsxDEV("div",{className:"text-sm text-muted-foreground",children:["Birim: ",oe(i.unit_value)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:389,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:386,columnNumber:5},this)},{key:"total_value",header:"Toplam Değer",render:(e,i)=>r.jsxDEV("div",{className:"font-medium text-green-600",children:oe(i.total_value)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:400,columnNumber:5},this)},{key:"beneficiaries",header:"İhtiyaç Sahibi",render:(e,i)=>r.jsxDEV("div",{children:i.beneficiaries?r.jsxDEV(r.Fragment,{children:[r.jsxDEV("div",{className:"font-medium",children:[i.beneficiaries.name," ",i.beneficiaries.surname]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:412,columnNumber:15},this),r.jsxDEV("div",{className:"text-sm text-muted-foreground",children:i.beneficiaries.category},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:413,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:411,columnNumber:7},this):r.jsxDEV("span",{className:"text-muted-foreground",children:"-"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:416,columnNumber:7},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:409,columnNumber:5},this)},{key:"warehouse_location",header:"Depo Konumu",render:(e,i)=>r.jsxDEV("div",{className:"flex items-center gap-1",children:[r.jsxDEV(p,{className:"h-3 w-3 text-muted-foreground"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:426,columnNumber:11},this),r.jsxDEV("span",{className:"text-sm",children:i.warehouse_location},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:427,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:425,columnNumber:5},this)},{key:"operation_date",header:"İşlem Tarihi",render:(e,i)=>ue(i.operation_date)},{key:"expiry_date",header:"Son Kullanma",render:(e,i)=>i.expiry_date?ue(i.expiry_date):"-"},{key:"status",header:"Durum",render:(e,i)=>le(i.status)},{key:"actions",header:"İşlemler",render:(e,i)=>r.jsxDEV("div",{className:"flex items-center gap-2",children:[r.jsxDEV("button",{className:"rounded p-1 text-gray-600 hover:bg-gray-50",title:"Detay",children:r.jsxDEV(E,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:455,columnNumber:13},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:451,columnNumber:11},this),"pending"===i.status&&r.jsxDEV("button",{onClick:()=>{P(i),F(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Düzenle",children:r.jsxDEV(O,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:466,columnNumber:15},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:458,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:450,columnNumber:5},this)}];return j?r.jsxDEV("div",{className:"flex h-64 items-center justify-center",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-2"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:478,columnNumber:11},this),r.jsxDEV("p",{className:"text-muted-foreground",children:"Yükleniyor..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:479,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:477,columnNumber:9},this)},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:476,columnNumber:7},this):r.jsxDEV("div",{className:"space-y-6",children:[r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{children:[r.jsxDEV("h1",{className:"text-2xl font-bold",children:"Ayni Yardım İşlemleri"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:490,columnNumber:11},this),r.jsxDEV("p",{className:"text-muted-foreground",children:"Ayni yardım işlemlerini kaydedin ve takip edin"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:491,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:489,columnNumber:9},this),r.jsxDEV("button",{onClick:()=>{P(null),F(!0)},className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[r.jsxDEV(a,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:500,columnNumber:11},this),"Yeni İşlem"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:493,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:488,columnNumber:7},this),r.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxDEV(x,{title:"Toplam Alınan",value:y.totalReceived.toString(),icon:n,accentClass:"bg-green-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:507,columnNumber:9},this),r.jsxDEV(x,{title:"Toplam Dağıtılan",value:y.totalDistributed.toString(),icon:t,accentClass:"bg-blue-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:513,columnNumber:9},this),r.jsxDEV(x,{title:"Mevcut Stok",value:y.currentStock.toString(),icon:I,accentClass:"bg-purple-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:519,columnNumber:9},this),r.jsxDEV(x,{title:"Bugünkü İşlemler",value:y.todayOperations.toString(),icon:d,accentClass:"bg-orange-100"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:525,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:506,columnNumber:7},this),r.jsxDEV("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border p-4",children:[r.jsxDEV("div",{className:"flex items-center gap-2",children:[r.jsxDEV(m,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:536,columnNumber:11},this),r.jsxDEV("input",{type:"text",placeholder:"İşlem ara...",value:C,onChange:e=>T(e.target.value),className:"min-w-64 rounded border px-3 py-2 text-sm"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:537,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:535,columnNumber:9},this),r.jsxDEV("select",{value:A,onChange:e=>q(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"all",children:"Tüm İşlem Türleri"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:551,columnNumber:11},this),r.jsxDEV("option",{value:"received",children:"Alınan"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:552,columnNumber:11},this),r.jsxDEV("option",{value:"distributed",children:"Dağıtılan"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:553,columnNumber:11},this),r.jsxDEV("option",{value:"transferred",children:"Transfer"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:554,columnNumber:11},this),r.jsxDEV("option",{value:"returned",children:"İade"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:555,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:546,columnNumber:9},this),r.jsxDEV("select",{value:z,onChange:e=>B(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"all",children:"Tüm Kategoriler"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:563,columnNumber:11},this),_.map(e=>r.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:565,columnNumber:11},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:558,columnNumber:9},this),r.jsxDEV("select",{value:M,onChange:e=>L(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"all",children:"Tüm Durumlar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:574,columnNumber:11},this),r.jsxDEV("option",{value:"pending",children:"Bekleyen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:575,columnNumber:11},this),r.jsxDEV("option",{value:"completed",children:"Tamamlanan"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:576,columnNumber:11},this),r.jsxDEV("option",{value:"cancelled",children:"İptal Edilen"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:577,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:569,columnNumber:9},this),r.jsxDEV("select",{value:Y,onChange:e=>H(e.target.value),className:"rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"all",children:"Tüm Tarihler"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:585,columnNumber:11},this),r.jsxDEV("option",{value:"today",children:"Bugün"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:586,columnNumber:11},this),r.jsxDEV("option",{value:"week",children:"Bu Hafta"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:587,columnNumber:11},this),r.jsxDEV("option",{value:"month",children:"Bu Ay"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:588,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:580,columnNumber:9},this),r.jsxDEV("button",{onClick:()=>N("ayni-yardim-islemleri.csv",de),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[r.jsxDEV(l,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:595,columnNumber:11},this),"İndir"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:591,columnNumber:9},this),r.jsxDEV("div",{className:"ml-auto text-sm text-muted-foreground",children:[de.length," işlem"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:599,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:534,columnNumber:7},this),r.jsxDEV(h,{columns:ce,data:de},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:605,columnNumber:7},this),r.jsxDEV(b,{open:R,onClose:()=>F(!1),children:[r.jsxDEV("div",{className:"flex items-center justify-between border-b p-4",children:[r.jsxDEV("h2",{className:"text-lg font-semibold",children:G?"İşlem Düzenle":"Yeni Ayni Yardım İşlemi"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:610,columnNumber:11},this),r.jsxDEV("button",{onClick:()=>F(!1),className:"h-8 w-8 rounded-full bg-red-600 text-white hover:bg-red-700",children:"×"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:613,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:609,columnNumber:9},this),r.jsxDEV("form",{onSubmit:Z(async e=>{try{const i=(e.quantity||0)*(e.unit_value||0),{error:r}=await s.from("in_kind_aids").insert({beneficiary_id:e.beneficiary_id,item_name:e.item_name,item_category:e.item_category,quantity:e.quantity,unit:e.unit,unit_value:e.unit_value,total_value:i,warehouse_location:e.warehouse_location,expiry_date:e.expiry_date,status:"pending",notes:e.notes});if(r)throw r;K.success("Ayni yardım işlemi başarıyla kaydedildi"),F(!1),X(),ae(),ne()}catch(i){K.error("Ayni yardım işlemi kaydedilirken hata oluştu")}}),className:"p-4 space-y-4",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"İşlem Türü *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:624,columnNumber:15},this),r.jsxDEV("select",{...J("operation_type"),className:"w-full rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:629,columnNumber:17},this),r.jsxDEV("option",{value:"received",children:"Alındı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:630,columnNumber:17},this),r.jsxDEV("option",{value:"distributed",children:"Dağıtıldı"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:631,columnNumber:17},this),r.jsxDEV("option",{value:"transferred",children:"Transfer"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:632,columnNumber:17},this),r.jsxDEV("option",{value:"returned",children:"İade"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:633,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:625,columnNumber:15},this),Q.operation_type&&r.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:Q.operation_type.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:636,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:623,columnNumber:13},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Ürün Kategorisi *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:641,columnNumber:15},this),r.jsxDEV("select",{...J("item_category"),className:"w-full rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:646,columnNumber:17},this),_.map(e=>r.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:648,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:642,columnNumber:15},this),Q.item_category&&r.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:Q.item_category.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:652,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:640,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:622,columnNumber:11},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Ürün Adı *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:658,columnNumber:13},this),r.jsxDEV("input",{type:"text",...J("item_name"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Ürün adını giriniz"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:659,columnNumber:13},this),Q.item_name&&r.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:Q.item_name.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:666,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:657,columnNumber:11},this),r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Miktar *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:672,columnNumber:15},this),r.jsxDEV("input",{type:"number",...J("quantity",{valueAsNumber:!0}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"0"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:673,columnNumber:15},this),Q.quantity&&r.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:Q.quantity.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:680,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:671,columnNumber:13},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Birim *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:685,columnNumber:15},this),r.jsxDEV("select",{...J("unit"),className:"w-full rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:690,columnNumber:17},this),k.map(e=>r.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:692,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:686,columnNumber:15},this),Q.unit&&r.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:Q.unit.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:696,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:684,columnNumber:13},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Birim Değer"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:701,columnNumber:15},this),r.jsxDEV("input",{type:"number",step:"0.01",...J("unit_value",{valueAsNumber:!0}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"0.00"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:702,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:700,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:670,columnNumber:11},this),("distributed"===ie||"transferred"===ie)&&r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"distributed"===ie?"İhtiyaç Sahibi":"Hedef"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:714,columnNumber:15},this),"distributed"===ie?r.jsxDEV("select",{...J("beneficiary_id"),className:"w-full rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:722,columnNumber:19},this),W.map(e=>r.jsxDEV("option",{value:e.id,children:[e.name," ",e.surname," - ",e.category]},e.id,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:724,columnNumber:15},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:718,columnNumber:13},this):r.jsxDEV("input",{type:"text",...J("destination"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Hedef konum"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:730,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:713,columnNumber:11},this),"received"===ie&&r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Kaynak"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:742,columnNumber:15},this),r.jsxDEV("input",{type:"text",...J("source"),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Ürünün geldiği yer"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:743,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:741,columnNumber:11},this),r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Depo Konumu *"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:754,columnNumber:15},this),r.jsxDEV("select",{...J("warehouse_location"),className:"w-full rounded border px-3 py-2 text-sm",children:[r.jsxDEV("option",{value:"",children:"Seçiniz..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:759,columnNumber:17},this),w.map(e=>r.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:761,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:755,columnNumber:15},this),Q.warehouse_location&&r.jsxDEV("p",{className:"text-sm text-red-600 mt-1",children:Q.warehouse_location.message},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:765,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:753,columnNumber:13},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Son Kullanma Tarihi"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:770,columnNumber:15},this),r.jsxDEV("input",{type:"date",...J("expiry_date"),className:"w-full rounded border px-3 py-2 text-sm"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:771,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:769,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:752,columnNumber:11},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium mb-1",children:"Notlar"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:780,columnNumber:13},this),r.jsxDEV("textarea",{...J("notes"),rows:3,className:"w-full rounded border px-3 py-2 text-sm",placeholder:"İşlem ile ilgili notlar..."},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:781,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:779,columnNumber:11},this),r.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsxDEV("button",{type:"button",onClick:()=>F(!1),className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:790,columnNumber:13},this),r.jsxDEV("button",{type:"submit",className:"flex items-center gap-2 rounded bg-primary px-4 py-2 text-sm text-white hover:bg-primary/90",children:[r.jsxDEV(a,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:801,columnNumber:15},this),G?"Güncelle":"Kaydet"]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:797,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:789,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:621,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:608,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/idrishamid/nev/src/pages/aid/InKindOperations.tsx",lineNumber:486,columnNumber:5},this)}export{S as default};
