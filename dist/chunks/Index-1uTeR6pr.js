import{r as e,j as t,U as s,X as a,S as n,a9 as l,ao as i,b as r,C as d,c,k as o,q as m,aj as u,i as x,a0 as h,s as p,g,E as j,b4 as f,b5 as y,p as N,v as b,e as v,F as w}from"../assets/index-dW79Uy5k.js";import{u as _,t as k,o as S,a as D,s as T,e as z,l as I}from"./types-DWSxFkmy.js";import{u as C}from"./useUserManagement-Be4kyYVj.js";import{V as M}from"./video-Det9spDy.js";import{V as A}from"./index-BPtWanD8.js";import{P as E}from"./pen-square-DLfSiTnY.js";import{T as O}from"./target-DsPB6sh5.js";import{X as K}from"./x-circle-ocBBIp2H.js";import{E as H}from"./eye-C2ZiGWXh.js";function B({selectedUserIds:i,onSelectionChange:r,placeholder:d="Kullanıcı ara...",excludeUserIds:c=[],maxSelections:o,className:m=""}){const[u,x]=e.useState(""),[h,p]=e.useState(!1),{users:g,isLoading:j,search:f}=C();e.useEffect(()=>{u.trim()&&f.setSearchQuery(u)},[u,f]);const y=g.filter(e=>{var t,s;return!!u.trim()&&!c.includes(e.id)&&((null==(t=e.full_name)?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null==(s=e.email)?void 0:s.toLowerCase().includes(u.toLowerCase())))}),N=g.filter(e=>i.includes(e.id));return t.jsxs("div",{className:`relative ${m}`,children:[N.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:N.map(e=>t.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:[t.jsx(s,{className:"h-3 w-3"}),t.jsx("span",{children:e.full_name||e.email}),t.jsx("button",{type:"button",onClick:()=>{return t=e.id,void r(i.filter(e=>e!==t));var t},className:"hover:bg-blue-200 rounded p-0.5",children:t.jsx(a,{className:"h-3 w-3"})})]},e.id))}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"relative",children:[t.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:u,onChange:e=>x(e.target.value),onFocus:()=>p(!0),onBlur:()=>setTimeout(()=>p(!1),200),placeholder:d,className:"w-full pl-10 pr-4 py-2 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"})]}),h&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[j&&t.jsxs("div",{className:"p-3 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mx-auto"}),t.jsx("span",{className:"ml-2",children:"Aranıyor..."})]}),!j&&0===y.length&&u&&t.jsx("div",{className:"p-3 text-center text-gray-500",children:"Kullanıcı bulunamadı"}),!j&&0===y.length&&!u&&t.jsx("div",{className:"p-3 text-center text-gray-500",children:"Aramaya başlamak için yazın"}),!j&&y.map(e=>{const a=i.includes(e.id),n=Boolean(o&&!a&&i.length>=o);return t.jsxs("button",{type:"button",onClick:()=>{return!n&&(t=e.id,void(i.includes(t)?r(i.filter(e=>e!==t)):(!o||i.length<o)&&r([...i,t])));var t},disabled:n,className:`w-full flex items-center gap-3 p-3 text-left hover:bg-gray-50 transition-colors ${a?"bg-blue-50 text-blue-700":""} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[t.jsx("div",{className:"flex-shrink-0",children:e.avatar_url?t.jsx("img",{src:e.avatar_url,alt:e.full_name||e.email,className:"h-8 w-8 rounded-full object-cover"}):t.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:t.jsx(s,{className:"h-4 w-4 text-gray-500"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium truncate",children:e.full_name||"İsimsiz Kullanıcı"}),t.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.email})]}),a&&t.jsx(l,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]},e.id)})]})]}),o&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.length," / ",o," kullanıcı seçildi"]})]})}const F=(e,t)=>{const s=(null==e?void 0:e.message)||`Error in ${t}`;throw i.error(s),new Error(s)},G={async getMeetings(){try{return[{id:"1",title:"Aylık Genel Kurul Toplantısı",description:"Dernek faaliyetlerinin değerlendirildiği aylık toplantı",start_date:new Date(Date.now()+1728e5).toISOString(),end_date:new Date(Date.now()+1728e5+72e5).toISOString(),location:"Dernek Merkezi - Konferans Salonu",meeting_type:"physical",status:"scheduled",created_by:"user1",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:"2",title:"Bütçe Planlama Toplantısı",description:"2024 yılı bütçe planlama ve değerlendirme toplantısı",start_date:new Date(Date.now()+432e6).toISOString(),end_date:new Date(Date.now()+432e6+108e5).toISOString(),meeting_type:"online",meeting_url:"https://meet.google.com/abc-def-ghi",status:"scheduled",created_by:"user2",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:"3",title:"Proje Koordinasyon Toplantısı",description:"Devam eden projelerin koordinasyonu",start_date:new Date(Date.now()-864e5).toISOString(),end_date:new Date(Date.now()-864e5+54e5).toISOString(),location:"Zoom Toplantısı",meeting_type:"hybrid",meeting_url:"https://zoom.us/j/123456789",status:"completed",created_by:"user3",created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:(new Date).toISOString()}]}catch(e){return F(e,"getMeetings"),[]}},async getMeeting(e){try{return(await this.getMeetings()).find(t=>t.id===e)||null}catch(t){return F(t,"getMeeting"),null}},async createMeeting(e){try{const t={id:`meeting_${Date.now()}`,title:e.title,description:e.description,start_date:e.start_date,end_date:e.end_date,location:e.location,meeting_type:e.meeting_type,meeting_url:e.meeting_url,status:"scheduled",created_by:"current_user",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return i.success("Toplantı başarıyla oluşturuldu"),t}catch(t){throw F(t,"createMeeting"),t}},async updateMeeting(e,t){try{const s=(await this.getMeetings()).find(t=>t.id===e);if(!s)throw new Error("Toplantı bulunamadı");const a={...s,...t,updated_at:(new Date).toISOString()};return i.success("Toplantı başarıyla güncellendi"),a}catch(s){throw F(s,"updateMeeting"),s}},async deleteMeeting(e){try{i.success("Toplantı başarıyla silindi")}catch(t){throw F(t,"deleteMeeting"),t}},async getAttendees(e){try{return[{id:"1",meeting_id:e,user_id:"user1",status:"accepted",response_date:(new Date).toISOString(),notes:"Katılacağım"},{id:"2",meeting_id:e,user_id:"user2",status:"invited",notes:""},{id:"3",meeting_id:e,user_id:"user3",status:"declined",response_date:new Date(Date.now()-864e5).toISOString(),notes:"Başka bir toplantım var"}]}catch(t){return F(t,"getAttendees"),[]}},async addAttendee(e,t){try{const s={id:`attendee_${Date.now()}`,meeting_id:e,user_id:t,status:"invited"};return i.success("Katılımcı eklendi"),s}catch(s){throw F(s,"addAttendee"),s}},async updateAttendeeStatus(e,t,s){try{i.success("Katılım durumu güncellendi")}catch(a){throw F(a,"updateAttendeeStatus"),a}},async getAgenda(e){try{return[{id:"1",meeting_id:e,title:"Açılış ve Katılımcı Tanıtımı",description:"Toplantının açılışı ve katılımcıların tanıtımı",duration_minutes:15,order_index:1,presenter_id:"user1"},{id:"2",meeting_id:e,title:"Geçen Ay Faaliyetlerinin Değerlendirilmesi",description:"Önceki dönem faaliyetlerinin detaylı incelenmesi",duration_minutes:30,order_index:2,presenter_id:"user2"},{id:"3",meeting_id:e,title:"Yeni Projeler ve Öneri Sunumları",description:"Gelecek dönem için planlanan projeler",duration_minutes:45,order_index:3,presenter_id:"user3"}].sort((e,t)=>e.order_index-t.order_index)}catch(t){return F(t,"getAgenda"),[]}},async addAgendaItem(e){try{const t={id:`agenda_${Date.now()}`,...e};return i.success("Gündem maddesi eklendi"),t}catch(t){throw F(t,"addAgendaItem"),t}},async updateAgendaItem(e,t){try{i.success("Gündem maddesi güncellendi")}catch(s){throw F(s,"updateAgendaItem"),s}},async deleteAgendaItem(e){try{i.success("Gündem maddesi silindi")}catch(t){throw F(t,"deleteAgendaItem"),t}},async getMinutes(e){try{return[{id:"1",meeting_id:e,content:"Toplantı saat 14:00'da başladı. Tüm katılımcılar mevcut.",created_by:"user1",created_at:(new Date).toISOString()}]}catch(t){return F(t,"getMinutes"),[]}},async addMinutes(e,t){try{const s={id:`minutes_${Date.now()}`,meeting_id:e,content:t,created_by:"current_user",created_at:(new Date).toISOString()};return i.success("Tutanak eklendi"),s}catch(s){throw F(s,"addMinutes"),s}},async getActionItems(e){try{return[{id:"1",meeting_id:e,title:"Bütçe raporu hazırlama",description:"Bir sonraki toplantı için detaylı bütçe raporu hazırlanacak",assigned_to:"user2",due_date:new Date(Date.now()+6048e5).toISOString(),status:"pending",created_at:(new Date).toISOString()},{id:"2",meeting_id:e,title:"Proje önerilerini gözden geçirme",description:"Sunulan proje önerilerinin teknik değerlendirmesi",assigned_to:"user3",due_date:new Date(Date.now()+2592e5).toISOString(),status:"in_progress",created_at:(new Date).toISOString()}]}catch(t){return F(t,"getActionItems"),[]}},async addActionItem(e){try{const t={id:`action_${Date.now()}`,...e,created_at:(new Date).toISOString()};return i.success("Eylem maddesi eklendi"),t}catch(t){throw F(t,"addActionItem"),t}},async updateActionItemStatus(e,t){try{i.success("Eylem durumu güncellendi")}catch(s){throw F(s,"updateActionItemStatus"),s}}},L=S({title:T().min(1,"Toplantı başlığı zorunludur"),description:T().optional(),start_date:T().min(1,"Başlangıç tarihi zorunludur"),end_date:T().min(1,"Bitiş tarihi zorunludur"),location:T().optional(),meeting_type:z(["physical","online","hybrid"]),meeting_url:T().url("Geçerli bir URL giriniz").optional().or(I("")),attendees:D(T()).optional()}).refine(e=>{const t=new Date(e.start_date);return new Date(e.end_date)>t},{message:"Bitiş tarihi başlangıç tarihinden sonra olmalıdır",path:["end_date"]});function P({onSuccess:s,onCancel:n,initialData:l,isEditMode:p=!1,meetingId:g}){const[j,f]=e.useState(!1),[y,N]=e.useState((null==l?void 0:l.attendee_ids)||[]),{user:b}=r(),{register:v,handleSubmit:w,watch:S,formState:{errors:D}}=_({resolver:k(L),defaultValues:{title:(null==l?void 0:l.title)||"",description:(null==l?void 0:l.description)||"",start_date:(null==l?void 0:l.start_date)?new Date(l.start_date).toISOString().slice(0,16):"",end_date:(null==l?void 0:l.end_date)?new Date(l.end_date).toISOString().slice(0,16):"",location:(null==l?void 0:l.location)||"",meeting_type:(null==l?void 0:l.meeting_type)||"physical",meeting_url:(null==l?void 0:l.meeting_url)||"",attendees:y}}),T=S("meeting_type");return t.jsxs(d,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold",children:p?"Toplantı Düzenle":"Yeni Toplantı Oluştur"}),n&&t.jsx(c,{variant:"ghost",size:"sm",onClick:n,children:t.jsx(a,{className:"h-4 w-4"})})]}),t.jsxs("form",{onSubmit:w(async e=>{f(!0);try{const t={title:e.title,description:e.description,start_date:new Date(e.start_date).toISOString(),end_date:new Date(e.end_date).toISOString(),location:e.location,meeting_type:e.meeting_type,meeting_url:e.meeting_url,status:"scheduled",created_by:(null==b?void 0:b.id)||"",attendee_ids:y};p&&g?(await G.updateMeeting(g,t),i.success("Toplantı güncellendi")):(await G.createMeeting(t),i.success("Toplantı oluşturuldu")),null==s||s()}catch(t){i.error(p?"Toplantı güncellenirken hata oluştu":"Toplantı oluşturulurken hata oluştu")}finally{f(!1)}}),className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Toplantı Başlığı *"}),t.jsx("input",{...v("title"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı başlığını giriniz"}),D.title&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:D.title.message})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Açıklama"}),t.jsx("textarea",{...v("description"),rows:3,className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı açıklamasını giriniz"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium mb-2",children:[t.jsx(o,{className:"h-4 w-4 inline mr-2"}),"Başlangıç Tarihi *"]}),t.jsx("input",{...v("start_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),D.start_date&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:D.start_date.message})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium mb-2",children:[t.jsx(m,{className:"h-4 w-4 inline mr-2"}),"Bitiş Tarihi *"]}),t.jsx("input",{...v("end_date"),type:"datetime-local",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent"}),D.end_date&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:D.end_date.message})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"meeting_type",className:"block text-sm font-medium mb-2",children:"Toplantı Türü *"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[t.jsx("input",{...v("meeting_type"),type:"radio",value:"physical",className:"mr-2"}),t.jsx(u,{className:"h-4 w-4 mr-2 text-green-500"}),t.jsx("span",{children:"Fiziksel"})]}),t.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[t.jsx("input",{...v("meeting_type"),type:"radio",value:"online",className:"mr-2"}),t.jsx(M,{className:"h-4 w-4 mr-2 text-blue-500"}),t.jsx("span",{children:"Online"})]}),t.jsxs("label",{className:"flex items-center p-3 border rounded-md cursor-pointer hover:bg-muted",children:[t.jsx("input",{...v("meeting_type"),type:"radio",value:"hybrid",className:"mr-2"}),t.jsx(u,{className:"h-4 w-4 mr-1 text-green-500"}),t.jsx(M,{className:"h-4 w-4 mr-2 text-blue-500"}),t.jsx("span",{children:"Hibrit"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-2",children:"online"===T?"Toplantı Linki":"Konum"}),"online"===T?t.jsx("input",{...v("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"https://zoom.us/j/123456789"}):t.jsx("input",{...v("location"),type:"text",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Toplantı konumunu giriniz"}),"hybrid"===T&&t.jsx("div",{className:"mt-2",children:t.jsx("input",{...v("meeting_url"),type:"url",className:"w-full p-3 border border-input rounded-md focus:ring-2 focus:ring-ring focus:border-transparent",placeholder:"Online katılım linki (opsiyonel)"})}),D.meeting_url&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:D.meeting_url.message})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:[t.jsx(x,{className:"h-4 w-4 inline mr-2"}),"Katılımcılar"]}),t.jsx(B,{selectedUserIds:y,onSelectionChange:e=>{N(e)},placeholder:"Katılımcı ara ve seç...",excludeUserIds:(null==b?void 0:b.id)?[b.id]:[]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n&&t.jsx(c,{type:"button",variant:"outline",onClick:n,children:"İptal"}),t.jsxs(c,{type:"submit",disabled:j,children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),j?"Kaydediliyor...":p?"Güncelle":"Oluştur"]})]})]})]})}function $({meetingId:s,isOpen:n,onClose:l,onEdit:i,onDelete:w}){const[_,k]=e.useState(null),[S,D]=e.useState([]),[T,z]=e.useState([]),[I,C]=e.useState([]),[H,B]=e.useState([]),[F,L]=e.useState(!1),[P,$]=e.useState("details"),[U,Y]=e.useState(""),[V,W]=e.useState(!1),[q,R]=e.useState({title:"",description:"",assigned_to:"",due_date:""}),[X,Q]=e.useState(!1),{user:Z}=r();e.useEffect(()=>{n&&s&&J()},[n,s]);const J=async()=>{L(!0);try{const[e,t,a,n,l]=await Promise.all([G.getMeeting(s),G.getAttendees(s),G.getAgenda(s),G.getMinutes(s),G.getActionItems(s)]);k(e),D(t),z(a),C(n),B(l)}catch(e){A.error("Toplantı bilgileri yüklenirken hata oluştu")}finally{L(!1)}},ee=async e=>{if(_&&Z)try{await G.updateAttendeeStatus("temp_id",e),A.success("Katılım durumunuz güncellendi"),J()}catch(t){A.error("Katılım durumu güncellenirken hata oluştu")}},te=async(e,t)=>{try{await G.updateActionItemStatus(e,t),B(s=>s.map(s=>s.id===e?{...s,status:t}:s))}catch(s){A.error("Eylem durumu güncellenirken hata oluştu")}};return n?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Toplantı Detayları"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[_&&t.jsxs(c,{size:"sm",variant:"outline",onClick:()=>null==i?void 0:i(_),children:[t.jsx(E,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),t.jsxs(c,{size:"sm",variant:"outline",onClick:async()=>{if(_&&window.confirm("Bu toplantıyı silmek istediğinizden emin misiniz?"))try{await G.deleteMeeting(s),A.success("Toplantı silindi"),null==w||w(s),l()}catch(e){A.error("Toplantı silinirken hata oluştu")}},className:"text-red-600 hover:text-red-700",children:[t.jsx(p,{className:"h-4 w-4 mr-2"}),"Sil"]}),t.jsx(c,{variant:"ghost",size:"sm",onClick:l,children:t.jsx(a,{className:"h-4 w-4"})})]})]}),F?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"Yükleniyor..."})]}):_?t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsx("div",{className:"flex border-b overflow-x-auto",children:[{id:"details",label:"Detaylar",icon:g},{id:"attendees",label:"Katılımcılar",icon:x,count:S.length},{id:"agenda",label:"Gündem",icon:o,count:T.length},{id:"minutes",label:"Tutanak",icon:j,count:I.length},{id:"actions",label:"Eylemler",icon:O,count:H.length}].map(e=>t.jsxs("button",{onClick:()=>$(e.id),className:"flex items-center px-4 py-3 border-b-2 transition-colors whitespace-nowrap "+(P===e.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[t.jsx(e.icon,{className:"h-4 w-4 mr-2"}),e.label,void 0!==e.count&&t.jsx("span",{className:"ml-2 bg-muted text-muted-foreground text-xs px-2 py-1 rounded-full",children:e.count})]},e.id))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["details"===P&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs(d,{className:"p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:_.title}),_.description&&t.jsx("p",{className:"text-muted-foreground mb-4",children:_.description}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(o,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:f(new Date(_.start_date),"dd MMMM yyyy",{locale:y})})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(m,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{children:[f(new Date(_.start_date),"HH:mm")," - ",f(new Date(_.end_date),"HH:mm")]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:["online"===_.meeting_type?t.jsx(M,{className:"h-4 w-4 text-blue-500"}):"hybrid"===_.meeting_type?t.jsxs(t.Fragment,{children:[t.jsx(u,{className:"h-4 w-4 text-green-500"}),t.jsx(M,{className:"h-4 w-4 text-blue-500"})]}):t.jsx(u,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"capitalize",children:"physical"===_.meeting_type?"Fiziksel":"online"===_.meeting_type?"Online":"Hibrit"})]}),_.location&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(u,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:_.location})]})]}),_.meeting_url&&t.jsx("div",{className:"mt-4",children:t.jsxs("a",{href:_.meeting_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 underline",children:[t.jsx(M,{className:"h-4 w-4 mr-2"}),"Toplantıya Katıl"]})}),t.jsx("div",{className:"mt-4",children:t.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("scheduled"===_.status?"bg-blue-100 text-blue-800":"ongoing"===_.status?"bg-green-100 text-green-800":"completed"===_.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:"scheduled"===_.status?"Planlandı":"ongoing"===_.status?"Devam Ediyor":"completed"===_.status?"Tamamlandı":"İptal Edildi"})})]}),"scheduled"===_.status&&t.jsxs(d,{className:"p-4",children:[t.jsx("h4",{className:"font-medium mb-3",children:"Katılım Durumunuz"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(c,{size:"sm",variant:"outline",onClick:()=>ee("accepted"),className:"text-green-600 hover:text-green-700",children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),"Katılacağım"]}),t.jsxs(c,{size:"sm",variant:"outline",onClick:()=>ee("declined"),className:"text-red-600 hover:text-red-700",children:[t.jsx(K,{className:"h-4 w-4 mr-2"}),"Katılamayacağım"]}),t.jsx(c,{size:"sm",variant:"outline",onClick:()=>ee("maybe"),children:"Belki"})]})]})]}),"attendees"===P&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["Katılımcılar (",S.length,")"]}),t.jsxs(c,{size:"sm",children:[t.jsx(b,{className:"h-4 w-4 mr-2"}),"Katılımcı Ekle"]})]}),t.jsx("div",{className:"grid gap-3",children:S.map(e=>t.jsx(d,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"U"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium",children:["Kullanıcı ",e.user_id]}),e.notes&&t.jsx("div",{className:"text-sm text-muted-foreground",children:e.notes}),e.response_date&&t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Yanıt: ",f(new Date(e.response_date),"dd MMM HH:mm",{locale:y})]})]})]}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("accepted"===e.status?"bg-green-100 text-green-800":"declined"===e.status?"bg-red-100 text-red-800":"maybe"===e.status?"bg-yellow-100 text-yellow-800":"attended"===e.status?"bg-blue-100 text-blue-800":(e.status,"bg-gray-100 text-gray-800")),children:"accepted"===e.status?"Kabul Etti":"declined"===e.status?"Reddetti":"maybe"===e.status?"Belki":"attended"===e.status?"Katıldı":"absent"===e.status?"Katılmadı":"Davet Edildi"})]})},e.id))})]}),"agenda"===P&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["Gündem (",T.length," madde)"]}),t.jsxs(c,{size:"sm",children:[t.jsx(v,{className:"h-4 w-4 mr-2"}),"Gündem Ekle"]})]}),T.length>0?t.jsx("div",{className:"space-y-3",children:T.map((e,s)=>t.jsx(d,{className:"p-4",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium",children:s+1}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-lg",children:e.title}),e.description&&t.jsx("p",{className:"text-muted-foreground mt-2",children:e.description}),t.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[e.duration_minutes&&t.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[t.jsx(m,{className:"h-4 w-4 mr-1"}),e.duration_minutes," dakika"]}),e.presenter_id&&t.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[t.jsx(x,{className:"h-4 w-4 mr-1"}),"Sunan: Kullanıcı ",e.presenter_id]})]})]})]})},e.id))}):t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(o,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"Henüz gündem maddesi eklenmemiş"})]})]}),"minutes"===P&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Toplantı Tutanağı"}),!V&&t.jsxs(c,{size:"sm",onClick:()=>W(!0),children:[t.jsx(v,{className:"h-4 w-4 mr-2"}),"Tutanak Ekle"]})]}),V&&t.jsx(d,{className:"p-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("textarea",{value:U,onChange:e=>Y(e.target.value),placeholder:"Tutanak metni...",className:"w-full h-32 p-3 border rounded-md resize-none"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(c,{size:"sm",onClick:async()=>{if(U.trim())try{const e=await G.addMinutes(s,U);C(t=>[...t,e]),Y(""),W(!1),A.success("Tutanak eklendi")}catch(e){A.error("Tutanak eklenirken hata oluştu")}},children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),t.jsx(c,{size:"sm",variant:"outline",onClick:()=>{W(!1),Y("")},children:"İptal"})]})]})}),I.length>0?t.jsx("div",{className:"space-y-3",children:I.map(e=>t.jsx(d,{className:"p-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:f(new Date(e.created_at),"dd MMM yyyy HH:mm",{locale:y})}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["Yazan: Kullanıcı ",e.created_by]})]}),t.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.content})]})},e.id))}):!V&&t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(j,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"Henüz tutanak eklenmemiş"})]})]}),"actions"===P&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Eylem Maddeleri"}),!X&&t.jsxs(c,{size:"sm",onClick:()=>Q(!0),children:[t.jsx(v,{className:"h-4 w-4 mr-2"}),"Eylem Ekle"]})]}),X&&t.jsx(d,{className:"p-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",value:q.title,onChange:e=>R(t=>({...t,title:e.target.value})),placeholder:"Eylem başlığı...",className:"w-full p-3 border rounded-md"}),t.jsx("textarea",{value:q.description,onChange:e=>R(t=>({...t,description:e.target.value})),placeholder:"Açıklama...",className:"w-full h-20 p-3 border rounded-md resize-none"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"text",value:q.assigned_to,onChange:e=>R(t=>({...t,assigned_to:e.target.value})),placeholder:"Atanan kişi ID...",className:"p-3 border rounded-md"}),t.jsx("input",{type:"date",value:q.due_date,onChange:e=>R(t=>({...t,due_date:e.target.value})),className:"p-3 border rounded-md"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(c,{size:"sm",onClick:async()=>{if(q.title.trim()&&q.assigned_to)try{const e={meeting_id:s,title:q.title,description:q.description||void 0,assigned_to:q.assigned_to,due_date:q.due_date||void 0,status:"pending"},t=await G.addActionItem(e);B(e=>[...e,t]),R({title:"",description:"",assigned_to:"",due_date:""}),Q(!1),A.success("Eylem maddesi eklendi")}catch(e){A.error("Eylem maddesi eklenirken hata oluştu")}},children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),t.jsx(c,{size:"sm",variant:"outline",onClick:()=>{Q(!1),R({title:"",description:"",assigned_to:"",due_date:""})},children:"İptal"})]})]})}),H.length>0?t.jsx("div",{className:"space-y-3",children:H.map(e=>t.jsx(d,{className:"p-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium",children:e.title}),e.description&&t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"cancelled"===e.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:"completed"===e.status?"Tamamlandı":"in_progress"===e.status?"Devam Ediyor":"cancelled"===e.status?"İptal Edildi":"Bekliyor"})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("span",{children:["Atanan: Kullanıcı ",e.assigned_to]}),e.due_date&&t.jsxs("span",{children:["Son Tarih: ",f(new Date(e.due_date),"dd MMM yyyy",{locale:y})]})]}),"completed"!==e.status&&t.jsxs("div",{className:"flex space-x-1",children:["pending"===e.status&&t.jsx(c,{size:"sm",variant:"outline",onClick:()=>te(e.id,"in_progress"),children:"Başlat"}),t.jsxs(c,{size:"sm",variant:"outline",onClick:()=>te(e.id,"completed"),className:"text-green-600 hover:text-green-700",children:[t.jsx(N,{className:"h-3 w-3 mr-1"}),"Tamamla"]})]})]})]})},e.id))}):!X&&t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(O,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"Henüz eylem maddesi eklenmemiş"})]})]})]})]}):t.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Toplantı bulunamadı"})]})}):null}function U(){const[s,a]=e.useState([]),[l,i]=e.useState(!0),[r,h]=e.useState(""),[p,g]=e.useState("all"),[j,N]=e.useState(!1),[b,_]=e.useState(null),[k,S]=e.useState(!1),[D,T]=e.useState(null);e.useEffect(()=>{z()},[]);const z=async()=>{i(!0);try{const e=await G.getMeetings();a(e)}catch(e){A.error("Toplantılar yüklenirken hata oluştu")}finally{i(!1)}},I=s.filter(e=>{var t;const s=e.title.toLowerCase().includes(r.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(r.toLowerCase())),a="all"===p||e.status===p;return s&&a}),C={total:s.length,thisWeek:s.filter(e=>{const t=new Date(e.start_date),s=new Date,a=new Date(s.setDate(s.getDate()-s.getDay())),n=new Date(a.getTime()+6048e5);return t>=a&&t<n}).length,ongoing:s.filter(e=>"ongoing"===e.status).length,completed:s.filter(e=>"completed"===e.status).length};return j?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(c,{variant:"outline",onClick:()=>{N(!1),T(null)},children:"← Geri"}),t.jsx("h1",{className:"text-3xl font-bold",children:D?"Toplantı Düzenle":"Yeni Toplantı"})]}),t.jsx(P,{onSuccess:()=>{N(!1),T(null),z()},onCancel:()=>{N(!1),T(null)},initialData:D||void 0,isEditMode:!!D,meetingId:null==D?void 0:D.id})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Toplantılar"}),t.jsx("p",{className:"text-muted-foreground",children:"Toplantı planlama ve yönetimi"})]}),t.jsxs(c,{onClick:()=>N(!0),children:[t.jsx(v,{className:"h-4 w-4 mr-2"}),"Yeni Toplantı"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(d,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Toplantı"}),t.jsx("p",{className:"text-2xl font-bold",children:C.total})]}),t.jsx(o,{className:"h-8 w-8 text-blue-500"})]})}),t.jsx(d,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bu Hafta"}),t.jsx("p",{className:"text-2xl font-bold",children:C.thisWeek})]}),t.jsx(m,{className:"h-8 w-8 text-green-500"})]})}),t.jsx(d,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Devam Eden"}),t.jsx("p",{className:"text-2xl font-bold",children:C.ongoing})]}),t.jsx(x,{className:"h-8 w-8 text-orange-500"})]})}),t.jsx(d,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tamamlanan"}),t.jsx("p",{className:"text-2xl font-bold",children:C.completed})]}),t.jsx(o,{className:"h-8 w-8 text-purple-500"})]})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),t.jsx("input",{type:"text",placeholder:"Toplantı ara...",value:r,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-input rounded-md bg-background"})]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:p,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[t.jsx("option",{value:"all",children:"Tüm Durumlar"}),t.jsx("option",{value:"scheduled",children:"Planlandı"}),t.jsx("option",{value:"ongoing",children:"Devam Ediyor"}),t.jsx("option",{value:"completed",children:"Tamamlandı"}),t.jsx("option",{value:"cancelled",children:"İptal Edildi"})]}),t.jsxs(c,{variant:"outline",children:[t.jsx(w,{className:"h-4 w-4 mr-2"}),"Filtreler"]})]})]}),l?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"Toplantılar yükleniyor..."})]}):t.jsx(d,{className:"overflow-hidden",children:I.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"border-b bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left p-4 font-medium",children:"Toplantı"}),t.jsx("th",{className:"text-left p-4 font-medium",children:"Tarih & Saat"}),t.jsx("th",{className:"text-left p-4 font-medium",children:"Tür & Konum"}),t.jsx("th",{className:"text-left p-4 font-medium",children:"Durum"}),t.jsx("th",{className:"text-left p-4 font-medium",children:"İşlemler"})]})}),t.jsx("tbody",{children:I.map(e=>t.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:e.title}),e.description&&t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:e.description})]})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(o,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("div",{children:f(new Date(e.start_date),"dd MMM yyyy",{locale:y})}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:[f(new Date(e.start_date),"HH:mm")," - ",f(new Date(e.end_date),"HH:mm")]})]})]})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:["online"===e.meeting_type?t.jsx(M,{className:"h-4 w-4 text-blue-500"}):"hybrid"===e.meeting_type?t.jsxs(t.Fragment,{children:[t.jsx(u,{className:"h-4 w-4 text-green-500"}),t.jsx(M,{className:"h-4 w-4 text-blue-500"})]}):t.jsx(u,{className:"h-4 w-4 text-green-500"}),t.jsxs("div",{children:[t.jsx("div",{className:"capitalize",children:"physical"===e.meeting_type?"Fiziksel":"online"===e.meeting_type?"Online":"Hibrit"}),e.location&&t.jsx("div",{className:"text-sm text-muted-foreground",children:e.location})]})]})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("scheduled"===e.status?"bg-blue-100 text-blue-800":"ongoing"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:"scheduled"===e.status?"Planlandı":"ongoing"===e.status?"Devam Ediyor":"completed"===e.status?"Tamamlandı":"İptal Edildi"})}),t.jsx("td",{className:"p-4",children:t.jsxs(c,{size:"sm",variant:"outline",onClick:()=>(e=>{_(e),S(!0)})(e),children:[t.jsx(H,{className:"h-4 w-4 mr-2"}),"Detaylar"]})})]},e.id))})]})}):t.jsx("div",{className:"p-8 text-center text-muted-foreground",children:r||"all"!==p?"Arama kriterlerine uygun toplantı bulunamadı":"Henüz toplantı oluşturulmamış"})}),b&&t.jsx($,{meetingId:b.id,isOpen:k,onClose:()=>{S(!1),_(null)},onEdit:e=>{T(e),N(!0),S(!1)},onDelete:e=>{a(t=>t.filter(t=>t.id!==e))}})]})}export{U as default};
