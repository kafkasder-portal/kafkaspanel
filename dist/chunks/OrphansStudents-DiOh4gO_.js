import{r as e,j as s,i as a,Q as t,g as r,D as l,S as n,F as i,e as d,n as c,s as m,V as o}from"../assets/index-C7XW2vnU.js";import{D as x}from"./DataTable-BR_3tqT5.js";import{e as u}from"./exportToCsv-DLkyd1nM.js";import{S as g}from"./StatCard-BDZzrbVN.js";import{M as h}from"./Modal-QxY_FyG0.js";import{E as p}from"./eye-Bpapn1fj.js";import{P as j}from"./pen-square-C-SOcf8u.js";function y(){const[o,y]=e.useState(""),[f,k]=e.useState("all"),[C,w]=e.useState("all"),[S,T]=e.useState(!1),[z,O]=e.useState(!1),[D,B]=e.useState(null),[A,K]=e.useState(!1),E=[],M=e.useMemo(()=>E.filter(e=>{const s=JSON.stringify(e).toLowerCase().includes(o.toLowerCase()),a="all"===f||e.status===f,t="all"===C||e.gender===C;return s&&a&&t}),[o,f,C,E]),_=e.useMemo(()=>{const e=E.length;return{total:e,active:E.filter(e=>"Aktif"===e.status).length,preparing:E.filter(e=>"Hazırlanıyor"===e.status).length,avgAge:Math.round(E.reduce((e,s)=>e+s.age,0)/e)}},[E]),Y=[{key:"fileNo",header:"Dosya No"},{key:"partner",header:"Partner & Şube"},{key:"nationality",header:"Uyruk"},{key:"country",header:"Ülke"},{key:"gender",header:"Cinsiyet"},{key:"age",header:"Yaş"},{key:"nameTr",header:"İsim (Tercüme)"},{key:"nameOrig",header:"İsim (Orijinal)"},{key:"status",header:"Durum",render:(e,a)=>s.jsx(b,{v:a.status})},{key:"actions",header:"İşlemler",render:(e,a)=>s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>{B(a),K(!0)},className:"rounded p-1 text-blue-600 hover:bg-blue-50",title:"Detay Görüntüle",children:s.jsx(p,{size:16})}),s.jsx("button",{className:"rounded p-1 text-green-600 hover:bg-green-50",title:"Düzenle",children:s.jsx(j,{size:16})}),s.jsx("button",{className:"rounded p-1 text-red-600 hover:bg-red-50",title:"Sil",children:s.jsx(m,{size:16})})]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(g,{title:"Toplam Öğrenci",value:_.total.toString(),icon:a}),s.jsx(g,{title:"Aktif Burslar",value:_.active.toString(),icon:t}),s.jsx(g,{title:"Hazırlanan",value:_.preparing.toString(),icon:r}),s.jsx(g,{title:"Ortalama Yaş",value:_.avgAge.toString(),icon:l})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto rounded border p-3 bg-white dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(n,{size:16,className:"text-gray-400"}),s.jsx("input",{value:o,onChange:e=>y(e.target.value),className:"min-w-64 flex-1 border-0 outline-none text-sm",placeholder:"Öğrenci adı, dosya no, kimlik no ile arama yapın..."})]}),s.jsxs("button",{onClick:()=>T(!S),className:"flex items-center gap-2 rounded px-3 py-2 text-sm border "+(S?"bg-blue-50 border-blue-200 text-blue-700":"hover:bg-gray-50"),children:[s.jsx(i,{size:16}),"Filtre"]}),s.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 rounded bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700",children:[s.jsx(d,{size:16}),"Yeni Öğrenci"]}),s.jsxs("button",{onClick:()=>u("yetimler.csv",M),className:"flex items-center gap-2 rounded bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700",children:[s.jsx(c,{size:16}),"Dışa Aktar"]})]}),S&&s.jsx("div",{className:"rounded border bg-gray-50 dark:bg-gray-700 p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Durum"}),s.jsxs("select",{value:f,onChange:e=>k(e.target.value),className:"w-full rounded border px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"Tümü"}),s.jsx("option",{value:"Aktif",children:"Aktif"}),s.jsx("option",{value:"Hazırlanıyor",children:"Hazırlanıyor"}),s.jsx("option",{value:"Kontrol",children:"Kontrol"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cinsiyet"}),s.jsxs("select",{value:C,onChange:e=>w(e.target.value),className:"w-full rounded border px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"Tümü"}),s.jsx("option",{value:"Kız",children:"Kız"}),s.jsx("option",{value:"Erkek",children:"Erkek"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{k("all"),w("all"),y("")},className:"rounded border px-3 py-2 text-sm hover:bg-white",children:"Filtreleri Temizle"})})]})}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:[M.length," kayıt gösteriliyor"]}),s.jsxs("span",{children:["Sayfa 1 / ",Math.ceil(M.length/10)]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded border",children:s.jsx(x,{columns:Y,data:M})}),s.jsx(h,{isOpen:z,onClose:()=>O(!1),title:"Yeni Öğrenci Ekle",children:s.jsx(v,{onClose:()=>O(!1)})}),s.jsx(h,{isOpen:A,onClose:()=>K(!1),title:"Öğrenci Detayları",children:D&&s.jsx(N,{student:D})})]})}function b({v:e}){return s.jsx("span",{className:`rounded px-2 py-0.5 text-xs ${{"Hazırlanıyor":"bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200",Aktif:"bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200",Kontrol:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200",Pasif:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200",Beklemede:"bg-orange-100 dark:bg-orange-800 text-orange-800 dark:text-orange-200"}[e]}`,children:e})}function v({onClose:a}){const[t,r]=e.useState({fileNo:"",partner:"",nationality:"",country:"",gender:"",age:"",nameTr:"",nameOrig:"",status:"Hazırlanıyor"});return s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const{data:e,error:s}=await o.from("students").insert([{file_number:t.fileNo,first_name:t.nameTr,last_name:t.nameOrig,identity_no:t.partner,birth_date:t.nationality,phone:t.country,email:t.gender,address:t.age,school:t.nameTr,grade:t.nameOrig,gpa:parseFloat(t.status)||null,parent_name:t.fileNo,parent_phone:t.partner,monthly_income:parseFloat(t.nationality)||null,status:"active",created_at:(new Date).toISOString()}]);if(s)return void alert("Öğrenci eklenirken hata oluştu: "+s.message);alert("Öğrenci başarıyla eklendi"),a()}catch(s){alert("Öğrenci eklenirken hata oluştu")}},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosya No *"}),s.jsx("input",{type:"text",required:!0,value:t.fileNo,onChange:e=>r({...t,fileNo:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: SERBEST-247"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner & Şube"}),s.jsx("input",{type:"text",value:t.partner,onChange:e=>r({...t,partner:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Serbest"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İsim (Tercüme) *"}),s.jsx("input",{type:"text",required:!0,value:t.nameTr,onChange:e=>r({...t,nameTr:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Türkçe isim"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İsim (Orijinal)"}),s.jsx("input",{type:"text",value:t.nameOrig,onChange:e=>r({...t,nameOrig:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Orijinal isim"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uyruk"}),s.jsx("input",{type:"text",value:t.nationality,onChange:e=>r({...t,nationality:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Çeçenistan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ülke"}),s.jsx("input",{type:"text",value:t.country,onChange:e=>r({...t,country:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Örn: Türkiye"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cinsiyet *"}),s.jsxs("select",{required:!0,value:t.gender,onChange:e=>r({...t,gender:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",children:[s.jsx("option",{value:"",children:"Seçiniz"}),s.jsx("option",{value:"Kız",children:"Kız"}),s.jsx("option",{value:"Erkek",children:"Erkek"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yaş *"}),s.jsx("input",{type:"number",required:!0,min:"1",max:"30",value:t.age,onChange:e=>r({...t,age:e.target.value}),className:"w-full rounded border px-3 py-2 text-sm",placeholder:"Yaş"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx("button",{type:"button",onClick:a,className:"rounded border px-4 py-2 text-sm hover:bg-gray-50",children:"İptal"}),s.jsx("button",{type:"submit",className:"rounded bg-green-600 px-4 py-2 text-sm text-white hover:bg-green-700",children:"Kaydet"})]})]})}function N({student:e}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Kişisel Bilgiler"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Dosya No:"}),s.jsx("p",{className:"font-medium",children:e.fileNo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"İsim (Tercüme):"}),s.jsx("p",{className:"font-medium",children:e.nameTr})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"İsim (Orijinal):"}),s.jsx("p",{className:"font-medium",children:e.nameOrig})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Yaş:"}),s.jsx("p",{className:"font-medium",children:e.age})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Cinsiyet:"}),s.jsx("p",{className:"font-medium",children:e.gender})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Konum Bilgileri"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Uyruk:"}),s.jsx("p",{className:"font-medium",children:e.nationality})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Ülke:"}),s.jsx("p",{className:"font-medium",children:e.country})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Partner & Şube:"}),s.jsx("p",{className:"font-medium",children:e.partner})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Durum:"}),s.jsx(b,{v:e.status})]})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Burs Bilgileri"}),s.jsx("div",{className:"bg-gray-50 rounded p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Burs Türü:"}),s.jsx("p",{className:"font-medium",children:"Eğitim Bursu"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Aylık Miktar:"}),s.jsx("p",{className:"font-medium",children:"₺2,500"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Başlangıç Tarihi:"}),s.jsx("p",{className:"font-medium",children:"01.09.2024"})]})]})})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Akademik Bilgiler"}),s.jsx("div",{className:"bg-blue-50 rounded p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Okul:"}),s.jsx("p",{className:"font-medium",children:"İstanbul Üniversitesi"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Bölüm:"}),s.jsx("p",{className:"font-medium",children:"Bilgisayar Mühendisliği"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sınıf:"}),s.jsx("p",{className:"font-medium",children:"2. Sınıf"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Not Ortalaması:"}),s.jsx("p",{className:"font-medium",children:"3.45 / 4.00"})]})]})})]})]})}export{y as default};
